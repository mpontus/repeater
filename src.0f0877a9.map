{"version":3,"sources":["node_modules/symbol-observable/es/ponyfill.js","node_modules/symbol-observable/es/index.js","node_modules/xstream/index.js","node_modules/process/browser.js","node_modules/quicktask/index.js","node_modules/@cycle/run/lib/es6/adapt.js","node_modules/@cycle/run/lib/es6/internals.js","node_modules/@cycle/run/lib/es6/index.js","node_modules/snabbdom/vnode.js","node_modules/snabbdom/is.js","node_modules/snabbdom/h.js","node_modules/@cycle/dom/lib/es6/thunk.js","node_modules/@cycle/run/lib/adapt.js","node_modules/@cycle/dom/lib/es6/fromEvent.js","node_modules/@cycle/dom/lib/es6/DocumentDOMSource.js","node_modules/@cycle/dom/lib/es6/BodyDOMSource.js","node_modules/@cycle/dom/lib/es6/utils.js","node_modules/@cycle/dom/lib/es6/ScopeChecker.js","node_modules/@cycle/dom/lib/es6/ElementFinder.js","node_modules/@cycle/dom/lib/es6/isolate.js","node_modules/@cycle/dom/lib/es6/MainDOMSource.js","node_modules/snabbdom/es/vnode.js","node_modules/snabbdom/es/is.js","node_modules/snabbdom/es/htmldomapi.js","node_modules/snabbdom/es/h.js","node_modules/snabbdom/es/thunk.js","node_modules/snabbdom/es/snabbdom.js","node_modules/xstream/extra/concat.js","node_modules/xstream/extra/sampleCombine.js","node_modules/snabbdom/htmldomapi.js","node_modules/snabbdom/tovnode.js","node_modules/snabbdom-selector/lib/es6/curry2.js","node_modules/tree-selector/lib/es6/selectorParser.js","node_modules/tree-selector/lib/es6/matches.js","node_modules/tree-selector/lib/es6/querySelector.js","node_modules/tree-selector/lib/es6/index.js","node_modules/snabbdom-selector/lib/es6/selectorParser.js","node_modules/snabbdom-selector/lib/es6/classNameFromVNode.js","node_modules/snabbdom-selector/lib/es6/parent-symbol.js","node_modules/snabbdom-selector/lib/es6/query.js","node_modules/snabbdom-selector/lib/es6/findMatches.js","node_modules/snabbdom-selector/lib/es6/index.js","node_modules/@cycle/dom/lib/es6/VNodeWrapper.js","node_modules/snabbdom/modules/class.js","node_modules/snabbdom/modules/props.js","node_modules/snabbdom/modules/attributes.js","node_modules/snabbdom/modules/style.js","node_modules/snabbdom/modules/dataset.js","node_modules/@cycle/dom/lib/es6/modules.js","node_modules/@cycle/dom/lib/es6/SymbolTree.js","node_modules/@cycle/dom/lib/es6/IsolateModule.js","node_modules/@cycle/dom/lib/es6/RemovalSet.js","node_modules/@cycle/dom/lib/es6/PriorityQueue.js","node_modules/@cycle/dom/lib/es6/EventDelegator.js","node_modules/@cycle/dom/lib/es6/makeDOMDriver.js","node_modules/@cycle/dom/lib/es6/mockDOMSource.js","node_modules/@cycle/dom/lib/es6/hyperscript-helpers.js","node_modules/@cycle/dom/lib/es6/index.js","node_modules/extend/index.js","node_modules/snabbdom-pragma/dist/index.es6.js","node_modules/@cycle/storage/lib/writeToStore.js","node_modules/xstream/extra/dropRepeats.js","node_modules/@cycle/storage/lib/util.js","node_modules/@cycle/storage/lib/responseCollection.js","node_modules/@cycle/storage/lib/index.js","node_modules/@cycle/isolate/lib/es6/index.js","src/drivers/worker.ts","src/drivers/audio.ts","src/utils.ts","src/components/LabeledSlider.ts","src/components/ToggleButton.ts","src/index.tsx"],"names":["symbolObservablePonyfill","root","result","Symbol","observable","self","window","global","module","Function","process","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","setAdapt","adapt","getGlobal","globalObj","Cyclejs","adaptStream","x","f","stream","makeSinkProxies","callDrivers","adaptSources","replicateMany","disposeSinkProxies","disposeSources","isObjectEmpty","scheduleMicrotask","drivers","sinkProxies","name_1","hasOwnProperty","xs","create","sources","name_2","_isCycleSource","name_3","sinks","sinkNames","Object","keys","filter","buffers","replicators","forEach","_n","_e","next","error","err","complete","subscriptions","map","fromObservable","subscribe","listener","console","log","disposeReplication","s","unsubscribe","_c","k","dispose","obj","setup","setupReusable","main","engine","_run","disposeRun","rawSources","disposeEngine","program","thunk","copyToThunk","vnode","thunkVNode","elm","data","fn","isolate","children","text","init","cur","undefined","prepatch","oldVnode","old","oldArgs","sel","key","hook","defineProperty","value","fromEvent","preventDefaultConditional","element","eventName","useCapture","preventDefault","passive","Stream","start","event","addEventListener","capture","stop","removeEventListener","matchObject","matcher","n","DocumentDOMSource","_name","select","selector","elements","out","of","document","events","eventType","options","BodyDOMSource","body","isClassOrId","isDocFrag","checkValidContainer","getValidNode","getSelectors","isEqualNamespace","makeInsert","isValidNode","ELEM_TYPE","FRAG_TYPE","HTMLElement","DocumentFragment","nodeType","nodeName","str","el","container","selectors","domElement","querySelector","namespace","res","type","scope","trim","a","b","isArray","has","innerMap","get","set","Map","ScopeChecker","isolateModule","_namespace","isDirectlyInScope","leaf","getNamespace","slice","toElArray","input","ElementFinder","scopeChecker","topNode","getElement","querySelectorAll","matches","makeIsolateSink","getScopeObj","__assign","assign","t","p","sink","node","scopeObj","newNode","JSON","stringify","MainDOMSource","_rootElement$","_sanitation$","_isolateModule","_eventDelegator","isolateSource","source","isolateSink","_elements","elementFinder_1","remember","arr","enumerable","configurable","bubbles","event$","shamefullySendNext","primitive","createElement","tagName","createElementNS","namespaceURI","qualifiedName","createTextNode","createComment","insertBefore","parentNode","referenceNode","removeChild","child","appendChild","nextSibling","setTextContent","textContent","getTextContent","isElement","isText","isComment","htmlDomApi","h","is","addNS","ns","childData","c","isUndef","isDef","emptyNode","sameVnode","vnode1","vnode2","isVnode","createKeyToOldIdx","beginIdx","endIdx","ch","hooks","modules","domApi","j","cbs","api","emptyNodeAt","id","className","split","join","toLowerCase","createRmCb","childElm","rmCb","parent_1","createElm","insertedVnodeQueue","hashIdx","indexOf","dotIdx","hash","dot","tag","Math","min","setAttribute","replace","insert","addVnodes","parentElm","before","vnodes","startIdx","invokeDestroyHook","destroy","removeVnodes","i_1","rm","remove","updateChildren","oldCh","newCh","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInOld","elmToMove","patchVnode","update","postpatch","patch","parent","pre","post","curry2","vNode","_vNode","parseSelector","IDENT","SPACE","VALUE","CLASS","ID","OP","ATTR","SUBTREE","CHILD","NEXT_SIBLING","SIBLING","COMBINATOR","CONTAINS","FORMULA","NTH_CHILD","PSEUDO","TAG","TOKENS","combinatorRegex","RegExp","tagRegex","exec","regex","lastIndex","nextSelector","lastCombinator","index","match","test","comb","getCombinator","substring","classList","startsWith","ids","postprocessRegex","attrs","_a","attr","op","val","_b","getOp","parseAttrValue","reduce","acc","curr","pseudos","postProcessPseudos","attributes","v","parseFloat","isNaN","content","createMatches","opts","classes","endsWith","contents","siblings","parseResult","factor","parseInt","add","createQuerySelector","_matches","findSubtree","depth","matched","childMatched","findSibling","results","currentSelector","currentCombinator","tail","_loop_1","depth_1","Infinity","next_1","selectorParser","classNameFromVNode","cn","dataClass","class","props","cl","parentSymbol","_d","dataset","customMatches","bind","findMatches","cssSelector","traverseVNode","addParent","recurse","currentNode","isParent","parentVNode","VNodeWrapper","rootElement","wrapDocFrag","wrap","selTagName","selId","vNodeClassName","vNodeData","vNodeDataProps","vNodeId","isVNodeAndRootElementIdentical","toUpperCase","selClass","StyleModule","ClassModule","PropsModule","AttrsModule","DatasetModule","SymbolTree","mapper","tree","path","max","_max","getDefault","mkDefaultElement","delete","IsolateModule","namespaceTree","namespaceByElement","vnodesBeingRemoved","setEventDelegator","del","eventDelegator","insertElement","removeElement","getRootElement","createModule","emptyVNode","oldVNode","oldElm","oldData","oldNamespace","cb","isolation","RemovalSet","toDelete","toDeleteSize","_set","Set","flush","PriorityQueue","prios","prio","splice","eventTypesThatDontBubble","EventDelegator","rootElement$","_this","virtualListeners","nonBubblingListenersToAdd","virtualNonBubblingListener","domListeners","domListenersToAdd","nonBubblingListeners","origin","resetEventListeners","setupDOMListener","clear","resetNonBubblingListeners","setupNonBubblingListener","subject","never","dest","insertListener","shouldBubble","finder","toRemove","size","relevantSets","getVirtualListeners","destination","exact","sub","onEvent","elementFinder","ev","iter","entries","done","newMap","contains","destination_1","newElm","newSub","putNonBubblingListener","cycleEvent","patchEvent","target","bubble","doBubbleStep","stopPropagation","propagationHasBeenStopped","newRoot","newIndex","mutateEventCurrentTarget","pEvent","oldStopPropagation","currentTargetElement","ownerTarget","makeDOMDriverInputGuard","domDriverInputGuard","view$","fold","dropCompletion","merge","unwrapElementFromVNode","reportSnabbdomError","makeDOMReady$","lis","readyState","state","addRootScope","makeDOMDriver","defaultModules","domReady$","vnodeWrapper","mutationObserver","mutationConfirmed$","MutationObserver","disconnect","DOMDriver","vnode$","sanitation$","firstRoot$","firstRoot","rememberedVNode$","elementAfterPatch$","endWhen","startWith","drop","observe","childList","characterData","subtree","attributeOldValue","characterDataOldValue","compose","flatten","delegator","mockDOMSource","SCOPE_PREFIX","MockedDOMSource","_mockConfig","empty","output$","streamForEventType","mockConfigForSelector","mockConfig","isValidString","param","isSelector","createTagFunction","hyperscript","hasA","hasB","hasC","SVG_TAG_NAMES","svg","TAG_NAMES","exported","hh","abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","dd","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","ins","kbd","keygen","label","legend","li","link","mark","menu","meta","nav","noscript","object","ol","optgroup","option","progress","q","rp","rt","ruby","samp","script","section","small","span","strong","style","sup","table","tbody","td","textarea","tfoot","th","thead","tr","u","ul","video","undefinedv","number","string","svgPropsMap","circle","ellipse","line","polygon","polyline","rect","g","extend","objs","_extend","reduceDeep","initial","mapObject","deepifyKeys","dashIndex","moduleData","obj$1","flatifyKeys","mod","omit","createTextElement","text$$1","considerSvg","vnode$$1","considerData","considerAria","aria","considerProps","rewritesMap","for","role","tabindex","considerAttrs","considerKey","sanitizeData","sanitizeText","sanitizeChildren","writeToStore","request","action","storage","localStorage","sessionStorage","default","dropRepeats_1","require","adapt_1","getStorage$","request$","req","storageKey","storage$","storageGetItem","storageObj","getItem","getResponseObj","util_1","default_1","local","session","writeToStore_1","responseCollection_1","storageDriver","toIsolated","checkIsolateArgs","dataflowComponent","normalizeScopes","scopes","randomScope","perChannel","channel","candidate","wildcard","isolateAllSources","outerSources","innerSources","outerSource","isolateAllSinks","innerSinks","outerSinks","innerSink","counter","newScope","component","toString","wrappedComponent","rest","_i","scopesPerChannel","reset"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBAAwBA;AAAT,SAASA,wBAAT,CAAkCC,IAAlC,EAAwC;AACtD,KAAIC,MAAJ;AACA,KAAIC,SAASF,KAAKE,MAAlB;;AAEA,KAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,MAAIA,OAAOC,UAAX,EAAuB;AACtBF,YAASC,OAAOC,UAAhB;AACA,GAFD,MAEO;AACNF,YAASC,OAAO,YAAP,CAAT;AACAA,UAAOC,UAAP,GAAoBF,MAApB;AACA;AACD,EAPD,MAOO;AACNA,WAAS,cAAT;AACA;;AAED,QAAOA,MAAP;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfD;;;;;;AAEA,IAAID,IAAJ,EAHA;;;AAKA,IAAI,OAAOI,IAAP,KAAgB,WAApB,EAAiC;AAC/BJ,SAAOI,IAAP;AACD,CAFD,MAEO,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACxCL,SAAOK,MAAP;AACD,CAFM,MAEA,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACxCN,SAAOM,MAAP;AACD,CAFM,MAEA,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACxCP,SAAOO,MAAP;AACD,CAFM,MAEA;AACLP,SAAOQ,SAAS,aAAT,GAAP;AACD;;AAED,IAAIP,SAAS,wBAASD,IAAT,CAAb;kBACeC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACljDA,ADmjDA;ACljDA,ADmjDA,ICnjDIQ,UAAUF,OAAOG,OAAP,GAAiB,EAA/B;ADojDA;ACljDA,ADmjDA;ACljDA,ADmjDA;ACljDA,ADmjDA;ACljDA,ADmjDA;AACA;ACljDA,ADmjDA,ICnjDIC,gBAAJ;AACA,ADmjDA,ICnjDIC,kBAAJ;ADojDA;ACljDA,ADmjDA,SCnjDSC,gBAAT,GAA4B;AACxB,ADmjDJ,UCnjDU,IAAIC,KAAJ,CAAU,iCAAV,CAAN;AACH,ADmjDD;ACljDA,ADmjDA,SCnjDSC,mBAAT,GAAgC;AAC5B,ADmjDJ,UCnjDU,IAAID,KAAJ,CAAU,mCAAV,CAAN;AACH,ADmjDD;ACljDC,ADmjDD,aCnjDa;AACT,ADmjDJ,QCnjDQ;AACA,ADmjDR,YCnjDY,OAAOE,UAAP,KAAsB,UAA1B,EAAsC;AAClCL,ADmjDZ,+BCnjD+BK,UAAnB;AACH,ADmjDT,SCrjDQ,MAEO;AACHL,ADmjDZ,+BCnjD+BE,gBAAnB;AACH,ADmjDT;ACljDK,ADmjDL,KCzjDI,CAME,OAAOI,CAAP,EAAU;AACRN,ADmjDR,2BCnjD2BE,gBAAnB;AACH,ADmjDL;ACljDI,ADmjDJ,QCnjDQ;AACA,ADmjDR,YCnjDY,OAAOK,YAAP,KAAwB,UAA5B,EAAwC;AACpCN,ADmjDZ,iCCnjDiCM,YAArB;AACH,ADmjDT,SCrjDQ,MAEO;AACHN,ADmjDZ,iCCnjDiCG,mBAArB;AACH,ADmjDT;ACljDK,ADmjDL,KCzjDI,CAME,OAAOE,CAAP,EAAU;AACRL,ADmjDR,6BCnjD6BG,mBAArB;AACH,ADmjDL;ACljDC,ADmjDD,CCtkDC,GAAD;AAoBA,ADmjDA,SCnjDSI,UAAT,CAAoBC,GAApB,EAAyB;AACrB,ADmjDJ,QCnjDQT,qBAAqBK,UAAzB,EAAqC;AACjC,ADmjDR;ACljDQ,ADmjDR,eCnjDeA,WAAWI,GAAX,EAAgB,CAAhB,CAAP;AACH,ADmjDL;ACljDI,ADmjDJ;ACljDI,ADmjDJ,QCnjDQ,CAACT,qBAAqBE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgEK,UAApE,EAAgF;AAC5EL,ADmjDR,2BCnjD2BK,UAAnB;AACA,ADmjDR,eCnjDeA,WAAWI,GAAX,EAAgB,CAAhB,CAAP;AACH,ADmjDL;ACljDI,ADmjDJ,QCnjDQ;AACA,ADmjDR;ACljDQ,ADmjDR,eCnjDeT,iBAAiBS,GAAjB,EAAsB,CAAtB,CAAP;AACH,ADmjDL,KCtjDI,CAGE,OAAMH,CAAN,EAAQ;AACN,ADmjDR,YCnjDY;AACA,ADmjDZ;ACljDY,ADmjDZ,mBCnjDmBN,iBAAiBU,IAAjB,CAAsB,IAAtB,EAA4BD,GAA5B,EAAiC,CAAjC,CAAP;AACH,ADmjDT,SCtjDQ,CAGE,OAAMH,CAAN,EAAQ;AACN,ADmjDZ;ACljDY,ADmjDZ,mBCnjDmBN,iBAAiBU,IAAjB,CAAsB,IAAtB,EAA4BD,GAA5B,EAAiC,CAAjC,CAAP;AACH,ADmjDT;ACljDK,ADmjDL;AChjDC,ADijDD;AChjDA,ADijDA,SCjjDSE,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,ADijDJ,QCjjDQX,uBAAuBM,YAA3B,EAAyC;AACrC,ADijDR;AChjDQ,ADijDR,eCjjDeA,aAAaK,MAAb,CAAP;AACH,ADijDL;AChjDI,ADijDJ;AChjDI,ADijDJ,QCjjDQ,CAACX,uBAAuBG,mBAAvB,IAA8C,CAACH,kBAAhD,KAAuEM,YAA3E,EAAyF;AACrFN,ADijDR,6BCjjD6BM,YAArB;AACA,ADijDR,eCjjDeA,aAAaK,MAAb,CAAP;AACH,ADijDL;AChjDI,ADijDJ,QCjjDQ;AACA,ADijDR;AChjDQ,ADijDR,eCjjDeX,mBAAmBW,MAAnB,CAAP;AACH,ADijDL,KCpjDI,CAGE,OAAON,CAAP,EAAS;AACP,ADijDR,YCjjDY;AACA,ADijDZ;AChjDY,ADijDZ,mBCjjDmBL,mBAAmBS,IAAnB,CAAwB,IAAxB,EAA8BE,MAA9B,CAAP;AACH,ADijDT,SCpjDQ,CAGE,OAAON,CAAP,EAAS;AACP,ADijDZ;AChjDY,ADijDZ;AChjDY,ADijDZ,mBCjjDmBL,mBAAmBS,IAAnB,CAAwB,IAAxB,EAA8BE,MAA9B,CAAP;AACH,ADijDT;AChjDK,ADijDL;AC7iDC,AD8iDD;AC7iDA,AD8iDA,IC9iDIC,QAAQ,EAAZ;AACA,AD8iDA,IC9iDIC,WAAW,KAAf;AACA,AD8iDA,IC9iDIC,YAAJ;AACA,AD8iDA,IC9iDIC,aAAa,CAAC,CAAlB;AD+iDA;AC7iDA,AD8iDA,SC9iDSC,eAAT,GAA2B;AACvB,AD8iDJ,QC9iDQ,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B,AD8iDR;AC7iDK,AD8iDL;AC7iDID,AD8iDJ,eC9iDe,KAAX;AACA,AD8iDJ,QC9iDQC,aAAaG,MAAjB,EAAyB;AACrBL,AD8iDR,gBC9iDgBE,aAAaI,MAAb,CAAoBN,KAApB,CAAR;AACH,AD8iDL,KChjDI,MAEO;AACHG,AD8iDR,qBC9iDqB,CAAC,CAAd;AACH,AD8iDL;AC7iDI,AD8iDJ,QC9iDQH,MAAMK,MAAV,EAAkB;AACdE,AD8iDR;AC7iDK,AD8iDL;AC7iDC,AD8iDD;AACA;AC7iDA,AD8iDA,SC9iDSA,UAAT,GAAsB;AAClB,AD8iDJ,QC9iDQN,QAAJ,EAAc;AACV,AD8iDR;AC7iDK,AD8iDL;AC7iDI,AD8iDJ,QC9iDQO,UAAUb,WAAWS,eAAX,CAAd;AACAH,AD8iDJ,eC9iDe,IAAX;AD+iDJ;AC7iDI,AD8iDJ,QC9iDQQ,MAAMT,MAAMK,MAAhB;AACA,AD8iDJ,WC9iDUI,GAAN,EAAW;AACPP,AD8iDR,uBC9iDuBF,KAAf;AACAA,AD8iDR,gBC9iDgB,EAAR;AACA,AD8iDR,eC9iDe,EAAEG,UAAF,GAAeM,GAAtB,EAA2B;AACvB,AD8iDZ,gBC9iDgBP,YAAJ,EAAkB;AACdA,AD8iDhB,6BC9iD6BC,UAAb,EAAyBO,GAAzB;AACH,AD8iDb;AC7iDS,AD8iDT;AC7iDQP,AD8iDR,qBC9iDqB,CAAC,CAAd;AACAM,AD8iDR,cC9iDcT,MAAMK,MAAZ;AACH,AD8iDL;AC7iDIH,AD8iDJ,mBC9iDmB,IAAf;AACAD,AD8iDJ,eC9iDe,KAAX;AACAH,AD8iDJ,oBC9iDoBU,OAAhB;AACH,AD8iDD;AACA;AC7iDAvB,AD8iDA,QC9iDQ0B,QAAR,GAAmB,UAAUf,GAAV,EAAe;AAC9B,AD8iDJ,QC9iDQgB,OAAO,IAAIC,KAAJ,CAAUC,UAAUT,MAAV,GAAmB,CAA7B,CAAX;AACA,AD8iDJ,QC9iDQS,UAAUT,MAAV,GAAmB,CAAvB,EAA0B;AACtB,AD8iDR,aC9iDa,IAAIU,IAAI,CAAb,EAAgBA,IAAID,UAAUT,MAA9B,EAAsCU,GAAtC,EAA2C;AACvCH,AD8iDZ,iBC9iDiBG,IAAI,CAAT,IAAcD,UAAUC,CAAV,CAAd;AACH,AD8iDT;AC7iDK,AD8iDL;AC7iDIf,AD8iDJ,UC9iDUgB,IAAN,CAAW,IAAIC,IAAJ,CAASrB,GAAT,EAAcgB,IAAd,CAAX;AACA,AD8iDJ,QC9iDQZ,MAAMK,MAAN,KAAiB,CAAjB,IAAsB,CAACJ,QAA3B,EAAqC;AACjCN,AD8iDR,mBC9iDmBY,UAAX;AACH,AD8iDL;AC7iDC,AD8iDD,CCzjDA;AD0jDA;AC7iDA,AD8iDA;AC7iDA,AD8iDA,SC9iDSU,IAAT,CAAcrB,GAAd,EAAmBsB,KAAnB,EAA0B;AACtB,AD8iDJ,SC9iDStB,GAAL,GAAWA,GAAX;AACA,AD8iDJ,SC9iDSsB,KAAL,GAAaA,KAAb;AACH,AD8iDD;AC7iDAD,AD8iDA,KC9iDKE,SAAL,CAAeT,GAAf,GAAqB,YAAY;AAC7B,AD8iDJ,SC9iDSd,GAAL,CAASwB,KAAT,CAAe,IAAf,EAAqB,KAAKF,KAA1B;AACH,AD8iDD,CChjDA;AAGAjC,AD8iDA,QC9iDQoC,KAAR,GAAgB,SAAhB;AACApC,AD8iDA,QC9iDQqC,OAAR,GAAkB,IAAlB;AACArC,AD8iDA,QC9iDQsC,GAAR,GAAc,EAAd;AACAtC,AD8iDA,QC9iDQuC,IAAR,GAAe,EAAf;AACAvC,AD8iDA,QC9iDQwC,OAAR,GAAkB,EAAlB,EAAsB;AACtBxC,AD8iDA,QC9iDQyC,QAAR,GAAmB,EAAnB;AD+iDA;AC7iDA,AD8iDA,SC9iDSC,IAAT,GAAgB,CAAE;AD+iDlB;AC7iDA1C,AD8iDA,QC9iDQ2C,EAAR,GAAaD,IAAb;AACA1C,QAAQ4C,WAAR,GAAsBF,IAAtB;AACA1C,QAAQ6C,IAAR,GAAeH,IAAf;AACA1C,QAAQ8C,GAAR,GAAcJ,IAAd;AACA1C,QAAQ+C,cAAR,GAAyBL,IAAzB;AACA1C,QAAQgD,kBAAR,GAA6BN,IAA7B;AACA1C,QAAQiD,IAAR,GAAeP,IAAf;AACA1C,QAAQkD,eAAR,GAA0BR,IAA1B;AACA1C,QAAQmD,mBAAR,GAA8BT,IAA9B;;AAEA1C,QAAQoD,SAAR,GAAoB,UAAUC,IAAV,EAAgB;AAAE,WAAO,EAAP;AAAW,CAAjD;;AAEArD,QAAQsD,OAAR,GAAkB,UAAUD,IAAV,EAAgB;AAC9B,UAAM,IAAIhD,KAAJ,CAAU,kCAAV,CAAN;AACH,CAFD;;AAIAL,QAAQuD,GAAR,GAAc,YAAY;AAAE,WAAO,GAAP;AAAY,CAAxC;AACAvD,QAAQwD,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,UAAM,IAAIpD,KAAJ,CAAU,gCAAV,CAAN;AACH,CAFD;AAGAL,QAAQ0D,KAAR,GAAgB,YAAW;AAAE,WAAO,CAAP;AAAW,CAAxC;;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;QCZgBC,WAAAA;QAGAC,QAAAA;AAnBhB,SAASC,SAAT,GAAqB;AACjB,QAAIC,SAAJ;AACA,QAAI,OAAOlE,MAAP,KAAkB,WAAtB,EAAmC;AAC/BkE,oBAAYlE,MAAZ;AACH,KAFD,MAGK,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACpCiE,oBAAYjE,MAAZ;AACH,KAFI,MAGA;AACDiE,oBAAY,IAAZ;AACH;AACDA,cAAUC,OAAV,GAAoBD,UAAUC,OAAV,IAAqB,EAAzC;AACAD,gBAAYA,UAAUC,OAAtB;AACAD,cAAUE,WAAV,GAAwBF,UAAUE,WAAV,IAA0B,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAP;AAAW,KAA5E;AACA,WAAOH,SAAP;AACH;AACM,SAASH,QAAT,CAAkBO,CAAlB,EAAqB;AACxBL,gBAAYG,WAAZ,GAA0BE,CAA1B;AACH;AACM,SAASN,KAAT,CAAeO,MAAf,EAAuB;AAC1B,WAAON,YAAYG,WAAZ,CAAwBG,MAAxB,CAAP;AACH;AACD;;;;;;;;;;QClBgBC,kBAAAA;QASAC,cAAAA;QAaAC,eAAAA;QAUAC,gBAAAA;QAwCAC,qBAAAA;QAGAC,iBAAAA;QASAC,gBAAAA;;AAxFhB;;;;AACA;;;;AACA;;;;AACA,IAAIC,oBAAoB,0BAAxB;AACO,SAASP,eAAT,CAAyBQ,OAAzB,EAAkC;AACrC,QAAIC,cAAc,EAAlB;AACA,SAAK,IAAIC,MAAT,IAAmBF,OAAnB,EAA4B;AACxB,YAAIA,QAAQG,cAAR,CAAuBD,MAAvB,CAAJ,EAAoC;AAChCD,wBAAYC,MAAZ,IAAsBE,kBAAGC,MAAH,EAAtB;AACH;AACJ;AACD,WAAOJ,WAAP;AACH;AACM,SAASR,WAAT,CAAqBO,OAArB,EAA8BC,WAA9B,EAA2C;AAC9C,QAAIK,UAAU,EAAd;AACA,SAAK,IAAIC,MAAT,IAAmBP,OAAnB,EAA4B;AACxB,YAAIA,QAAQG,cAAR,CAAuBI,MAAvB,CAAJ,EAAoC;AAChCD,oBAAQC,MAAR,IAAkBP,QAAQO,MAAR,EAAgBN,YAAYM,MAAZ,CAAhB,EAAqCA,MAArC,CAAlB;AACA,gBAAID,QAAQC,MAAR,KAAmB,QAAOD,QAAQC,MAAR,CAAP,MAA2B,QAAlD,EAA4D;AACxDD,wBAAQC,MAAR,EAAgBC,cAAhB,GAAiCD,MAAjC;AACH;AACJ;AACJ;AACD,WAAOD,OAAP;AACH;AACD;AACO,SAASZ,YAAT,CAAsBY,OAAtB,EAA+B;AAClC,SAAK,IAAIG,MAAT,IAAmBH,OAAnB,EAA4B;AACxB,YAAIA,QAAQH,cAAR,CAAuBM,MAAvB,KACAH,QAAQG,MAAR,CADA,IAEA,OAAOH,QAAQG,MAAR,EAAgB,oBAAhB,CAAP,KAAiD,UAFrD,EAEiE;AAC7DH,oBAAQG,MAAR,IAAkB,kBAAMH,QAAQG,MAAR,CAAN,CAAlB;AACH;AACJ;AACD,WAAOH,OAAP;AACH;AACM,SAASX,aAAT,CAAuBe,KAAvB,EAA8BT,WAA9B,EAA2C;AAC9C,QAAIU,YAAYC,OAAOC,IAAP,CAAYH,KAAZ,EAAmBI,MAAnB,CAA0B,UAAUrC,IAAV,EAAgB;AAAE,eAAO,CAAC,CAACwB,YAAYxB,IAAZ,CAAT;AAA6B,KAAzE,CAAhB;AACA,QAAIsC,UAAU,EAAd;AACA,QAAIC,cAAc,EAAlB;AACAL,cAAUM,OAAV,CAAkB,UAAUxC,IAAV,EAAgB;AAC9BsC,gBAAQtC,IAAR,IAAgB,EAAEyC,IAAI,EAAN,EAAUC,IAAI,EAAd,EAAhB;AACAH,oBAAYvC,IAAZ,IAAoB;AAChB2C,kBAAM,UAAU/B,CAAV,EAAa;AAAE,uBAAO0B,QAAQtC,IAAR,EAAcyC,EAAd,CAAiB/D,IAAjB,CAAsBkC,CAAtB,CAAP;AAAkC,aADvC;AAEhBgC,mBAAO,UAAUC,GAAV,EAAe;AAAE,uBAAOP,QAAQtC,IAAR,EAAc0C,EAAd,CAAiBhE,IAAjB,CAAsBmE,GAAtB,CAAP;AAAoC,aAF5C;AAGhBC,sBAAU,YAAY,CAAG;AAHT,SAApB;AAKH,KAPD;AAQA,QAAIC,gBAAgBb,UAAUc,GAAV,CAAc,UAAUhD,IAAV,EAAgB;AAC9C,eAAO2B,kBAAGsB,cAAH,CAAkBhB,MAAMjC,IAAN,CAAlB,EAA+BkD,SAA/B,CAAyCX,YAAYvC,IAAZ,CAAzC,CAAP;AACH,KAFmB,CAApB;AAGAkC,cAAUM,OAAV,CAAkB,UAAUxC,IAAV,EAAgB;AAC9B,YAAImD,WAAW3B,YAAYxB,IAAZ,CAAf;AACA,YAAI2C,OAAO,UAAU/B,CAAV,EAAa;AACpBU,8BAAkB,YAAY;AAAE,uBAAO6B,SAASV,EAAT,CAAY7B,CAAZ,CAAP;AAAwB,aAAxD;AACH,SAFD;AAGA,YAAIgC,QAAQ,UAAUC,GAAV,EAAe;AACvBvB,8BAAkB,YAAY;AAC1B,iBAAC8B,QAAQR,KAAR,IAAiBQ,QAAQC,GAA1B,EAA+BR,GAA/B;AACAM,yBAAST,EAAT,CAAYG,GAAZ;AACH,aAHD;AAIH,SALD;AAMAP,gBAAQtC,IAAR,EAAcyC,EAAd,CAAiBD,OAAjB,CAAyBG,IAAzB;AACAL,gBAAQtC,IAAR,EAAc0C,EAAd,CAAiBF,OAAjB,CAAyBI,KAAzB;AACAL,oBAAYvC,IAAZ,EAAkB2C,IAAlB,GAAyBA,IAAzB;AACAJ,oBAAYvC,IAAZ,EAAkB4C,KAAlB,GAA0BA,KAA1B;AACA;AACA;AACAL,oBAAYvC,IAAZ,EAAkByC,EAAlB,GAAuBE,IAAvB;AACAJ,oBAAYvC,IAAZ,EAAkB0C,EAAlB,GAAuBE,KAAvB;AACH,KAnBD;AAoBAN,cAAU,IAAV,CAnC8C,CAmC9B;AAChB,WAAO,SAASgB,kBAAT,GAA8B;AACjCP,sBAAcP,OAAd,CAAsB,UAAUe,CAAV,EAAa;AAAE,mBAAOA,EAAEC,WAAF,EAAP;AAAyB,SAA9D;AACH,KAFD;AAGH;AACM,SAASrC,kBAAT,CAA4BK,WAA5B,EAAyC;AAC5CW,WAAOC,IAAP,CAAYZ,WAAZ,EAAyBgB,OAAzB,CAAiC,UAAUxC,IAAV,EAAgB;AAAE,eAAOwB,YAAYxB,IAAZ,EAAkByD,EAAlB,EAAP;AAAgC,KAAnF;AACH;AACM,SAASrC,cAAT,CAAwBS,OAAxB,EAAiC;AACpC,SAAK,IAAI6B,CAAT,IAAc7B,OAAd,EAAuB;AACnB,YAAIA,QAAQH,cAAR,CAAuBgC,CAAvB,KACA7B,QAAQ6B,CAAR,CADA,IAEA7B,QAAQ6B,CAAR,EAAWC,OAFf,EAEwB;AACpB9B,oBAAQ6B,CAAR,EAAWC,OAAX;AACH;AACJ;AACJ;AACM,SAAStC,aAAT,CAAuBuC,GAAvB,EAA4B;AAC/B,WAAOzB,OAAOC,IAAP,CAAYwB,GAAZ,EAAiB7F,MAAjB,KAA4B,CAAnC;AACH;AACD;;;;;;;;;;QC9DgB8F,QAAAA;QA6DAC,gBAAAA;QAgDA1F,MAAAA;;AA1IhB;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BO,SAASyF,KAAT,CAAeE,IAAf,EAAqBxC,OAArB,EAA8B;AACjC,QAAI,OAAOwC,IAAP,KAAgB,UAApB,EAAgC;AAC5B,cAAM,IAAI/G,KAAJ,CAAU,sDAAsD,WAAhE,CAAN;AACH;AACD,QAAI,QAAOuE,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+BA,YAAY,IAA/C,EAAqD;AACjD,cAAM,IAAIvE,KAAJ,CAAU,sDACZ,sCADE,CAAN;AAEH;AACD,QAAI,8BAAcuE,OAAd,CAAJ,EAA4B;AACxB,cAAM,IAAIvE,KAAJ,CAAU,sDACZ,2DADE,CAAN;AAEH;AACD,QAAIgH,SAASF,cAAcvC,OAAd,CAAb;AACA,QAAIU,QAAQ8B,KAAKC,OAAOnC,OAAZ,CAAZ;AACA,QAAI,OAAOtF,MAAP,KAAkB,WAAtB,EAAmC;AAC/BA,eAAOmE,OAAP,GAAiBnE,OAAOmE,OAAP,IAAkB,EAAnC;AACAnE,eAAOmE,OAAP,CAAeuB,KAAf,GAAuBA,KAAvB;AACH;AACD,aAASgC,IAAT,GAAgB;AACZ,YAAIC,aAAaF,OAAO5F,GAAP,CAAW6D,KAAX,CAAjB;AACA,eAAO,SAAS0B,OAAT,GAAmB;AACtBO;AACAF,mBAAOL,OAAP;AACH,SAHD;AAIH;AACD,WAAO,EAAE1B,OAAOA,KAAT,EAAgBJ,SAASmC,OAAOnC,OAAhC,EAAyCzD,KAAK6F,IAA9C,EAAP;AACH;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCO,SAASH,aAAT,CAAuBvC,OAAvB,EAAgC;AACnC,QAAI,QAAOA,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+BA,YAAY,IAA/C,EAAqD;AACjD,cAAM,IAAIvE,KAAJ,CAAU,uDACZ,sCADE,CAAN;AAEH;AACD,QAAI,8BAAcuE,OAAd,CAAJ,EAA4B;AACxB,cAAM,IAAIvE,KAAJ,CAAU,uDACZ,2DADE,CAAN;AAEH;AACD,QAAIwE,cAAc,gCAAgBD,OAAhB,CAAlB;AACA,QAAI4C,aAAa,4BAAY5C,OAAZ,EAAqBC,WAArB,CAAjB;AACA,QAAIK,UAAU,6BAAasC,UAAb,CAAd;AACA,aAASF,IAAT,CAAchC,KAAd,EAAqB;AACjB,eAAO,8BAAcA,KAAd,EAAqBT,WAArB,CAAP;AACH;AACD,aAAS4C,aAAT,GAAyB;AACrB,uCAAevC,OAAf;AACA,2CAAmBL,WAAnB;AACH;AACD,WAAO,EAAEK,SAASA,OAAX,EAAoBzD,KAAK6F,IAAzB,EAA+BN,SAASS,aAAxC,EAAP;AACH;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BO,SAAShG,GAAT,CAAa2F,IAAb,EAAmBxC,OAAnB,EAA4B;AAC/B,QAAI8C,UAAUR,MAAME,IAAN,EAAYxC,OAAZ,CAAd;AACA,QAAI,OAAOhF,MAAP,KAAkB,WAAlB,IACAA,OAAO,qCAAP,CADJ,EACmD;AAC/CA,eAAO,qCAAP,EAA8C8H,QAAQpC,KAAtD;AACH;AACD,WAAOoC,QAAQjG,GAAR,EAAP;AACH;kBACcA;AACf;;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;QC3BgBkG,QAAAA;;AA/BhB;;AACA,SAASC,WAAT,CAAqBC,KAArB,EAA4BC,UAA5B,EAAwC;AACpCA,eAAWC,GAAX,GAAiBF,MAAME,GAAvB;AACAF,UAAMG,IAAN,CAAWC,EAAX,GAAgBH,WAAWE,IAAX,CAAgBC,EAAhC;AACAJ,UAAMG,IAAN,CAAWrG,IAAX,GAAkBmG,WAAWE,IAAX,CAAgBrG,IAAlC;AACAkG,UAAMG,IAAN,CAAWE,OAAX,GAAqBJ,WAAWE,IAAX,CAAgBE,OAArC;AACAJ,eAAWE,IAAX,GAAkBH,MAAMG,IAAxB;AACAF,eAAWK,QAAX,GAAsBN,MAAMM,QAA5B;AACAL,eAAWM,IAAX,GAAkBP,MAAMO,IAAxB;AACAN,eAAWC,GAAX,GAAiBF,MAAME,GAAvB;AACH;AACD,SAASM,IAAT,CAAcP,UAAd,EAA0B;AACtB,QAAIQ,MAAMR,WAAWE,IAArB;AACA,QAAIH,QAAQS,IAAIL,EAAJ,CAAO9F,KAAP,CAAaoG,SAAb,EAAwBD,IAAI3G,IAA5B,CAAZ;AACAiG,gBAAYC,KAAZ,EAAmBC,UAAnB;AACH;AACD,SAASU,QAAT,CAAkBC,QAAlB,EAA4BX,UAA5B,EAAwC;AACpC,QAAIY,MAAMD,SAAST,IAAnB;AAAA,QAAyBM,MAAMR,WAAWE,IAA1C;AACA,QAAIlG,CAAJ;AACA,QAAI6G,UAAUD,IAAI/G,IAAlB;AAAA,QAAwBA,OAAO2G,IAAI3G,IAAnC;AACA,QAAI+G,IAAIT,EAAJ,KAAWK,IAAIL,EAAf,IAAqBU,QAAQvH,MAAR,KAAmBO,KAAKP,MAAjD,EAAyD;AACrDwG,oBAAYU,IAAIL,EAAJ,CAAO9F,KAAP,CAAaoG,SAAb,EAAwB5G,IAAxB,CAAZ,EAA2CmG,UAA3C;AACH;AACD,SAAKhG,IAAI,CAAT,EAAYA,IAAIH,KAAKP,MAArB,EAA6B,EAAEU,CAA/B,EAAkC;AAC9B,YAAI6G,QAAQ7G,CAAR,MAAeH,KAAKG,CAAL,CAAnB,EAA4B;AACxB8F,wBAAYU,IAAIL,EAAJ,CAAO9F,KAAP,CAAaoG,SAAb,EAAwB5G,IAAxB,CAAZ,EAA2CmG,UAA3C;AACA;AACH;AACJ;AACDF,gBAAYa,QAAZ,EAAsBX,UAAtB;AACH;AACM,SAASH,KAAT,CAAeiB,GAAf,EAAoBC,GAApB,EAAyBZ,EAAzB,EAA6BtG,IAA7B,EAAmC;AACtC,QAAIA,SAAS4G,SAAb,EAAwB;AACpB5G,eAAOsG,EAAP;AACAA,aAAKY,GAAL;AACAA,cAAMN,SAAN;AACH;AACD,WAAO,UAAEK,GAAF,EAAO;AACVC,aAAKA,GADK;AAEVC,cAAM,EAAET,MAAMA,IAAR,EAAcG,UAAUA,QAAxB,EAFI;AAGVP,YAAIA,EAHM;AAIVtG,cAAMA;AAJI,KAAP,CAAP;AAMH;kBACcgG;AACf;;;AC7CA;;AACAnC,OAAOuD,cAAP,CAAsB9I,OAAtB,EAA+B,YAA/B,EAA6C,EAAE+I,OAAO,IAAT,EAA7C;AACA,SAASnF,SAAT,GAAqB;AACjB,QAAIC,SAAJ;AACA,QAAI,OAAOlE,MAAP,KAAkB,WAAtB,EAAmC;AAC/BkE,oBAAYlE,MAAZ;AACH,KAFD,MAGK,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACpCiE,oBAAYjE,MAAZ;AACH,KAFI,MAGA;AACDiE,oBAAY,IAAZ;AACH;AACDA,cAAUC,OAAV,GAAoBD,UAAUC,OAAV,IAAqB,EAAzC;AACAD,gBAAYA,UAAUC,OAAtB;AACAD,cAAUE,WAAV,GAAwBF,UAAUE,WAAV,IAA0B,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAP;AAAW,KAA5E;AACA,WAAOH,SAAP;AACH;AACD,SAASH,QAAT,CAAkBO,CAAlB,EAAqB;AACjBL,gBAAYG,WAAZ,GAA0BE,CAA1B;AACH;AACDjE,QAAQ0D,QAAR,GAAmBA,QAAnB;AACA,SAASC,KAAT,CAAeO,MAAf,EAAuB;AACnB,WAAON,YAAYG,WAAZ,CAAwBG,MAAxB,CAAP;AACH;AACDlE,QAAQ2D,KAAR,GAAgBA,KAAhB;AACA;;;;;;;QCzBgBqF,YAAAA;QA6CAC,4BAAAA;;AA9ChB;;AACO,SAASD,SAAT,CAAmBE,OAAnB,EAA4BC,SAA5B,EAAuCC,UAAvC,EAAmDC,cAAnD,EAAmEC,OAAnE,EAA4E;AAC/E,QAAIF,eAAe,KAAK,CAAxB,EAA2B;AAAEA,qBAAa,KAAb;AAAqB;AAClD,QAAIC,mBAAmB,KAAK,CAA5B,EAA+B;AAAEA,yBAAiB,KAAjB;AAAyB;AAC1D,QAAIC,YAAY,KAAK,CAArB,EAAwB;AAAEA,kBAAU,KAAV;AAAkB;AAC5C,WAAOC,gBAAOvE,MAAP,CAAc;AACjBkE,iBAASA,OADQ;AAEjBnD,cAAM,IAFW;AAGjByD,eAAO,SAASA,KAAT,CAAejD,QAAf,EAAyB;AAC5B,gBAAI8C,cAAJ,EAAoB;AAChB,qBAAKtD,IAAL,GAAY,SAASA,IAAT,CAAc0D,KAAd,EAAqB;AAC7BR,8CAA0BQ,KAA1B,EAAiCJ,cAAjC;AACA9C,6BAASR,IAAT,CAAc0D,KAAd;AACH,iBAHD;AAIH,aALD,MAMK;AACD,qBAAK1D,IAAL,GAAY,SAASA,IAAT,CAAc0D,KAAd,EAAqB;AAC7BlD,6BAASR,IAAT,CAAc0D,KAAd;AACH,iBAFD;AAGH;AACD,iBAAKP,OAAL,CAAaQ,gBAAb,CAA8BP,SAA9B,EAAyC,KAAKpD,IAA9C,EAAoD;AAChD4D,yBAASP,UADuC;AAEhDE,yBAASA;AAFuC,aAApD;AAIH,SAnBgB;AAoBjBM,cAAM,SAASA,IAAT,GAAgB;AAClB,iBAAKV,OAAL,CAAaW,mBAAb,CAAiCV,SAAjC,EAA4C,KAAKpD,IAAjD,EAAuDqD,UAAvD;AACH;AAtBgB,KAAd,CAAP;AAwBH;AACD,SAASU,WAAT,CAAqBC,OAArB,EAA8B/C,GAA9B,EAAmC;AAC/B,QAAIxB,OAAOD,OAAOC,IAAP,CAAYuE,OAAZ,CAAX;AACA,QAAIC,IAAIxE,KAAKrE,MAAb;AACA,SAAK,IAAIU,IAAI,CAAb,EAAgBA,IAAImI,CAApB,EAAuBnI,GAAvB,EAA4B;AACxB,YAAIiF,IAAItB,KAAK3D,CAAL,CAAR;AACA,YAAI,OAAOkI,QAAQjD,CAAR,CAAP,KAAsB,QAAtB,IAAkC,OAAOE,IAAIF,CAAJ,CAAP,KAAkB,QAAxD,EAAkE;AAC9D,gBAAI,CAACgD,YAAYC,QAAQjD,CAAR,CAAZ,EAAwBE,IAAIF,CAAJ,CAAxB,CAAL,EAAsC;AAClC,uBAAO,KAAP;AACH;AACJ,SAJD,MAKK,IAAIiD,QAAQjD,CAAR,MAAeE,IAAIF,CAAJ,CAAnB,EAA2B;AAC5B,mBAAO,KAAP;AACH;AACJ;AACD,WAAO,IAAP;AACH;AACM,SAASmC,yBAAT,CAAmCQ,KAAnC,EAA0CJ,cAA1C,EAA0D;AAC7D,QAAIA,cAAJ,EAAoB;AAChB,YAAI,OAAOA,cAAP,KAA0B,SAA9B,EAAyC;AACrCI,kBAAMJ,cAAN;AACH,SAFD,MAGK,IAAI,OAAOA,cAAP,KAA0B,UAA9B,EAA0C;AAC3C,gBAAIA,eAAeI,KAAf,CAAJ,EAA2B;AACvBA,sBAAMJ,cAAN;AACH;AACJ,SAJI,MAKA,IAAI,OAAOA,cAAP,KAA0B,QAA9B,EAAwC;AACzC,gBAAIS,YAAYT,cAAZ,EAA4BI,KAA5B,CAAJ,EAAwC;AACpCA,sBAAMJ,cAAN;AACH;AACJ,SAJI,MAKA;AACD,kBAAM,IAAIjJ,KAAJ,CAAU,yEAAV,CAAN;AACH;AACJ;AACJ;AACD;;;;;;;;;AClEA;;;;AACA;;AACA;;;;AACA,IAAI6J,oBAAoB,aAAe,YAAY;AAC/C,aAASA,iBAAT,CAA2BC,KAA3B,EAAkC;AAC9B,aAAKA,KAAL,GAAaA,KAAb;AACH;AACDD,sBAAkBhI,SAAlB,CAA4BkI,MAA5B,GAAqC,UAAUC,QAAV,EAAoB;AACrD;AACA,eAAO,IAAP;AACH,KAHD;AAIAH,sBAAkBhI,SAAlB,CAA4BoI,QAA5B,GAAuC,YAAY;AAC/C,YAAIC,MAAM,kBAAMvF,kBAAGwF,EAAH,CAAM,CAACC,QAAD,CAAN,CAAN,CAAV;AACAF,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAJD;AAKAL,sBAAkBhI,SAAlB,CAA4BiH,OAA5B,GAAsC,YAAY;AAC9C,YAAIoB,MAAM,kBAAMvF,kBAAGwF,EAAH,CAAMC,QAAN,CAAN,CAAV;AACAF,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAJD;AAKAL,sBAAkBhI,SAAlB,CAA4BwI,MAA5B,GAAqC,UAAUC,SAAV,EAAqBC,OAArB,EAA8B;AAC/D,YAAIA,YAAY,KAAK,CAArB,EAAwB;AAAEA,sBAAU,EAAV;AAAe;AACzC,YAAIzG,MAAJ;AACAA,iBAAS,0BAAUsG,QAAV,EAAoBE,SAApB,EAA+BC,QAAQvB,UAAvC,EAAmDuB,QAAQtB,cAA3D,CAAT;AACA,YAAIiB,MAAM,kBAAMpG,MAAN,CAAV;AACAoG,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAPD;AAQA,WAAOL,iBAAP;AACH,CA3BsC,EAAvC;QA4BSA,oBAAAA;AACT;;;;;;;;;AChCA;;;;AACA;;AACA;;;;AACA,IAAIW,gBAAgB,aAAe,YAAY;AAC3C,aAASA,aAAT,CAAuBV,KAAvB,EAA8B;AAC1B,aAAKA,KAAL,GAAaA,KAAb;AACH;AACDU,kBAAc3I,SAAd,CAAwBkI,MAAxB,GAAiC,UAAUC,QAAV,EAAoB;AACjD;AACA,eAAO,IAAP;AACH,KAHD;AAIAQ,kBAAc3I,SAAd,CAAwBoI,QAAxB,GAAmC,YAAY;AAC3C,YAAIC,MAAM,kBAAMvF,kBAAGwF,EAAH,CAAM,CAACC,SAASK,IAAV,CAAN,CAAN,CAAV;AACAP,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAJD;AAKAM,kBAAc3I,SAAd,CAAwBiH,OAAxB,GAAkC,YAAY;AAC1C,YAAIoB,MAAM,kBAAMvF,kBAAGwF,EAAH,CAAMC,SAASK,IAAf,CAAN,CAAV;AACAP,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAJD;AAKAM,kBAAc3I,SAAd,CAAwBwI,MAAxB,GAAiC,UAAUC,SAAV,EAAqBC,OAArB,EAA8B;AAC3D,YAAIA,YAAY,KAAK,CAArB,EAAwB;AAAEA,sBAAU,EAAV;AAAe;AACzC,YAAIzG,MAAJ;AACAA,iBAAS,0BAAUsG,SAASK,IAAnB,EAAyBH,SAAzB,EAAoCC,QAAQvB,UAA5C,EAAwDuB,QAAQtB,cAAhE,CAAT;AACA,YAAIiB,MAAM,kBAAMpG,MAAN,CAAV;AACAoG,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAPD;AAQA,WAAOM,aAAP;AACH,CA3BkC,EAAnC;QA4BSA,gBAAAA;AACT;;;;;;;QCrBgBE,cAAAA;QAGAC,YAAAA;QAGAC,sBAAAA;QAKAC,eAAAA;QASAC,eAAAA;QAUAC,mBAAAA;QAWAC,aAAAA;AApDhB,SAASC,WAAT,CAAqBrE,GAArB,EAA0B;AACtB,QAAIsE,YAAY,CAAhB;AACA,QAAIC,YAAY,EAAhB;AACA,WAAO,OAAOC,WAAP,KAAuB,QAAvB,GACDxE,eAAewE,WAAf,IAA8BxE,eAAeyE,gBAD5C,GAEDzE,OACE,OAAOA,GAAP,KAAe,QADjB,IAEEA,QAAQ,IAFV,KAGGA,IAAI0E,QAAJ,KAAiBJ,SAAjB,IAA8BtE,IAAI0E,QAAJ,KAAiBH,SAHlD,KAIE,OAAOvE,IAAI2E,QAAX,KAAwB,QANhC;AAOH;AACM,SAASb,WAAT,CAAqBc,GAArB,EAA0B;AAC7B,WAAOA,IAAIzK,MAAJ,GAAa,CAAb,KAAmByK,IAAI,CAAJ,MAAW,GAAX,IAAkBA,IAAI,CAAJ,MAAW,GAAhD,CAAP;AACH;AACM,SAASb,SAAT,CAAmBc,EAAnB,EAAuB;AAC1B,WAAOA,GAAGH,QAAH,KAAgB,EAAvB;AACH;AACM,SAASV,mBAAT,CAA6Bc,SAA7B,EAAwC;AAC3C,QAAI,OAAOA,SAAP,KAAqB,QAArB,IAAiC,CAACT,YAAYS,SAAZ,CAAtC,EAA8D;AAC1D,cAAM,IAAI1L,KAAJ,CAAU,iEAAV,CAAN;AACH;AACJ;AACM,SAAS6K,YAAT,CAAsBc,SAAtB,EAAiC;AACpC,QAAIC,aAAa,OAAOD,SAAP,KAAqB,QAArB,GACXvB,SAASyB,aAAT,CAAuBF,SAAvB,CADW,GAEXA,SAFN;AAGA,QAAI,OAAOA,SAAP,KAAqB,QAArB,IAAiCC,eAAe,IAApD,EAA0D;AACtD,cAAM,IAAI5L,KAAJ,CAAU,yCAAyC2L,SAAzC,GAAqD,GAA/D,CAAN;AACH;AACD,WAAOC,UAAP;AACH;AACM,SAASd,YAAT,CAAsBgB,SAAtB,EAAiC;AACpC,QAAIC,MAAM,EAAV;AACA,SAAK,IAAItK,IAAIqK,UAAU/K,MAAV,GAAmB,CAAhC,EAAmCU,KAAK,CAAxC,EAA2CA,GAA3C,EAAgD;AAC5C,YAAIqK,UAAUrK,CAAV,EAAauK,IAAb,KAAsB,UAA1B,EAAsC;AAClC;AACH;AACDD,cAAMD,UAAUrK,CAAV,EAAawK,KAAb,GAAqB,GAArB,GAA2BF,GAAjC;AACH;AACD,WAAOA,IAAIG,IAAJ,EAAP;AACH;AACM,SAASnB,gBAAT,CAA0BoB,CAA1B,EAA6BC,CAA7B,EAAgC;AACnC,QAAI,CAAC7K,MAAM8K,OAAN,CAAcF,CAAd,CAAD,IAAqB,CAAC5K,MAAM8K,OAAN,CAAcD,CAAd,CAAtB,IAA0CD,EAAEpL,MAAF,KAAaqL,EAAErL,MAA7D,EAAqE;AACjE,eAAO,KAAP;AACH;AACD,SAAK,IAAIU,IAAI,CAAb,EAAgBA,IAAI0K,EAAEpL,MAAtB,EAA8BU,GAA9B,EAAmC;AAC/B,YAAI0K,EAAE1K,CAAF,EAAKuK,IAAL,KAAcI,EAAE3K,CAAF,EAAKuK,IAAnB,IAA2BG,EAAE1K,CAAF,EAAKwK,KAAL,KAAeG,EAAE3K,CAAF,EAAKwK,KAAnD,EAA0D;AACtD,mBAAO,KAAP;AACH;AACJ;AACD,WAAO,IAAP;AACH;AACM,SAASjB,UAAT,CAAoBhF,GAApB,EAAyB;AAC5B,WAAO,UAAUgG,IAAV,EAAgBtE,GAAhB,EAAqBiB,KAArB,EAA4B;AAC/B,YAAI3C,IAAIsG,GAAJ,CAAQN,IAAR,CAAJ,EAAmB;AACf,gBAAIO,WAAWvG,IAAIwG,GAAJ,CAAQR,IAAR,CAAf;AACAO,qBAASE,GAAT,CAAa/E,GAAb,EAAkBiB,KAAlB;AACH,SAHD,MAIK;AACD,gBAAI4D,WAAW,IAAIG,GAAJ,EAAf;AACAH,qBAASE,GAAT,CAAa/E,GAAb,EAAkBiB,KAAlB;AACA3C,gBAAIyG,GAAJ,CAAQT,IAAR,EAAcO,QAAd;AACH;AACJ,KAVD;AAWH;AACD;;;;;;;;;ACjEA;;AACA,IAAII,eAAe,aAAe,YAAY;AAC1C,aAASA,YAAT,CAAsBb,SAAtB,EAAiCc,aAAjC,EAAgD;AAC5C,aAAKd,SAAL,GAAiBA,SAAjB;AACA,aAAKc,aAAL,GAAqBA,aAArB;AACA,aAAKC,UAAL,GAAkBf,UAAUzG,MAAV,CAAiB,UAAUuE,CAAV,EAAa;AAAE,mBAAOA,EAAEoC,IAAF,KAAW,UAAlB;AAA+B,SAA/D,CAAlB;AACH;AACD;;;;;;AAMAW,iBAAa9K,SAAb,CAAuBiL,iBAAvB,GAA2C,UAAUC,IAAV,EAAgB;AACvD,YAAIjB,YAAY,KAAKc,aAAL,CAAmBI,YAAnB,CAAgCD,IAAhC,CAAhB;AACA,YAAI,CAACjB,SAAL,EAAgB;AACZ,mBAAO,KAAP;AACH;AACD,YAAI,KAAKe,UAAL,CAAgB9L,MAAhB,GAAyB+K,UAAU/K,MAAnC,IACA,CAAC,6BAAiB,KAAK8L,UAAtB,EAAkCf,UAAUmB,KAAV,CAAgB,CAAhB,EAAmB,KAAKJ,UAAL,CAAgB9L,MAAnC,CAAlC,CADL,EACoF;AAChF,mBAAO,KAAP;AACH;AACD,aAAK,IAAIU,IAAI,KAAKoL,UAAL,CAAgB9L,MAA7B,EAAqCU,IAAIqK,UAAU/K,MAAnD,EAA2DU,GAA3D,EAAgE;AAC5D,gBAAIqK,UAAUrK,CAAV,EAAauK,IAAb,KAAsB,OAA1B,EAAmC;AAC/B,uBAAO,KAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KAfD;AAgBA,WAAOW,YAAP;AACH,CA7BiC,EAAlC;QA8BSA,eAAAA;AACT;;;;;;;;;AChCA;;AACA;;AACA,SAASO,SAAT,CAAmBC,KAAnB,EAA0B;AACtB,WAAO5L,MAAMM,SAAN,CAAgBoL,KAAhB,CAAsB1M,IAAtB,CAA2B4M,KAA3B,CAAP;AACH;AACD,IAAIC,gBAAgB,aAAe,YAAY;AAC3C,aAASA,aAAT,CAAuBtB,SAAvB,EAAkCc,aAAlC,EAAiD;AAC7C,aAAKd,SAAL,GAAiBA,SAAjB;AACA,aAAKc,aAAL,GAAqBA,aAArB;AACH;AACDQ,kBAAcvL,SAAd,CAAwBtB,IAAxB,GAA+B,YAAY;AACvC,YAAIuL,YAAY,KAAKA,SAArB;AACA,YAAI9B,WAAW,yBAAa8B,SAAb,CAAf;AACA,YAAIuB,eAAe,IAAIV,0BAAJ,CAAiBb,SAAjB,EAA4B,KAAKc,aAAjC,CAAnB;AACA,YAAIU,UAAU,KAAKV,aAAL,CAAmBW,UAAnB,CAA8BzB,UAAUzG,MAAV,CAAiB,UAAUuE,CAAV,EAAa;AAAE,mBAAOA,EAAEoC,IAAF,KAAW,UAAlB;AAA+B,SAA/D,CAA9B,CAAd;AACA,YAAIsB,YAAYpF,SAAhB,EAA2B;AACvB,mBAAO,EAAP;AACH;AACD,YAAI8B,aAAa,EAAjB,EAAqB;AACjB,mBAAO,CAACsD,OAAD,CAAP;AACH;AACD,eAAOJ,UAAUI,QAAQE,gBAAR,CAAyBxD,QAAzB,CAAV,EACF3E,MADE,CACKgI,aAAaP,iBADlB,EACqCO,YADrC,EAEFrM,MAFE,CAEKsM,QAAQG,OAAR,CAAgBzD,QAAhB,IAA4B,CAACsD,OAAD,CAA5B,GAAwC,EAF7C,CAAP;AAGH,KAdD;AAeA,WAAOF,aAAP;AACH,CArBkC,EAAnC;QAsBSA,gBAAAA;AACT;;;;;;;QCnBgBM,kBAAAA;QAmBAC,cAAAA;;AApBhB;;AARA,IAAIC,WAAY,aAAQ,UAAKA,QAAd,IAA2BzI,OAAO0I,MAAlC,IAA4C,UAASC,CAAT,EAAY;AACnE,SAAK,IAAIvH,CAAJ,EAAO9E,IAAI,CAAX,EAAcmI,IAAIpI,UAAUT,MAAjC,EAAyCU,IAAImI,CAA7C,EAAgDnI,GAAhD,EAAqD;AACjD8E,YAAI/E,UAAUC,CAAV,CAAJ;AACA,aAAK,IAAIsM,CAAT,IAAcxH,CAAd,EAAiB,IAAIpB,OAAOtD,SAAP,CAAiB6C,cAAjB,CAAgCnE,IAAhC,CAAqCgG,CAArC,EAAwCwH,CAAxC,CAAJ,EACbD,EAAEC,CAAF,IAAOxH,EAAEwH,CAAF,CAAP;AACP;AACD,WAAOD,CAAP;AACH,CAPD;AASO,SAASJ,eAAT,CAAyB5B,SAAzB,EAAoC;AACvC,WAAO,UAAUkC,IAAV,EAAgB/B,KAAhB,EAAuB;AAC1B,YAAIA,UAAU,OAAd,EAAuB;AACnB,mBAAO+B,IAAP;AACH;AACD,eAAOA,KAAKhI,GAAL,CAAS,UAAUiI,IAAV,EAAgB;AAC5B,gBAAI,CAACA,IAAL,EAAW;AACP,uBAAOA,IAAP;AACH;AACD,gBAAIC,WAAWP,YAAY1B,KAAZ,CAAf;AACA,gBAAIkC,UAAUP,SAAS,EAAT,EAAaK,IAAb,EAAmB,EAAEtG,MAAMiG,SAAS,EAAT,EAAaK,KAAKtG,IAAlB,EAAwB,EAAEE,SAAS,CAACoG,KAAKtG,IAAN,IAAc,CAACpG,MAAM8K,OAAN,CAAc4B,KAAKtG,IAAL,CAAUE,OAAxB,CAAf,GAC9DiE,UAAU9K,MAAV,CAAiB,CAACkN,QAAD,CAAjB,CAD8D,GAE9DD,KAAKtG,IAAL,CAAUE,OAFyC,EAAxB,CAAR,EAAnB,CAAd;AAGA,mBAAO+F,SAAS,EAAT,EAAaO,OAAb,EAAsB,EAAE3F,KAAK2F,QAAQ3F,GAAR,KAAgBN,SAAhB,GAC1BiG,QAAQ3F,GADkB,GAE1B4F,KAAKC,SAAL,CAAeF,QAAQxG,IAAR,CAAaE,OAA5B,CAFmB,EAAtB,CAAP;AAGH,SAXM,CAAP;AAYH,KAhBD;AAiBH;AACM,SAAS8F,WAAT,CAAqB1B,KAArB,EAA4B;AAC/B,WAAO;AACHD,cAAM,wBAAYC,KAAZ,IAAqB,SAArB,GAAiC,OADpC;AAEHA,eAAOA;AAFJ,KAAP;AAIH;AACD;;;;;;;;;AClCA;;AACA;;AACA;;AACA;;AACA;;AACA,IAAIqC,gBAAgB,aAAe,YAAY;AAC3C,aAASA,aAAT,CAAuBC,aAAvB,EAAsCC,YAAtC,EAAoD3B,UAApD,EAAgE4B,cAAhE,EAAgFC,eAAhF,EAAiG5E,KAAjG,EAAwG;AACpG,YAAI+C,eAAe,KAAK,CAAxB,EAA2B;AAAEA,yBAAa,EAAb;AAAkB;AAC/C,aAAK0B,aAAL,GAAqBA,aAArB;AACA,aAAKC,YAAL,GAAoBA,YAApB;AACA,aAAK3B,UAAL,GAAkBA,UAAlB;AACA,aAAK4B,cAAL,GAAsBA,cAAtB;AACA,aAAKC,eAAL,GAAuBA,eAAvB;AACA,aAAK5E,KAAL,GAAaA,KAAb;AACA,aAAK6E,aAAL,GAAqB,UAAUC,MAAV,EAAkB3C,KAAlB,EAAyB;AAC1C,mBAAO,IAAIqC,aAAJ,CAAkBM,OAAOL,aAAzB,EAAwCK,OAAOJ,YAA/C,EAA6DI,OAAO/B,UAAP,CAAkB7L,MAAlB,CAAyB,0BAAYiL,KAAZ,CAAzB,CAA7D,EAA2G2C,OAAOH,cAAlH,EAAkIG,OAAOF,eAAzI,EAA0JE,OAAO9E,KAAjK,CAAP;AACH,SAFD;AAGA,aAAK+E,WAAL,GAAmB,8BAAgB,KAAKhC,UAArB,CAAnB;AACH;AACDyB,kBAAczM,SAAd,CAAwBiN,SAAxB,GAAoC,YAAY;AAC5C,YAAI,KAAKjC,UAAL,CAAgB9L,MAAhB,KAA2B,CAA/B,EAAkC;AAC9B,mBAAO,KAAKwN,aAAL,CAAmBvI,GAAnB,CAAuB,UAAUpC,CAAV,EAAa;AAAE,uBAAO,CAACA,CAAD,CAAP;AAAa,aAAnD,CAAP;AACH,SAFD,MAGK;AACD,gBAAImL,kBAAkB,IAAI3B,4BAAJ,CAAkB,KAAKP,UAAvB,EAAmC,KAAK4B,cAAxC,CAAtB;AACA,mBAAO,KAAKF,aAAL,CAAmBvI,GAAnB,CAAuB,YAAY;AAAE,uBAAO+I,gBAAgBxO,IAAhB,EAAP;AAAgC,aAArE,CAAP;AACH;AACJ,KARD;AASA+N,kBAAczM,SAAd,CAAwBoI,QAAxB,GAAmC,YAAY;AAC3C,YAAIC,MAAM,kBAAM,KAAK4E,SAAL,GAAiBE,QAAjB,EAAN,CAAV;AACA9E,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAJD;AAKAoE,kBAAczM,SAAd,CAAwBiH,OAAxB,GAAkC,YAAY;AAC1C,YAAIoB,MAAM,kBAAM,KAAK4E,SAAL,GACXzJ,MADW,CACJ,UAAU4J,GAAV,EAAe;AAAE,mBAAOA,IAAIlO,MAAJ,GAAa,CAApB;AAAwB,SADrC,EAEXiF,GAFW,CAEP,UAAUiJ,GAAV,EAAe;AAAE,mBAAOA,IAAI,CAAJ,CAAP;AAAgB,SAF1B,EAGXD,QAHW,EAAN,CAAV;AAIA9E,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAPD;AAQA/E,WAAOuD,cAAP,CAAsB4F,cAAczM,SAApC,EAA+C,WAA/C,EAA4D;AACxD2K,aAAK,YAAY;AACb,mBAAO,KAAKK,UAAZ;AACH,SAHuD;AAIxDqC,oBAAY,IAJ4C;AAKxDC,sBAAc;AAL0C,KAA5D;AAOAb,kBAAczM,SAAd,CAAwBkI,MAAxB,GAAiC,UAAUC,QAAV,EAAoB;AACjD,YAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;AAC9B,kBAAM,IAAIhK,KAAJ,CAAU,wDACZ,0BADE,CAAN;AAEH;AACD,YAAIgK,aAAa,UAAjB,EAA6B;AACzB,mBAAO,IAAIH,oCAAJ,CAAsB,KAAKC,KAA3B,CAAP;AACH;AACD,YAAIE,aAAa,MAAjB,EAAyB;AACrB,mBAAO,IAAIQ,4BAAJ,CAAkB,KAAKV,KAAvB,CAAP;AACH;AACD,YAAIgC,YAAY9B,aAAa,OAAb,GACV,EADU,GAEV,KAAK6C,UAAL,CAAgB7L,MAAhB,CAAuB,EAAEgL,MAAM,UAAR,EAAoBC,OAAOjC,SAASkC,IAAT,EAA3B,EAAvB,CAFN;AAGA,eAAO,IAAIoC,aAAJ,CAAkB,KAAKC,aAAvB,EAAsC,KAAKC,YAA3C,EAAyD1C,SAAzD,EAAoE,KAAK2C,cAAzE,EAAyF,KAAKC,eAA9F,EAA+G,KAAK5E,KAApH,CAAP;AACH,KAfD;AAgBAwE,kBAAczM,SAAd,CAAwBwI,MAAxB,GAAiC,UAAUC,SAAV,EAAqBC,OAArB,EAA8B6E,OAA9B,EAAuC;AACpE,YAAI7E,YAAY,KAAK,CAArB,EAAwB;AAAEA,sBAAU,EAAV;AAAe;AACzC,YAAI,OAAOD,SAAP,KAAqB,QAAzB,EAAmC;AAC/B,kBAAM,IAAItK,KAAJ,CAAU,oDACZ,mDADE,CAAN;AAEH;AACD,YAAIqP,SAAS,KAAKX,eAAL,CAAqBpF,gBAArB,CAAsCgB,SAAtC,EAAiD,KAAKuC,UAAtD,EAAkEtC,OAAlE,EAA2E6E,OAA3E,CAAb;AACA,YAAIlF,MAAM,kBAAMmF,MAAN,CAAV;AACAnF,YAAInF,cAAJ,GAAqB,KAAK+E,KAA1B;AACA,eAAOI,GAAP;AACH,KAVD;AAWAoE,kBAAczM,SAAd,CAAwB8E,OAAxB,GAAkC,YAAY;AAC1C,aAAK6H,YAAL,CAAkBc,kBAAlB,CAAqC,IAArC;AACA;AACH,KAHD;AAIA,WAAOhB,aAAP;AACH,CA3EkC,EAAnC;QA4ESA,gBAAAA;AACT;;;;;;;QClFgB9G,QAAAA;AAAT,SAASA,KAAT,CAAee,GAAf,EAAoBZ,IAApB,EAA0BG,QAA1B,EAAoCC,IAApC,EAA0CL,GAA1C,EAA+C;AAClD,QAAIc,MAAMb,SAASO,SAAT,GAAqBA,SAArB,GAAiCP,KAAKa,GAAhD;AACA,WAAO,EAAED,KAAKA,GAAP,EAAYZ,MAAMA,IAAlB,EAAwBG,UAAUA,QAAlC;AACHC,cAAMA,IADH,EACSL,KAAKA,GADd,EACmBc,KAAKA,GADxB,EAAP;AAEH;kBACchB;AACf;;;;;;;QCLgB+H,YAAAA;AADT,IAAI3N,wBAAQL,MAAM8K,OAAlB;AACA,SAASkD,SAAT,CAAmBhJ,CAAnB,EAAsB;AACzB,WAAO,OAAOA,CAAP,KAAa,QAAb,IAAyB,OAAOA,CAAP,KAAa,QAA7C;AACH;AACD;;;;;;;ACJA,SAASiJ,aAAT,CAAuBC,OAAvB,EAAgC;AAC5B,WAAOrF,SAASoF,aAAT,CAAuBC,OAAvB,CAAP;AACH;AACD,SAASC,eAAT,CAAyBC,YAAzB,EAAuCC,aAAvC,EAAsD;AAClD,WAAOxF,SAASsF,eAAT,CAAyBC,YAAzB,EAAuCC,aAAvC,CAAP;AACH;AACD,SAASC,cAAT,CAAwB9H,IAAxB,EAA8B;AAC1B,WAAOqC,SAASyF,cAAT,CAAwB9H,IAAxB,CAAP;AACH;AACD,SAAS+H,aAAT,CAAuB/H,IAAvB,EAA6B;AACzB,WAAOqC,SAAS0F,aAAT,CAAuB/H,IAAvB,CAAP;AACH;AACD,SAASgI,YAAT,CAAsBC,UAAtB,EAAkC7B,OAAlC,EAA2C8B,aAA3C,EAA0D;AACtDD,eAAWD,YAAX,CAAwB5B,OAAxB,EAAiC8B,aAAjC;AACH;AACD,SAASC,WAAT,CAAqBjC,IAArB,EAA2BkC,KAA3B,EAAkC;AAC9BlC,SAAKiC,WAAL,CAAiBC,KAAjB;AACH;AACD,SAASC,WAAT,CAAqBnC,IAArB,EAA2BkC,KAA3B,EAAkC;AAC9BlC,SAAKmC,WAAL,CAAiBD,KAAjB;AACH;AACD,SAASH,UAAT,CAAoB/B,IAApB,EAA0B;AACtB,WAAOA,KAAK+B,UAAZ;AACH;AACD,SAASK,WAAT,CAAqBpC,IAArB,EAA2B;AACvB,WAAOA,KAAKoC,WAAZ;AACH;AACD,SAASZ,OAAT,CAAiB/H,GAAjB,EAAsB;AAClB,WAAOA,IAAI+H,OAAX;AACH;AACD,SAASa,cAAT,CAAwBrC,IAAxB,EAA8BlG,IAA9B,EAAoC;AAChCkG,SAAKsC,WAAL,GAAmBxI,IAAnB;AACH;AACD,SAASyI,cAAT,CAAwBvC,IAAxB,EAA8B;AAC1B,WAAOA,KAAKsC,WAAZ;AACH;AACD,SAASE,SAAT,CAAmBxC,IAAnB,EAAyB;AACrB,WAAOA,KAAK3C,QAAL,KAAkB,CAAzB;AACH;AACD,SAASoF,MAAT,CAAgBzC,IAAhB,EAAsB;AAClB,WAAOA,KAAK3C,QAAL,KAAkB,CAAzB;AACH;AACD,SAASqF,SAAT,CAAmB1C,IAAnB,EAAyB;AACrB,WAAOA,KAAK3C,QAAL,KAAkB,CAAzB;AACH;AACM,IAAIsF,kCAAa;AACpBpB,mBAAeA,aADK;AAEpBE,qBAAiBA,eAFG;AAGpBG,oBAAgBA,cAHI;AAIpBC,mBAAeA,aAJK;AAKpBC,kBAAcA,YALM;AAMpBG,iBAAaA,WANO;AAOpBE,iBAAaA,WAPO;AAQpBJ,gBAAYA,UARQ;AASpBK,iBAAaA,WATO;AAUpBZ,aAASA,OAVW;AAWpBa,oBAAgBA,cAXI;AAYpBE,oBAAgBA,cAZI;AAapBC,eAAWA,SAbS;AAcpBC,YAAQA,MAdY;AAepBC,eAAWA;AAfS,CAAjB;kBAiBQC;AACf;;;;;;;QClDgBC,IAAAA;;AAbhB;;AACA;;IAAYC;;;;AACZ,SAASC,KAAT,CAAepJ,IAAf,EAAqBG,QAArB,EAA+BS,GAA/B,EAAoC;AAChCZ,SAAKqJ,EAAL,GAAU,4BAAV;AACA,QAAIzI,QAAQ,eAAR,IAA2BT,aAAaI,SAA5C,EAAuD;AACnD,aAAK,IAAIzG,IAAI,CAAb,EAAgBA,IAAIqG,SAAS/G,MAA7B,EAAqC,EAAEU,CAAvC,EAA0C;AACtC,gBAAIwP,YAAYnJ,SAASrG,CAAT,EAAYkG,IAA5B;AACA,gBAAIsJ,cAAc/I,SAAlB,EAA6B;AACzB6I,sBAAME,SAAN,EAAiBnJ,SAASrG,CAAT,EAAYqG,QAA7B,EAAuCA,SAASrG,CAAT,EAAY8G,GAAnD;AACH;AACJ;AACJ;AACJ;AACM,SAASsI,CAAT,CAAWtI,GAAX,EAAgB6D,CAAhB,EAAmB8E,CAAnB,EAAsB;AACzB,QAAIvJ,OAAO,EAAX;AAAA,QAAeG,QAAf;AAAA,QAAyBC,IAAzB;AAAA,QAA+BtG,CAA/B;AACA,QAAIyP,MAAMhJ,SAAV,EAAqB;AACjBP,eAAOyE,CAAP;AACA,YAAI0E,GAAGlP,KAAH,CAASsP,CAAT,CAAJ,EAAiB;AACbpJ,uBAAWoJ,CAAX;AACH,SAFD,MAGK,IAAIJ,GAAGvB,SAAH,CAAa2B,CAAb,CAAJ,EAAqB;AACtBnJ,mBAAOmJ,CAAP;AACH,SAFI,MAGA,IAAIA,KAAKA,EAAE3I,GAAX,EAAgB;AACjBT,uBAAW,CAACoJ,CAAD,CAAX;AACH;AACJ,KAXD,MAYK,IAAI9E,MAAMlE,SAAV,EAAqB;AACtB,YAAI4I,GAAGlP,KAAH,CAASwK,CAAT,CAAJ,EAAiB;AACbtE,uBAAWsE,CAAX;AACH,SAFD,MAGK,IAAI0E,GAAGvB,SAAH,CAAanD,CAAb,CAAJ,EAAqB;AACtBrE,mBAAOqE,CAAP;AACH,SAFI,MAGA,IAAIA,KAAKA,EAAE7D,GAAX,EAAgB;AACjBT,uBAAW,CAACsE,CAAD,CAAX;AACH,SAFI,MAGA;AACDzE,mBAAOyE,CAAP;AACH;AACJ;AACD,QAAItE,aAAaI,SAAjB,EAA4B;AACxB,aAAKzG,IAAI,CAAT,EAAYA,IAAIqG,SAAS/G,MAAzB,EAAiC,EAAEU,CAAnC,EAAsC;AAClC,gBAAIqP,GAAGvB,SAAH,CAAazH,SAASrG,CAAT,CAAb,CAAJ,EACIqG,SAASrG,CAAT,IAAc,kBAAMyG,SAAN,EAAiBA,SAAjB,EAA4BA,SAA5B,EAAuCJ,SAASrG,CAAT,CAAvC,EAAoDyG,SAApD,CAAd;AACP;AACJ;AACD,QAAIK,IAAI,CAAJ,MAAW,GAAX,IAAkBA,IAAI,CAAJ,MAAW,GAA7B,IAAoCA,IAAI,CAAJ,MAAW,GAA/C,KACCA,IAAIxH,MAAJ,KAAe,CAAf,IAAoBwH,IAAI,CAAJ,MAAW,GAA/B,IAAsCA,IAAI,CAAJ,MAAW,GADlD,CAAJ,EAC4D;AACxDwI,cAAMpJ,IAAN,EAAYG,QAAZ,EAAsBS,GAAtB;AACH;AACD,WAAO,kBAAMA,GAAN,EAAWZ,IAAX,EAAiBG,QAAjB,EAA2BC,IAA3B,EAAiCG,SAAjC,CAAP;AACH;AACD;kBACe2I;AACf;;;;;;;;;ACvDA;;AACA,SAAStJ,WAAT,CAAqBC,KAArB,EAA4BF,KAA5B,EAAmC;AAC/BA,UAAMI,GAAN,GAAYF,MAAME,GAAlB;AACAF,UAAMG,IAAN,CAAWC,EAAX,GAAgBN,MAAMK,IAAN,CAAWC,EAA3B;AACAJ,UAAMG,IAAN,CAAWrG,IAAX,GAAkBgG,MAAMK,IAAN,CAAWrG,IAA7B;AACAgG,UAAMK,IAAN,GAAaH,MAAMG,IAAnB;AACAL,UAAMQ,QAAN,GAAiBN,MAAMM,QAAvB;AACAR,UAAMS,IAAN,GAAaP,MAAMO,IAAnB;AACAT,UAAMI,GAAN,GAAYF,MAAME,GAAlB;AACH;AACD,SAASM,IAAT,CAAcV,KAAd,EAAqB;AACjB,QAAIW,MAAMX,MAAMK,IAAhB;AACA,QAAIH,QAAQS,IAAIL,EAAJ,CAAO9F,KAAP,CAAaoG,SAAb,EAAwBD,IAAI3G,IAA5B,CAAZ;AACAiG,gBAAYC,KAAZ,EAAmBF,KAAnB;AACH;AACD,SAASa,QAAT,CAAkBC,QAAlB,EAA4Bd,KAA5B,EAAmC;AAC/B,QAAI7F,CAAJ;AAAA,QAAO4G,MAAMD,SAAST,IAAtB;AAAA,QAA4BM,MAAMX,MAAMK,IAAxC;AACA,QAAIW,UAAUD,IAAI/G,IAAlB;AAAA,QAAwBA,OAAO2G,IAAI3G,IAAnC;AACA,QAAI+G,IAAIT,EAAJ,KAAWK,IAAIL,EAAf,IAAqBU,QAAQvH,MAAR,KAAmBO,KAAKP,MAAjD,EAAyD;AACrDwG,oBAAYU,IAAIL,EAAJ,CAAO9F,KAAP,CAAaoG,SAAb,EAAwB5G,IAAxB,CAAZ,EAA2CgG,KAA3C;AACA;AACH;AACD,SAAK7F,IAAI,CAAT,EAAYA,IAAIH,KAAKP,MAArB,EAA6B,EAAEU,CAA/B,EAAkC;AAC9B,YAAI6G,QAAQ7G,CAAR,MAAeH,KAAKG,CAAL,CAAnB,EAA4B;AACxB8F,wBAAYU,IAAIL,EAAJ,CAAO9F,KAAP,CAAaoG,SAAb,EAAwB5G,IAAxB,CAAZ,EAA2CgG,KAA3C;AACA;AACH;AACJ;AACDC,gBAAYa,QAAZ,EAAsBd,KAAtB;AACH;AACM,IAAIA,wBAAQ,SAASA,KAAT,CAAeiB,GAAf,EAAoBC,GAApB,EAAyBZ,EAAzB,EAA6BtG,IAA7B,EAAmC;AAClD,QAAIA,SAAS4G,SAAb,EAAwB;AACpB5G,eAAOsG,EAAP;AACAA,aAAKY,GAAL;AACAA,cAAMN,SAAN;AACH;AACD,WAAO,UAAEK,GAAF,EAAO;AACVC,aAAKA,GADK;AAEVC,cAAM,EAAET,MAAMA,IAAR,EAAcG,UAAUA,QAAxB,EAFI;AAGVP,YAAIA,EAHM;AAIVtG,cAAMA;AAJI,KAAP,CAAP;AAMH,CAZM;kBAaQgG;AACf;;;;;;;;;;;;;;kBCnBSuJ;;;;;;;;;sBACAvJ;;;QACOU,OAAAA;;AA3BhB;;;;AACA;;IAAY8I;;AACZ;;;;;;;;AACA,SAASK,OAAT,CAAiB5K,CAAjB,EAAoB;AAAE,WAAOA,MAAM2B,SAAb;AAAyB;AAC/C,SAASkJ,KAAT,CAAe7K,CAAf,EAAkB;AAAE,WAAOA,MAAM2B,SAAb;AAAyB;AAC7C,IAAImJ,YAAY,qBAAM,EAAN,EAAU,EAAV,EAAc,EAAd,EAAkBnJ,SAAlB,EAA6BA,SAA7B,CAAhB;AACA,SAASoJ,SAAT,CAAmBC,MAAnB,EAA2BC,MAA3B,EAAmC;AAC/B,WAAOD,OAAO/I,GAAP,KAAegJ,OAAOhJ,GAAtB,IAA6B+I,OAAOhJ,GAAP,KAAeiJ,OAAOjJ,GAA1D;AACH;AACD,SAASkJ,OAAT,CAAiBjK,KAAjB,EAAwB;AACpB,WAAOA,MAAMe,GAAN,KAAcL,SAArB;AACH;AACD,SAASwJ,iBAAT,CAA2B5J,QAA3B,EAAqC6J,QAArC,EAA+CC,MAA/C,EAAuD;AACnD,QAAInQ,CAAJ;AAAA,QAAOuE,MAAM,EAAb;AAAA,QAAiBwC,GAAjB;AAAA,QAAsBqJ,EAAtB;AACA,SAAKpQ,IAAIkQ,QAAT,EAAmBlQ,KAAKmQ,MAAxB,EAAgC,EAAEnQ,CAAlC,EAAqC;AACjCoQ,aAAK/J,SAASrG,CAAT,CAAL;AACA,YAAIoQ,MAAM,IAAV,EAAgB;AACZrJ,kBAAMqJ,GAAGrJ,GAAT;AACA,gBAAIA,QAAQN,SAAZ,EACIlC,IAAIwC,GAAJ,IAAW/G,CAAX;AACP;AACJ;AACD,WAAOuE,GAAP;AACH;AACD,IAAI8L,QAAQ,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,SAA/B,EAA0C,KAA1C,EAAiD,MAAjD,CAAZ;AAGO,SAAS9J,IAAT,CAAc+J,OAAd,EAAuBC,MAAvB,EAA+B;AAClC,QAAIvQ,CAAJ;AAAA,QAAOwQ,CAAP;AAAA,QAAUC,MAAM,EAAhB;AACA,QAAIC,MAAMH,WAAW9J,SAAX,GAAuB8J,MAAvB,GAAgCpB,oBAA1C;AACA,SAAKnP,IAAI,CAAT,EAAYA,IAAIqQ,MAAM/Q,MAAtB,EAA8B,EAAEU,CAAhC,EAAmC;AAC/ByQ,YAAIJ,MAAMrQ,CAAN,CAAJ,IAAgB,EAAhB;AACA,aAAKwQ,IAAI,CAAT,EAAYA,IAAIF,QAAQhR,MAAxB,EAAgC,EAAEkR,CAAlC,EAAqC;AACjC,gBAAIxJ,OAAOsJ,QAAQE,CAAR,EAAWH,MAAMrQ,CAAN,CAAX,CAAX;AACA,gBAAIgH,SAASP,SAAb,EAAwB;AACpBgK,oBAAIJ,MAAMrQ,CAAN,CAAJ,EAAcC,IAAd,CAAmB+G,IAAnB;AACH;AACJ;AACJ;AACD,aAAS2J,WAAT,CAAqB1K,GAArB,EAA0B;AACtB,YAAI2K,KAAK3K,IAAI2K,EAAJ,GAAS,MAAM3K,IAAI2K,EAAnB,GAAwB,EAAjC;AACA,YAAInB,IAAIxJ,IAAI4K,SAAJ,GAAgB,MAAM5K,IAAI4K,SAAJ,CAAcC,KAAd,CAAoB,GAApB,EAAyBC,IAAzB,CAA8B,GAA9B,CAAtB,GAA2D,EAAnE;AACA,eAAO,qBAAML,IAAI1C,OAAJ,CAAY/H,GAAZ,EAAiB+K,WAAjB,KAAiCJ,EAAjC,GAAsCnB,CAA5C,EAA+C,EAA/C,EAAmD,EAAnD,EAAuDhJ,SAAvD,EAAkER,GAAlE,CAAP;AACH;AACD,aAASgL,UAAT,CAAoBC,QAApB,EAA8B5P,SAA9B,EAAyC;AACrC,eAAO,SAAS6P,IAAT,GAAgB;AACnB,gBAAI,EAAE7P,SAAF,KAAgB,CAApB,EAAuB;AACnB,oBAAI8P,WAAWV,IAAInC,UAAJ,CAAe2C,QAAf,CAAf;AACAR,oBAAIjC,WAAJ,CAAgB2C,QAAhB,EAA0BF,QAA1B;AACH;AACJ,SALD;AAMH;AACD,aAASG,SAAT,CAAmBtL,KAAnB,EAA0BuL,kBAA1B,EAA8C;AAC1C,YAAItR,CAAJ;AAAA,YAAOkG,OAAOH,MAAMG,IAApB;AACA,YAAIA,SAASO,SAAb,EAAwB;AACpB,gBAAIkJ,MAAM3P,IAAIkG,KAAKc,IAAf,KAAwB2I,MAAM3P,IAAIA,EAAEuG,IAAZ,CAA5B,EAA+C;AAC3CvG,kBAAE+F,KAAF;AACAG,uBAAOH,MAAMG,IAAb;AACH;AACJ;AACD,YAAIG,WAAWN,MAAMM,QAArB;AAAA,YAA+BS,MAAMf,MAAMe,GAA3C;AACA,YAAIA,QAAQ,GAAZ,EAAiB;AACb,gBAAI4I,QAAQ3J,MAAMO,IAAd,CAAJ,EAAyB;AACrBP,sBAAMO,IAAN,GAAa,EAAb;AACH;AACDP,kBAAME,GAAN,GAAYyK,IAAIrC,aAAJ,CAAkBtI,MAAMO,IAAxB,CAAZ;AACH,SALD,MAMK,IAAIQ,QAAQL,SAAZ,EAAuB;AACxB;AACA,gBAAI8K,UAAUzK,IAAI0K,OAAJ,CAAY,GAAZ,CAAd;AACA,gBAAIC,SAAS3K,IAAI0K,OAAJ,CAAY,GAAZ,EAAiBD,OAAjB,CAAb;AACA,gBAAIG,OAAOH,UAAU,CAAV,GAAcA,OAAd,GAAwBzK,IAAIxH,MAAvC;AACA,gBAAIqS,MAAMF,SAAS,CAAT,GAAaA,MAAb,GAAsB3K,IAAIxH,MAApC;AACA,gBAAIsS,MAAML,YAAY,CAAC,CAAb,IAAkBE,WAAW,CAAC,CAA9B,GAAkC3K,IAAI0E,KAAJ,CAAU,CAAV,EAAaqG,KAAKC,GAAL,CAASJ,IAAT,EAAeC,GAAf,CAAb,CAAlC,GAAsE7K,GAAhF;AACA,gBAAIb,MAAMF,MAAME,GAAN,GAAY0J,MAAMzJ,IAAN,KAAeyJ,MAAM3P,IAAIkG,KAAKqJ,EAAf,CAAf,GAAoCmB,IAAIzC,eAAJ,CAAoBjO,CAApB,EAAuB4R,GAAvB,CAApC,GAChBlB,IAAI3C,aAAJ,CAAkB6D,GAAlB,CADN;AAEA,gBAAIF,OAAOC,GAAX,EACI1L,IAAI8L,YAAJ,CAAiB,IAAjB,EAAuBjL,IAAI0E,KAAJ,CAAUkG,OAAO,CAAjB,EAAoBC,GAApB,CAAvB;AACJ,gBAAIF,SAAS,CAAb,EACIxL,IAAI8L,YAAJ,CAAiB,OAAjB,EAA0BjL,IAAI0E,KAAJ,CAAUmG,MAAM,CAAhB,EAAmBK,OAAnB,CAA2B,KAA3B,EAAkC,GAAlC,CAA1B;AACJ,iBAAKhS,IAAI,CAAT,EAAYA,IAAIyQ,IAAItN,MAAJ,CAAW7D,MAA3B,EAAmC,EAAEU,CAArC,EACIyQ,IAAItN,MAAJ,CAAWnD,CAAX,EAAc4P,SAAd,EAAyB7J,KAAzB;AACJ,gBAAIsJ,GAAGlP,KAAH,CAASkG,QAAT,CAAJ,EAAwB;AACpB,qBAAKrG,IAAI,CAAT,EAAYA,IAAIqG,SAAS/G,MAAzB,EAAiC,EAAEU,CAAnC,EAAsC;AAClC,wBAAIoQ,KAAK/J,SAASrG,CAAT,CAAT;AACA,wBAAIoQ,MAAM,IAAV,EAAgB;AACZM,4BAAI/B,WAAJ,CAAgB1I,GAAhB,EAAqBoL,UAAUjB,EAAV,EAAckB,kBAAd,CAArB;AACH;AACJ;AACJ,aAPD,MAQK,IAAIjC,GAAGvB,SAAH,CAAa/H,MAAMO,IAAnB,CAAJ,EAA8B;AAC/BoK,oBAAI/B,WAAJ,CAAgB1I,GAAhB,EAAqByK,IAAItC,cAAJ,CAAmBrI,MAAMO,IAAzB,CAArB;AACH;AACDtG,gBAAI+F,MAAMG,IAAN,CAAWc,IAAf,CA1BwB,CA0BH;AACrB,gBAAI2I,MAAM3P,CAAN,CAAJ,EAAc;AACV,oBAAIA,EAAEmD,MAAN,EACInD,EAAEmD,MAAF,CAASyM,SAAT,EAAoB7J,KAApB;AACJ,oBAAI/F,EAAEiS,MAAN,EACIX,mBAAmBrR,IAAnB,CAAwB8F,KAAxB;AACP;AACJ,SAjCI,MAkCA;AACDA,kBAAME,GAAN,GAAYyK,IAAItC,cAAJ,CAAmBrI,MAAMO,IAAzB,CAAZ;AACH;AACD,eAAOP,MAAME,GAAb;AACH;AACD,aAASiM,SAAT,CAAmBC,SAAnB,EAA8BC,MAA9B,EAAsCC,MAAtC,EAA8CC,QAA9C,EAAwDnC,MAAxD,EAAgEmB,kBAAhE,EAAoF;AAChF,eAAOgB,YAAYnC,MAAnB,EAA2B,EAAEmC,QAA7B,EAAuC;AACnC,gBAAIlC,KAAKiC,OAAOC,QAAP,CAAT;AACA,gBAAIlC,MAAM,IAAV,EAAgB;AACZM,oBAAIpC,YAAJ,CAAiB6D,SAAjB,EAA4Bd,UAAUjB,EAAV,EAAckB,kBAAd,CAA5B,EAA+Dc,MAA/D;AACH;AACJ;AACJ;AACD,aAASG,iBAAT,CAA2BxM,KAA3B,EAAkC;AAC9B,YAAI/F,CAAJ;AAAA,YAAOwQ,CAAP;AAAA,YAAUtK,OAAOH,MAAMG,IAAvB;AACA,YAAIA,SAASO,SAAb,EAAwB;AACpB,gBAAIkJ,MAAM3P,IAAIkG,KAAKc,IAAf,KAAwB2I,MAAM3P,IAAIA,EAAEwS,OAAZ,CAA5B,EACIxS,EAAE+F,KAAF;AACJ,iBAAK/F,IAAI,CAAT,EAAYA,IAAIyQ,IAAI+B,OAAJ,CAAYlT,MAA5B,EAAoC,EAAEU,CAAtC,EACIyQ,IAAI+B,OAAJ,CAAYxS,CAAZ,EAAe+F,KAAf;AACJ,gBAAIA,MAAMM,QAAN,KAAmBI,SAAvB,EAAkC;AAC9B,qBAAK+J,IAAI,CAAT,EAAYA,IAAIzK,MAAMM,QAAN,CAAe/G,MAA/B,EAAuC,EAAEkR,CAAzC,EAA4C;AACxCxQ,wBAAI+F,MAAMM,QAAN,CAAemK,CAAf,CAAJ;AACA,wBAAIxQ,KAAK,IAAL,IAAa,OAAOA,CAAP,KAAa,QAA9B,EAAwC;AACpCuS,0CAAkBvS,CAAlB;AACH;AACJ;AACJ;AACJ;AACJ;AACD,aAASyS,YAAT,CAAsBN,SAAtB,EAAiCE,MAAjC,EAAyCC,QAAzC,EAAmDnC,MAAnD,EAA2D;AACvD,eAAOmC,YAAYnC,MAAnB,EAA2B,EAAEmC,QAA7B,EAAuC;AACnC,gBAAII,MAAM,KAAK,CAAf;AAAA,gBAAkBpR,YAAY,KAAK,CAAnC;AAAA,gBAAsCqR,KAAK,KAAK,CAAhD;AAAA,gBAAmDvC,KAAKiC,OAAOC,QAAP,CAAxD;AACA,gBAAIlC,MAAM,IAAV,EAAgB;AACZ,oBAAIT,MAAMS,GAAGtJ,GAAT,CAAJ,EAAmB;AACfyL,sCAAkBnC,EAAlB;AACA9O,gCAAYmP,IAAImC,MAAJ,CAAWtT,MAAX,GAAoB,CAAhC;AACAqT,yBAAK1B,WAAWb,GAAGnK,GAAd,EAAmB3E,SAAnB,CAAL;AACA,yBAAKoR,MAAM,CAAX,EAAcA,MAAMjC,IAAImC,MAAJ,CAAWtT,MAA/B,EAAuC,EAAEoT,GAAzC,EACIjC,IAAImC,MAAJ,CAAWF,GAAX,EAAgBtC,EAAhB,EAAoBuC,EAApB;AACJ,wBAAIhD,MAAM+C,MAAMtC,GAAGlK,IAAf,KAAwByJ,MAAM+C,MAAMA,IAAI1L,IAAhB,CAAxB,IAAiD2I,MAAM+C,MAAMA,IAAIE,MAAhB,CAArD,EAA8E;AAC1EF,4BAAItC,EAAJ,EAAQuC,EAAR;AACH,qBAFD,MAGK;AACDA;AACH;AACJ,iBAZD,MAaK;AACDjC,wBAAIjC,WAAJ,CAAgB0D,SAAhB,EAA2B/B,GAAGnK,GAA9B;AACH;AACJ;AACJ;AACJ;AACD,aAAS4M,cAAT,CAAwBV,SAAxB,EAAmCW,KAAnC,EAA0CC,KAA1C,EAAiDzB,kBAAjD,EAAqE;AACjE,YAAI0B,cAAc,CAAlB;AAAA,YAAqBC,cAAc,CAAnC;AACA,YAAIC,YAAYJ,MAAMxT,MAAN,GAAe,CAA/B;AACA,YAAI6T,gBAAgBL,MAAM,CAAN,CAApB;AACA,YAAIM,cAAcN,MAAMI,SAAN,CAAlB;AACA,YAAIG,YAAYN,MAAMzT,MAAN,GAAe,CAA/B;AACA,YAAIgU,gBAAgBP,MAAM,CAAN,CAApB;AACA,YAAIQ,cAAcR,MAAMM,SAAN,CAAlB;AACA,YAAIG,WAAJ;AACA,YAAIC,QAAJ;AACA,YAAIC,SAAJ;AACA,YAAItB,MAAJ;AACA,eAAOY,eAAeE,SAAf,IAA4BD,eAAeI,SAAlD,EAA6D;AACzD,gBAAIF,iBAAiB,IAArB,EAA2B;AACvBA,gCAAgBL,MAAM,EAAEE,WAAR,CAAhB,CADuB,CACe;AACzC,aAFD,MAGK,IAAII,eAAe,IAAnB,EAAyB;AAC1BA,8BAAcN,MAAM,EAAEI,SAAR,CAAd;AACH,aAFI,MAGA,IAAII,iBAAiB,IAArB,EAA2B;AAC5BA,gCAAgBP,MAAM,EAAEE,WAAR,CAAhB;AACH,aAFI,MAGA,IAAIM,eAAe,IAAnB,EAAyB;AAC1BA,8BAAcR,MAAM,EAAEM,SAAR,CAAd;AACH,aAFI,MAGA,IAAIxD,UAAUsD,aAAV,EAAyBG,aAAzB,CAAJ,EAA6C;AAC9CK,2BAAWR,aAAX,EAA0BG,aAA1B,EAAyChC,kBAAzC;AACA6B,gCAAgBL,MAAM,EAAEE,WAAR,CAAhB;AACAM,gCAAgBP,MAAM,EAAEE,WAAR,CAAhB;AACH,aAJI,MAKA,IAAIpD,UAAUuD,WAAV,EAAuBG,WAAvB,CAAJ,EAAyC;AAC1CI,2BAAWP,WAAX,EAAwBG,WAAxB,EAAqCjC,kBAArC;AACA8B,8BAAcN,MAAM,EAAEI,SAAR,CAAd;AACAK,8BAAcR,MAAM,EAAEM,SAAR,CAAd;AACH,aAJI,MAKA,IAAIxD,UAAUsD,aAAV,EAAyBI,WAAzB,CAAJ,EAA2C;AAC5CI,2BAAWR,aAAX,EAA0BI,WAA1B,EAAuCjC,kBAAvC;AACAZ,oBAAIpC,YAAJ,CAAiB6D,SAAjB,EAA4BgB,cAAclN,GAA1C,EAA+CyK,IAAI9B,WAAJ,CAAgBwE,YAAYnN,GAA5B,CAA/C;AACAkN,gCAAgBL,MAAM,EAAEE,WAAR,CAAhB;AACAO,8BAAcR,MAAM,EAAEM,SAAR,CAAd;AACH,aALI,MAMA,IAAIxD,UAAUuD,WAAV,EAAuBE,aAAvB,CAAJ,EAA2C;AAC5CK,2BAAWP,WAAX,EAAwBE,aAAxB,EAAuChC,kBAAvC;AACAZ,oBAAIpC,YAAJ,CAAiB6D,SAAjB,EAA4BiB,YAAYnN,GAAxC,EAA6CkN,cAAclN,GAA3D;AACAmN,8BAAcN,MAAM,EAAEI,SAAR,CAAd;AACAI,gCAAgBP,MAAM,EAAEE,WAAR,CAAhB;AACH,aALI,MAMA;AACD,oBAAIO,gBAAgB/M,SAApB,EAA+B;AAC3B+M,kCAAcvD,kBAAkB6C,KAAlB,EAAyBE,WAAzB,EAAsCE,SAAtC,CAAd;AACH;AACDO,2BAAWD,YAAYF,cAAcvM,GAA1B,CAAX;AACA,oBAAI2I,QAAQ+D,QAAR,CAAJ,EAAuB;AACnB/C,wBAAIpC,YAAJ,CAAiB6D,SAAjB,EAA4Bd,UAAUiC,aAAV,EAAyBhC,kBAAzB,CAA5B,EAA0E6B,cAAclN,GAAxF;AACAqN,oCAAgBP,MAAM,EAAEE,WAAR,CAAhB;AACH,iBAHD,MAIK;AACDS,gCAAYZ,MAAMW,QAAN,CAAZ;AACA,wBAAIC,UAAU5M,GAAV,KAAkBwM,cAAcxM,GAApC,EAAyC;AACrC4J,4BAAIpC,YAAJ,CAAiB6D,SAAjB,EAA4Bd,UAAUiC,aAAV,EAAyBhC,kBAAzB,CAA5B,EAA0E6B,cAAclN,GAAxF;AACH,qBAFD,MAGK;AACD0N,mCAAWD,SAAX,EAAsBJ,aAAtB,EAAqChC,kBAArC;AACAwB,8BAAMW,QAAN,IAAkBhN,SAAlB;AACAiK,4BAAIpC,YAAJ,CAAiB6D,SAAjB,EAA4BuB,UAAUzN,GAAtC,EAA2CkN,cAAclN,GAAzD;AACH;AACDqN,oCAAgBP,MAAM,EAAEE,WAAR,CAAhB;AACH;AACJ;AACJ;AACD,YAAID,eAAeE,SAAf,IAA4BD,eAAeI,SAA/C,EAA0D;AACtD,gBAAIL,cAAcE,SAAlB,EAA6B;AACzBd,yBAASW,MAAMM,YAAY,CAAlB,KAAwB,IAAxB,GAA+B,IAA/B,GAAsCN,MAAMM,YAAY,CAAlB,EAAqBpN,GAApE;AACAiM,0BAAUC,SAAV,EAAqBC,MAArB,EAA6BW,KAA7B,EAAoCE,WAApC,EAAiDI,SAAjD,EAA4D/B,kBAA5D;AACH,aAHD,MAIK;AACDmB,6BAAaN,SAAb,EAAwBW,KAAxB,EAA+BE,WAA/B,EAA4CE,SAA5C;AACH;AACJ;AACJ;AACD,aAASS,UAAT,CAAoBhN,QAApB,EAA8BZ,KAA9B,EAAqCuL,kBAArC,EAAyD;AACrD,YAAItR,CAAJ,EAAOgH,IAAP;AACA,YAAI2I,MAAM3P,IAAI+F,MAAMG,IAAhB,KAAyByJ,MAAM3I,OAAOhH,EAAEgH,IAAf,CAAzB,IAAiD2I,MAAM3P,IAAIgH,KAAKN,QAAf,CAArD,EAA+E;AAC3E1G,cAAE2G,QAAF,EAAYZ,KAAZ;AACH;AACD,YAAIE,MAAMF,MAAME,GAAN,GAAYU,SAASV,GAA/B;AACA,YAAI6M,QAAQnM,SAASN,QAArB;AACA,YAAI+J,KAAKrK,MAAMM,QAAf;AACA,YAAIM,aAAaZ,KAAjB,EACI;AACJ,YAAIA,MAAMG,IAAN,KAAeO,SAAnB,EAA8B;AAC1B,iBAAKzG,IAAI,CAAT,EAAYA,IAAIyQ,IAAImD,MAAJ,CAAWtU,MAA3B,EAAmC,EAAEU,CAArC,EACIyQ,IAAImD,MAAJ,CAAW5T,CAAX,EAAc2G,QAAd,EAAwBZ,KAAxB;AACJ/F,gBAAI+F,MAAMG,IAAN,CAAWc,IAAf;AACA,gBAAI2I,MAAM3P,CAAN,KAAY2P,MAAM3P,IAAIA,EAAE4T,MAAZ,CAAhB,EACI5T,EAAE2G,QAAF,EAAYZ,KAAZ;AACP;AACD,YAAI2J,QAAQ3J,MAAMO,IAAd,CAAJ,EAAyB;AACrB,gBAAIqJ,MAAMmD,KAAN,KAAgBnD,MAAMS,EAAN,CAApB,EAA+B;AAC3B,oBAAI0C,UAAU1C,EAAd,EACIyC,eAAe5M,GAAf,EAAoB6M,KAApB,EAA2B1C,EAA3B,EAA+BkB,kBAA/B;AACP,aAHD,MAIK,IAAI3B,MAAMS,EAAN,CAAJ,EAAe;AAChB,oBAAIT,MAAMhJ,SAASL,IAAf,CAAJ,EACIoK,IAAI7B,cAAJ,CAAmB5I,GAAnB,EAAwB,EAAxB;AACJiM,0BAAUjM,GAAV,EAAe,IAAf,EAAqBmK,EAArB,EAAyB,CAAzB,EAA4BA,GAAG9Q,MAAH,GAAY,CAAxC,EAA2CgS,kBAA3C;AACH,aAJI,MAKA,IAAI3B,MAAMmD,KAAN,CAAJ,EAAkB;AACnBL,6BAAaxM,GAAb,EAAkB6M,KAAlB,EAAyB,CAAzB,EAA4BA,MAAMxT,MAAN,GAAe,CAA3C;AACH,aAFI,MAGA,IAAIqQ,MAAMhJ,SAASL,IAAf,CAAJ,EAA0B;AAC3BoK,oBAAI7B,cAAJ,CAAmB5I,GAAnB,EAAwB,EAAxB;AACH;AACJ,SAhBD,MAiBK,IAAIU,SAASL,IAAT,KAAkBP,MAAMO,IAA5B,EAAkC;AACnCoK,gBAAI7B,cAAJ,CAAmB5I,GAAnB,EAAwBF,MAAMO,IAA9B;AACH;AACD,YAAIqJ,MAAM3I,IAAN,KAAe2I,MAAM3P,IAAIgH,KAAK6M,SAAf,CAAnB,EAA8C;AAC1C7T,cAAE2G,QAAF,EAAYZ,KAAZ;AACH;AACJ;AACD,WAAO,SAAS+N,KAAT,CAAenN,QAAf,EAAyBZ,KAAzB,EAAgC;AACnC,YAAI/F,CAAJ,EAAOiG,GAAP,EAAY8N,MAAZ;AACA,YAAIzC,qBAAqB,EAAzB;AACA,aAAKtR,IAAI,CAAT,EAAYA,IAAIyQ,IAAIuD,GAAJ,CAAQ1U,MAAxB,EAAgC,EAAEU,CAAlC,EACIyQ,IAAIuD,GAAJ,CAAQhU,CAAR;AACJ,YAAI,CAACgQ,QAAQrJ,QAAR,CAAL,EAAwB;AACpBA,uBAAWgK,YAAYhK,QAAZ,CAAX;AACH;AACD,YAAIkJ,UAAUlJ,QAAV,EAAoBZ,KAApB,CAAJ,EAAgC;AAC5B4N,uBAAWhN,QAAX,EAAqBZ,KAArB,EAA4BuL,kBAA5B;AACH,SAFD,MAGK;AACDrL,kBAAMU,SAASV,GAAf;AACA8N,qBAASrD,IAAInC,UAAJ,CAAetI,GAAf,CAAT;AACAoL,sBAAUtL,KAAV,EAAiBuL,kBAAjB;AACA,gBAAIyC,WAAW,IAAf,EAAqB;AACjBrD,oBAAIpC,YAAJ,CAAiByF,MAAjB,EAAyBhO,MAAME,GAA/B,EAAoCyK,IAAI9B,WAAJ,CAAgB3I,GAAhB,CAApC;AACAwM,6BAAasB,MAAb,EAAqB,CAACpN,QAAD,CAArB,EAAiC,CAAjC,EAAoC,CAApC;AACH;AACJ;AACD,aAAK3G,IAAI,CAAT,EAAYA,IAAIsR,mBAAmBhS,MAAnC,EAA2C,EAAEU,CAA7C,EAAgD;AAC5CsR,+BAAmBtR,CAAnB,EAAsBkG,IAAtB,CAA2Bc,IAA3B,CAAgCiL,MAAhC,CAAuCX,mBAAmBtR,CAAnB,CAAvC;AACH;AACD,aAAKA,IAAI,CAAT,EAAYA,IAAIyQ,IAAIwD,IAAJ,CAAS3U,MAAzB,EAAiC,EAAEU,CAAnC,EACIyQ,IAAIwD,IAAJ,CAASjU,CAAT;AACJ,eAAO+F,KAAP;AACH,KA1BD;AA2BH;AACD;;AC/SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9KA;AACA;AACA;AACA;AACA;AAC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AE,KAAKiI,QAAQgD,WAAR,EAAL,GAA6B8J,KAA7B,GAAqCO,QAAvC,EAAiD,EAAjD,EAAqDhV,QAArD,CAAZ;AACAN,cAAMG,IAAN,GAAaH,MAAMG,IAAN,IAAc,EAA3B;AACAH,cAAMG,IAAN,CAAWE,OAAX,GAAqBL,MAAMG,IAAN,CAAWE,OAAX,IAAsB,EAA3C;AACA,eAAOL,KAAP;AACH,KARD;AASA,WAAO0U,YAAP;AACH,CAvCiC,EAAlC;QAwCSA,eAAAA;AACT;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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GAAb;AACA,IAAIgK,oBAAMxE,6BAAGwE,GAAb;AACA,IAAIC,wBAAQzE,6BAAGyE,KAAf;AACA,IAAIC,wBAAQ1E,6BAAG0E,KAAf;AACA,IAAIC,kBAAK3E,6BAAG2E,EAAZ;AACA,IAAIC,8BAAW5E,6BAAG4E,QAAlB;AACA,IAAIC,wBAAQ7E,6BAAG6E,KAAf;AACA,IAAIC,kBAAK9E,6BAAG8E,EAAZ;AACA,IAAIC,wBAAQ/E,6BAAG+E,KAAf;AACA,IAAI7pB,wBAAQ8kB,6BAAG9kB,KAAf;AACA,IAAI8pB,kBAAKhF,6BAAGgF,EAAZ;AACA,IAAIC,gBAAIjF,6BAAGiF,CAAX;AACA,IAAIC,kBAAKlF,6BAAGkF,EAAZ;AACA,IAAIC,wBAAQnF,6BAAGmF,KAAf;AACP;;AC/QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACrHA;;;;;;AAEA,IAAIC,aAAa,UAAUhT,CAAV,EAAa;AAAE,SAAOA,MAAM/Q,SAAb;AAAyB,CAAzD;;AAEA,IAAIgkB,SAAS,UAAUjT,CAAV,EAAa;AAAE,SAAO,OAAOA,CAAP,KAAa,QAApB;AAA+B,CAA3D;;AAEA,I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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AVlQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AOtHA;;;AAGO,IAAM,0BAAS,SAAT,MAAS,CAA8C,GAA9C,EAAoD;AAAK,SAAA,UAC7E,MAD6E,EACpE;AAET,WAAO,OAAO,GAAP,IAAc,GAArB;AACD,GAJ8E;AAI9E,CAJM;AAMP;;;AAGO,IAAM,kBAAK,SAAL,EAAK,CAAI,CAAJ,EAAQ;AAAK,SAAA,UAAC,CAAD,EAAK;AAAK,WAAA,MAAM,CAAN;AAAO,GAAjB;AAAiB,CAAzC","file":"src.0f0877a9.map","sourceRoot":"..","sourcesContent":["export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar symbol_observable_1 = require(\"symbol-observable\");\nvar NO = {};\nexports.NO = NO;\nfunction noop() { }\nfunction cp(a) {\n    var l = a.length;\n    var b = Array(l);\n    for (var i = 0; i < l; ++i)\n        b[i] = a[i];\n    return b;\n}\nfunction and(f1, f2) {\n    return function andFn(t) {\n        return f1(t) && f2(t);\n    };\n}\nfunction _try(c, t, u) {\n    try {\n        return c.f(t);\n    }\n    catch (e) {\n        u._e(e);\n        return NO;\n    }\n}\nvar NO_IL = {\n    _n: noop,\n    _e: noop,\n    _c: noop,\n};\nexports.NO_IL = NO_IL;\n// mutates the input\nfunction internalizeProducer(producer) {\n    producer._start = function _start(il) {\n        il.next = il._n;\n        il.error = il._e;\n        il.complete = il._c;\n        this.start(il);\n    };\n    producer._stop = producer.stop;\n}\nvar StreamSub = /** @class */ (function () {\n    function StreamSub(_stream, _listener) {\n        this._stream = _stream;\n        this._listener = _listener;\n    }\n    StreamSub.prototype.unsubscribe = function () {\n        this._stream._remove(this._listener);\n    };\n    return StreamSub;\n}());\nvar Observer = /** @class */ (function () {\n    function Observer(_listener) {\n        this._listener = _listener;\n    }\n    Observer.prototype.next = function (value) {\n        this._listener._n(value);\n    };\n    Observer.prototype.error = function (err) {\n        this._listener._e(err);\n    };\n    Observer.prototype.complete = function () {\n        this._listener._c();\n    };\n    return Observer;\n}());\nvar FromObservable = /** @class */ (function () {\n    function FromObservable(observable) {\n        this.type = 'fromObservable';\n        this.ins = observable;\n        this.active = false;\n    }\n    FromObservable.prototype._start = function (out) {\n        this.out = out;\n        this.active = true;\n        this._sub = this.ins.subscribe(new Observer(out));\n        if (!this.active)\n            this._sub.unsubscribe();\n    };\n    FromObservable.prototype._stop = function () {\n        if (this._sub)\n            this._sub.unsubscribe();\n        this.active = false;\n    };\n    return FromObservable;\n}());\nvar Merge = /** @class */ (function () {\n    function Merge(insArr) {\n        this.type = 'merge';\n        this.insArr = insArr;\n        this.out = NO;\n        this.ac = 0;\n    }\n    Merge.prototype._start = function (out) {\n        this.out = out;\n        var s = this.insArr;\n        var L = s.length;\n        this.ac = L;\n        for (var i = 0; i < L; i++)\n            s[i]._add(this);\n    };\n    Merge.prototype._stop = function () {\n        var s = this.insArr;\n        var L = s.length;\n        for (var i = 0; i < L; i++)\n            s[i]._remove(this);\n        this.out = NO;\n    };\n    Merge.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._n(t);\n    };\n    Merge.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Merge.prototype._c = function () {\n        if (--this.ac <= 0) {\n            var u = this.out;\n            if (u === NO)\n                return;\n            u._c();\n        }\n    };\n    return Merge;\n}());\nvar CombineListener = /** @class */ (function () {\n    function CombineListener(i, out, p) {\n        this.i = i;\n        this.out = out;\n        this.p = p;\n        p.ils.push(this);\n    }\n    CombineListener.prototype._n = function (t) {\n        var p = this.p, out = this.out;\n        if (out === NO)\n            return;\n        if (p.up(t, this.i)) {\n            var a = p.vals;\n            var l = a.length;\n            var b = Array(l);\n            for (var i = 0; i < l; ++i)\n                b[i] = a[i];\n            out._n(b);\n        }\n    };\n    CombineListener.prototype._e = function (err) {\n        var out = this.out;\n        if (out === NO)\n            return;\n        out._e(err);\n    };\n    CombineListener.prototype._c = function () {\n        var p = this.p;\n        if (p.out === NO)\n            return;\n        if (--p.Nc === 0)\n            p.out._c();\n    };\n    return CombineListener;\n}());\nvar Combine = /** @class */ (function () {\n    function Combine(insArr) {\n        this.type = 'combine';\n        this.insArr = insArr;\n        this.out = NO;\n        this.ils = [];\n        this.Nc = this.Nn = 0;\n        this.vals = [];\n    }\n    Combine.prototype.up = function (t, i) {\n        var v = this.vals[i];\n        var Nn = !this.Nn ? 0 : v === NO ? --this.Nn : this.Nn;\n        this.vals[i] = t;\n        return Nn === 0;\n    };\n    Combine.prototype._start = function (out) {\n        this.out = out;\n        var s = this.insArr;\n        var n = this.Nc = this.Nn = s.length;\n        var vals = this.vals = new Array(n);\n        if (n === 0) {\n            out._n([]);\n            out._c();\n        }\n        else {\n            for (var i = 0; i < n; i++) {\n                vals[i] = NO;\n                s[i]._add(new CombineListener(i, out, this));\n            }\n        }\n    };\n    Combine.prototype._stop = function () {\n        var s = this.insArr;\n        var n = s.length;\n        var ils = this.ils;\n        for (var i = 0; i < n; i++)\n            s[i]._remove(ils[i]);\n        this.out = NO;\n        this.ils = [];\n        this.vals = [];\n    };\n    return Combine;\n}());\nvar FromArray = /** @class */ (function () {\n    function FromArray(a) {\n        this.type = 'fromArray';\n        this.a = a;\n    }\n    FromArray.prototype._start = function (out) {\n        var a = this.a;\n        for (var i = 0, n = a.length; i < n; i++)\n            out._n(a[i]);\n        out._c();\n    };\n    FromArray.prototype._stop = function () {\n    };\n    return FromArray;\n}());\nvar FromPromise = /** @class */ (function () {\n    function FromPromise(p) {\n        this.type = 'fromPromise';\n        this.on = false;\n        this.p = p;\n    }\n    FromPromise.prototype._start = function (out) {\n        var prod = this;\n        this.on = true;\n        this.p.then(function (v) {\n            if (prod.on) {\n                out._n(v);\n                out._c();\n            }\n        }, function (e) {\n            out._e(e);\n        }).then(noop, function (err) {\n            setTimeout(function () { throw err; });\n        });\n    };\n    FromPromise.prototype._stop = function () {\n        this.on = false;\n    };\n    return FromPromise;\n}());\nvar Periodic = /** @class */ (function () {\n    function Periodic(period) {\n        this.type = 'periodic';\n        this.period = period;\n        this.intervalID = -1;\n        this.i = 0;\n    }\n    Periodic.prototype._start = function (out) {\n        var self = this;\n        function intervalHandler() { out._n(self.i++); }\n        this.intervalID = setInterval(intervalHandler, this.period);\n    };\n    Periodic.prototype._stop = function () {\n        if (this.intervalID !== -1)\n            clearInterval(this.intervalID);\n        this.intervalID = -1;\n        this.i = 0;\n    };\n    return Periodic;\n}());\nvar Debug = /** @class */ (function () {\n    function Debug(ins, arg) {\n        this.type = 'debug';\n        this.ins = ins;\n        this.out = NO;\n        this.s = noop;\n        this.l = '';\n        if (typeof arg === 'string')\n            this.l = arg;\n        else if (typeof arg === 'function')\n            this.s = arg;\n    }\n    Debug.prototype._start = function (out) {\n        this.out = out;\n        this.ins._add(this);\n    };\n    Debug.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n    };\n    Debug.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        var s = this.s, l = this.l;\n        if (s !== noop) {\n            try {\n                s(t);\n            }\n            catch (e) {\n                u._e(e);\n            }\n        }\n        else if (l)\n            console.log(l + ':', t);\n        else\n            console.log(t);\n        u._n(t);\n    };\n    Debug.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Debug.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return Debug;\n}());\nvar Drop = /** @class */ (function () {\n    function Drop(max, ins) {\n        this.type = 'drop';\n        this.ins = ins;\n        this.out = NO;\n        this.max = max;\n        this.dropped = 0;\n    }\n    Drop.prototype._start = function (out) {\n        this.out = out;\n        this.dropped = 0;\n        this.ins._add(this);\n    };\n    Drop.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n    };\n    Drop.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        if (this.dropped++ >= this.max)\n            u._n(t);\n    };\n    Drop.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Drop.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return Drop;\n}());\nvar EndWhenListener = /** @class */ (function () {\n    function EndWhenListener(out, op) {\n        this.out = out;\n        this.op = op;\n    }\n    EndWhenListener.prototype._n = function () {\n        this.op.end();\n    };\n    EndWhenListener.prototype._e = function (err) {\n        this.out._e(err);\n    };\n    EndWhenListener.prototype._c = function () {\n        this.op.end();\n    };\n    return EndWhenListener;\n}());\nvar EndWhen = /** @class */ (function () {\n    function EndWhen(o, ins) {\n        this.type = 'endWhen';\n        this.ins = ins;\n        this.out = NO;\n        this.o = o;\n        this.oil = NO_IL;\n    }\n    EndWhen.prototype._start = function (out) {\n        this.out = out;\n        this.o._add(this.oil = new EndWhenListener(out, this));\n        this.ins._add(this);\n    };\n    EndWhen.prototype._stop = function () {\n        this.ins._remove(this);\n        this.o._remove(this.oil);\n        this.out = NO;\n        this.oil = NO_IL;\n    };\n    EndWhen.prototype.end = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    EndWhen.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._n(t);\n    };\n    EndWhen.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    EndWhen.prototype._c = function () {\n        this.end();\n    };\n    return EndWhen;\n}());\nvar Filter = /** @class */ (function () {\n    function Filter(passes, ins) {\n        this.type = 'filter';\n        this.ins = ins;\n        this.out = NO;\n        this.f = passes;\n    }\n    Filter.prototype._start = function (out) {\n        this.out = out;\n        this.ins._add(this);\n    };\n    Filter.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n    };\n    Filter.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        var r = _try(this, t, u);\n        if (r === NO || !r)\n            return;\n        u._n(t);\n    };\n    Filter.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Filter.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return Filter;\n}());\nvar FlattenListener = /** @class */ (function () {\n    function FlattenListener(out, op) {\n        this.out = out;\n        this.op = op;\n    }\n    FlattenListener.prototype._n = function (t) {\n        this.out._n(t);\n    };\n    FlattenListener.prototype._e = function (err) {\n        this.out._e(err);\n    };\n    FlattenListener.prototype._c = function () {\n        this.op.inner = NO;\n        this.op.less();\n    };\n    return FlattenListener;\n}());\nvar Flatten = /** @class */ (function () {\n    function Flatten(ins) {\n        this.type = 'flatten';\n        this.ins = ins;\n        this.out = NO;\n        this.open = true;\n        this.inner = NO;\n        this.il = NO_IL;\n    }\n    Flatten.prototype._start = function (out) {\n        this.out = out;\n        this.open = true;\n        this.inner = NO;\n        this.il = NO_IL;\n        this.ins._add(this);\n    };\n    Flatten.prototype._stop = function () {\n        this.ins._remove(this);\n        if (this.inner !== NO)\n            this.inner._remove(this.il);\n        this.out = NO;\n        this.open = true;\n        this.inner = NO;\n        this.il = NO_IL;\n    };\n    Flatten.prototype.less = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        if (!this.open && this.inner === NO)\n            u._c();\n    };\n    Flatten.prototype._n = function (s) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        var _a = this, inner = _a.inner, il = _a.il;\n        if (inner !== NO && il !== NO_IL)\n            inner._remove(il);\n        (this.inner = s)._add(this.il = new FlattenListener(u, this));\n    };\n    Flatten.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Flatten.prototype._c = function () {\n        this.open = false;\n        this.less();\n    };\n    return Flatten;\n}());\nvar Fold = /** @class */ (function () {\n    function Fold(f, seed, ins) {\n        var _this = this;\n        this.type = 'fold';\n        this.ins = ins;\n        this.out = NO;\n        this.f = function (t) { return f(_this.acc, t); };\n        this.acc = this.seed = seed;\n    }\n    Fold.prototype._start = function (out) {\n        this.out = out;\n        this.acc = this.seed;\n        out._n(this.acc);\n        this.ins._add(this);\n    };\n    Fold.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n        this.acc = this.seed;\n    };\n    Fold.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        var r = _try(this, t, u);\n        if (r === NO)\n            return;\n        u._n(this.acc = r);\n    };\n    Fold.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Fold.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return Fold;\n}());\nvar Last = /** @class */ (function () {\n    function Last(ins) {\n        this.type = 'last';\n        this.ins = ins;\n        this.out = NO;\n        this.has = false;\n        this.val = NO;\n    }\n    Last.prototype._start = function (out) {\n        this.out = out;\n        this.has = false;\n        this.ins._add(this);\n    };\n    Last.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n        this.val = NO;\n    };\n    Last.prototype._n = function (t) {\n        this.has = true;\n        this.val = t;\n    };\n    Last.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Last.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        if (this.has) {\n            u._n(this.val);\n            u._c();\n        }\n        else\n            u._e(new Error('last() failed because input stream completed'));\n    };\n    return Last;\n}());\nvar MapOp = /** @class */ (function () {\n    function MapOp(project, ins) {\n        this.type = 'map';\n        this.ins = ins;\n        this.out = NO;\n        this.f = project;\n    }\n    MapOp.prototype._start = function (out) {\n        this.out = out;\n        this.ins._add(this);\n    };\n    MapOp.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n    };\n    MapOp.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        var r = _try(this, t, u);\n        if (r === NO)\n            return;\n        u._n(r);\n    };\n    MapOp.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    MapOp.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return MapOp;\n}());\nvar Remember = /** @class */ (function () {\n    function Remember(ins) {\n        this.type = 'remember';\n        this.ins = ins;\n        this.out = NO;\n    }\n    Remember.prototype._start = function (out) {\n        this.out = out;\n        this.ins._add(out);\n    };\n    Remember.prototype._stop = function () {\n        this.ins._remove(this.out);\n        this.out = NO;\n    };\n    return Remember;\n}());\nvar ReplaceError = /** @class */ (function () {\n    function ReplaceError(replacer, ins) {\n        this.type = 'replaceError';\n        this.ins = ins;\n        this.out = NO;\n        this.f = replacer;\n    }\n    ReplaceError.prototype._start = function (out) {\n        this.out = out;\n        this.ins._add(this);\n    };\n    ReplaceError.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n    };\n    ReplaceError.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._n(t);\n    };\n    ReplaceError.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        try {\n            this.ins._remove(this);\n            (this.ins = this.f(err))._add(this);\n        }\n        catch (e) {\n            u._e(e);\n        }\n    };\n    ReplaceError.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return ReplaceError;\n}());\nvar StartWith = /** @class */ (function () {\n    function StartWith(ins, val) {\n        this.type = 'startWith';\n        this.ins = ins;\n        this.out = NO;\n        this.val = val;\n    }\n    StartWith.prototype._start = function (out) {\n        this.out = out;\n        this.out._n(this.val);\n        this.ins._add(out);\n    };\n    StartWith.prototype._stop = function () {\n        this.ins._remove(this.out);\n        this.out = NO;\n    };\n    return StartWith;\n}());\nvar Take = /** @class */ (function () {\n    function Take(max, ins) {\n        this.type = 'take';\n        this.ins = ins;\n        this.out = NO;\n        this.max = max;\n        this.taken = 0;\n    }\n    Take.prototype._start = function (out) {\n        this.out = out;\n        this.taken = 0;\n        if (this.max <= 0)\n            out._c();\n        else\n            this.ins._add(this);\n    };\n    Take.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = NO;\n    };\n    Take.prototype._n = function (t) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        var m = ++this.taken;\n        if (m < this.max)\n            u._n(t);\n        else if (m === this.max) {\n            u._n(t);\n            u._c();\n        }\n    };\n    Take.prototype._e = function (err) {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._e(err);\n    };\n    Take.prototype._c = function () {\n        var u = this.out;\n        if (u === NO)\n            return;\n        u._c();\n    };\n    return Take;\n}());\nvar Stream = /** @class */ (function () {\n    function Stream(producer) {\n        this._prod = producer || NO;\n        this._ils = [];\n        this._stopID = NO;\n        this._dl = NO;\n        this._d = false;\n        this._target = NO;\n        this._err = NO;\n    }\n    Stream.prototype._n = function (t) {\n        var a = this._ils;\n        var L = a.length;\n        if (this._d)\n            this._dl._n(t);\n        if (L == 1)\n            a[0]._n(t);\n        else if (L == 0)\n            return;\n        else {\n            var b = cp(a);\n            for (var i = 0; i < L; i++)\n                b[i]._n(t);\n        }\n    };\n    Stream.prototype._e = function (err) {\n        if (this._err !== NO)\n            return;\n        this._err = err;\n        var a = this._ils;\n        var L = a.length;\n        this._x();\n        if (this._d)\n            this._dl._e(err);\n        if (L == 1)\n            a[0]._e(err);\n        else if (L == 0)\n            return;\n        else {\n            var b = cp(a);\n            for (var i = 0; i < L; i++)\n                b[i]._e(err);\n        }\n        if (!this._d && L == 0)\n            throw this._err;\n    };\n    Stream.prototype._c = function () {\n        var a = this._ils;\n        var L = a.length;\n        this._x();\n        if (this._d)\n            this._dl._c();\n        if (L == 1)\n            a[0]._c();\n        else if (L == 0)\n            return;\n        else {\n            var b = cp(a);\n            for (var i = 0; i < L; i++)\n                b[i]._c();\n        }\n    };\n    Stream.prototype._x = function () {\n        if (this._ils.length === 0)\n            return;\n        if (this._prod !== NO)\n            this._prod._stop();\n        this._err = NO;\n        this._ils = [];\n    };\n    Stream.prototype._stopNow = function () {\n        // WARNING: code that calls this method should\n        // first check if this._prod is valid (not `NO`)\n        this._prod._stop();\n        this._err = NO;\n        this._stopID = NO;\n    };\n    Stream.prototype._add = function (il) {\n        var ta = this._target;\n        if (ta !== NO)\n            return ta._add(il);\n        var a = this._ils;\n        a.push(il);\n        if (a.length > 1)\n            return;\n        if (this._stopID !== NO) {\n            clearTimeout(this._stopID);\n            this._stopID = NO;\n        }\n        else {\n            var p = this._prod;\n            if (p !== NO)\n                p._start(this);\n        }\n    };\n    Stream.prototype._remove = function (il) {\n        var _this = this;\n        var ta = this._target;\n        if (ta !== NO)\n            return ta._remove(il);\n        var a = this._ils;\n        var i = a.indexOf(il);\n        if (i > -1) {\n            a.splice(i, 1);\n            if (this._prod !== NO && a.length <= 0) {\n                this._err = NO;\n                this._stopID = setTimeout(function () { return _this._stopNow(); });\n            }\n            else if (a.length === 1) {\n                this._pruneCycles();\n            }\n        }\n    };\n    // If all paths stemming from `this` stream eventually end at `this`\n    // stream, then we remove the single listener of `this` stream, to\n    // force it to end its execution and dispose resources. This method\n    // assumes as a precondition that this._ils has just one listener.\n    Stream.prototype._pruneCycles = function () {\n        if (this._hasNoSinks(this, []))\n            this._remove(this._ils[0]);\n    };\n    // Checks whether *there is no* path starting from `x` that leads to an end\n    // listener (sink) in the stream graph, following edges A->B where B is a\n    // listener of A. This means these paths constitute a cycle somehow. Is given\n    // a trace of all visited nodes so far.\n    Stream.prototype._hasNoSinks = function (x, trace) {\n        if (trace.indexOf(x) !== -1)\n            return true;\n        else if (x.out === this)\n            return true;\n        else if (x.out && x.out !== NO)\n            return this._hasNoSinks(x.out, trace.concat(x));\n        else if (x._ils) {\n            for (var i = 0, N = x._ils.length; i < N; i++)\n                if (!this._hasNoSinks(x._ils[i], trace.concat(x)))\n                    return false;\n            return true;\n        }\n        else\n            return false;\n    };\n    Stream.prototype.ctor = function () {\n        return this instanceof MemoryStream ? MemoryStream : Stream;\n    };\n    /**\n     * Adds a Listener to the Stream.\n     *\n     * @param {Listener} listener\n     */\n    Stream.prototype.addListener = function (listener) {\n        listener._n = listener.next || noop;\n        listener._e = listener.error || noop;\n        listener._c = listener.complete || noop;\n        this._add(listener);\n    };\n    /**\n     * Removes a Listener from the Stream, assuming the Listener was added to it.\n     *\n     * @param {Listener<T>} listener\n     */\n    Stream.prototype.removeListener = function (listener) {\n        this._remove(listener);\n    };\n    /**\n     * Adds a Listener to the Stream returning a Subscription to remove that\n     * listener.\n     *\n     * @param {Listener} listener\n     * @returns {Subscription}\n     */\n    Stream.prototype.subscribe = function (listener) {\n        this.addListener(listener);\n        return new StreamSub(this, listener);\n    };\n    /**\n     * Add interop between most.js and RxJS 5\n     *\n     * @returns {Stream}\n     */\n    Stream.prototype[symbol_observable_1.default] = function () {\n        return this;\n    };\n    /**\n     * Creates a new Stream given a Producer.\n     *\n     * @factory true\n     * @param {Producer} producer An optional Producer that dictates how to\n     * start, generate events, and stop the Stream.\n     * @return {Stream}\n     */\n    Stream.create = function (producer) {\n        if (producer) {\n            if (typeof producer.start !== 'function'\n                || typeof producer.stop !== 'function')\n                throw new Error('producer requires both start and stop functions');\n            internalizeProducer(producer); // mutates the input\n        }\n        return new Stream(producer);\n    };\n    /**\n     * Creates a new MemoryStream given a Producer.\n     *\n     * @factory true\n     * @param {Producer} producer An optional Producer that dictates how to\n     * start, generate events, and stop the Stream.\n     * @return {MemoryStream}\n     */\n    Stream.createWithMemory = function (producer) {\n        if (producer)\n            internalizeProducer(producer); // mutates the input\n        return new MemoryStream(producer);\n    };\n    /**\n     * Creates a Stream that does nothing when started. It never emits any event.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     *          never\n     * -----------------------\n     * ```\n     *\n     * @factory true\n     * @return {Stream}\n     */\n    Stream.never = function () {\n        return new Stream({ _start: noop, _stop: noop });\n    };\n    /**\n     * Creates a Stream that immediately emits the \"complete\" notification when\n     * started, and that's it.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * empty\n     * -|\n     * ```\n     *\n     * @factory true\n     * @return {Stream}\n     */\n    Stream.empty = function () {\n        return new Stream({\n            _start: function (il) { il._c(); },\n            _stop: noop,\n        });\n    };\n    /**\n     * Creates a Stream that immediately emits an \"error\" notification with the\n     * value you passed as the `error` argument when the stream starts, and that's\n     * it.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * throw(X)\n     * -X\n     * ```\n     *\n     * @factory true\n     * @param error The error event to emit on the created stream.\n     * @return {Stream}\n     */\n    Stream.throw = function (error) {\n        return new Stream({\n            _start: function (il) { il._e(error); },\n            _stop: noop,\n        });\n    };\n    /**\n     * Creates a stream from an Array, Promise, or an Observable.\n     *\n     * @factory true\n     * @param {Array|PromiseLike|Observable} input The input to make a stream from.\n     * @return {Stream}\n     */\n    Stream.from = function (input) {\n        if (typeof input[symbol_observable_1.default] === 'function')\n            return Stream.fromObservable(input);\n        else if (typeof input.then === 'function')\n            return Stream.fromPromise(input);\n        else if (Array.isArray(input))\n            return Stream.fromArray(input);\n        throw new TypeError(\"Type of input to from() must be an Array, Promise, or Observable\");\n    };\n    /**\n     * Creates a Stream that immediately emits the arguments that you give to\n     * *of*, then completes.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * of(1,2,3)\n     * 123|\n     * ```\n     *\n     * @factory true\n     * @param a The first value you want to emit as an event on the stream.\n     * @param b The second value you want to emit as an event on the stream. One\n     * or more of these values may be given as arguments.\n     * @return {Stream}\n     */\n    Stream.of = function () {\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        return Stream.fromArray(items);\n    };\n    /**\n     * Converts an array to a stream. The returned stream will emit synchronously\n     * all the items in the array, and then complete.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * fromArray([1,2,3])\n     * 123|\n     * ```\n     *\n     * @factory true\n     * @param {Array} array The array to be converted as a stream.\n     * @return {Stream}\n     */\n    Stream.fromArray = function (array) {\n        return new Stream(new FromArray(array));\n    };\n    /**\n     * Converts a promise to a stream. The returned stream will emit the resolved\n     * value of the promise, and then complete. However, if the promise is\n     * rejected, the stream will emit the corresponding error.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * fromPromise( ----42 )\n     * -----------------42|\n     * ```\n     *\n     * @factory true\n     * @param {PromiseLike} promise The promise to be converted as a stream.\n     * @return {Stream}\n     */\n    Stream.fromPromise = function (promise) {\n        return new Stream(new FromPromise(promise));\n    };\n    /**\n     * Converts an Observable into a Stream.\n     *\n     * @factory true\n     * @param {any} observable The observable to be converted as a stream.\n     * @return {Stream}\n     */\n    Stream.fromObservable = function (obs) {\n        if (obs.endWhen)\n            return obs;\n        var o = typeof obs[symbol_observable_1.default] === 'function' ? obs[symbol_observable_1.default]() : obs;\n        return new Stream(new FromObservable(o));\n    };\n    /**\n     * Creates a stream that periodically emits incremental numbers, every\n     * `period` milliseconds.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     *     periodic(1000)\n     * ---0---1---2---3---4---...\n     * ```\n     *\n     * @factory true\n     * @param {number} period The interval in milliseconds to use as a rate of\n     * emission.\n     * @return {Stream}\n     */\n    Stream.periodic = function (period) {\n        return new Stream(new Periodic(period));\n    };\n    Stream.prototype._map = function (project) {\n        return new (this.ctor())(new MapOp(project, this));\n    };\n    /**\n     * Transforms each event from the input Stream through a `project` function,\n     * to get a Stream that emits those transformed events.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1---3--5-----7------\n     *    map(i => i * 10)\n     * --10--30-50----70-----\n     * ```\n     *\n     * @param {Function} project A function of type `(t: T) => U` that takes event\n     * `t` of type `T` from the input Stream and produces an event of type `U`, to\n     * be emitted on the output Stream.\n     * @return {Stream}\n     */\n    Stream.prototype.map = function (project) {\n        return this._map(project);\n    };\n    /**\n     * It's like `map`, but transforms each input event to always the same\n     * constant value on the output Stream.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1---3--5-----7-----\n     *       mapTo(10)\n     * --10--10-10----10----\n     * ```\n     *\n     * @param projectedValue A value to emit on the output Stream whenever the\n     * input Stream emits any value.\n     * @return {Stream}\n     */\n    Stream.prototype.mapTo = function (projectedValue) {\n        var s = this.map(function () { return projectedValue; });\n        var op = s._prod;\n        op.type = 'mapTo';\n        return s;\n    };\n    /**\n     * Only allows events that pass the test given by the `passes` argument.\n     *\n     * Each event from the input stream is given to the `passes` function. If the\n     * function returns `true`, the event is forwarded to the output stream,\n     * otherwise it is ignored and not forwarded.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1---2--3-----4-----5---6--7-8--\n     *     filter(i => i % 2 === 0)\n     * ------2--------4---------6----8--\n     * ```\n     *\n     * @param {Function} passes A function of type `(t: T) => boolean` that takes\n     * an event from the input stream and checks if it passes, by returning a\n     * boolean.\n     * @return {Stream}\n     */\n    Stream.prototype.filter = function (passes) {\n        var p = this._prod;\n        if (p instanceof Filter)\n            return new Stream(new Filter(and(p.f, passes), p.ins));\n        return new Stream(new Filter(passes, this));\n    };\n    /**\n     * Lets the first `amount` many events from the input stream pass to the\n     * output stream, then makes the output stream complete.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --a---b--c----d---e--\n     *    take(3)\n     * --a---b--c|\n     * ```\n     *\n     * @param {number} amount How many events to allow from the input stream\n     * before completing the output stream.\n     * @return {Stream}\n     */\n    Stream.prototype.take = function (amount) {\n        return new (this.ctor())(new Take(amount, this));\n    };\n    /**\n     * Ignores the first `amount` many events from the input stream, and then\n     * after that starts forwarding events from the input stream to the output\n     * stream.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --a---b--c----d---e--\n     *       drop(3)\n     * --------------d---e--\n     * ```\n     *\n     * @param {number} amount How many events to ignore from the input stream\n     * before forwarding all events from the input stream to the output stream.\n     * @return {Stream}\n     */\n    Stream.prototype.drop = function (amount) {\n        return new Stream(new Drop(amount, this));\n    };\n    /**\n     * When the input stream completes, the output stream will emit the last event\n     * emitted by the input stream, and then will also complete.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --a---b--c--d----|\n     *       last()\n     * -----------------d|\n     * ```\n     *\n     * @return {Stream}\n     */\n    Stream.prototype.last = function () {\n        return new Stream(new Last(this));\n    };\n    /**\n     * Prepends the given `initial` value to the sequence of events emitted by the\n     * input stream. The returned stream is a MemoryStream, which means it is\n     * already `remember()`'d.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * ---1---2-----3---\n     *   startWith(0)\n     * 0--1---2-----3---\n     * ```\n     *\n     * @param initial The value or event to prepend.\n     * @return {MemoryStream}\n     */\n    Stream.prototype.startWith = function (initial) {\n        return new MemoryStream(new StartWith(this, initial));\n    };\n    /**\n     * Uses another stream to determine when to complete the current stream.\n     *\n     * When the given `other` stream emits an event or completes, the output\n     * stream will complete. Before that happens, the output stream will behaves\n     * like the input stream.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * ---1---2-----3--4----5----6---\n     *   endWhen( --------a--b--| )\n     * ---1---2-----3--4--|\n     * ```\n     *\n     * @param other Some other stream that is used to know when should the output\n     * stream of this operator complete.\n     * @return {Stream}\n     */\n    Stream.prototype.endWhen = function (other) {\n        return new (this.ctor())(new EndWhen(other, this));\n    };\n    /**\n     * \"Folds\" the stream onto itself.\n     *\n     * Combines events from the past throughout\n     * the entire execution of the input stream, allowing you to accumulate them\n     * together. It's essentially like `Array.prototype.reduce`. The returned\n     * stream is a MemoryStream, which means it is already `remember()`'d.\n     *\n     * The output stream starts by emitting the `seed` which you give as argument.\n     * Then, when an event happens on the input stream, it is combined with that\n     * seed value through the `accumulate` function, and the output value is\n     * emitted on the output stream. `fold` remembers that output value as `acc`\n     * (\"accumulator\"), and then when a new input event `t` happens, `acc` will be\n     * combined with that to produce the new `acc` and so forth.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * ------1-----1--2----1----1------\n     *   fold((acc, x) => acc + x, 3)\n     * 3-----4-----5--7----8----9------\n     * ```\n     *\n     * @param {Function} accumulate A function of type `(acc: R, t: T) => R` that\n     * takes the previous accumulated value `acc` and the incoming event from the\n     * input stream and produces the new accumulated value.\n     * @param seed The initial accumulated value, of type `R`.\n     * @return {MemoryStream}\n     */\n    Stream.prototype.fold = function (accumulate, seed) {\n        return new MemoryStream(new Fold(accumulate, seed, this));\n    };\n    /**\n     * Replaces an error with another stream.\n     *\n     * When (and if) an error happens on the input stream, instead of forwarding\n     * that error to the output stream, *replaceError* will call the `replace`\n     * function which returns the stream that the output stream will replicate.\n     * And, in case that new stream also emits an error, `replace` will be called\n     * again to get another stream to start replicating.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1---2-----3--4-----X\n     *   replaceError( () => --10--| )\n     * --1---2-----3--4--------10--|\n     * ```\n     *\n     * @param {Function} replace A function of type `(err) => Stream` that takes\n     * the error that occurred on the input stream or on the previous replacement\n     * stream and returns a new stream. The output stream will behave like the\n     * stream that this function returns.\n     * @return {Stream}\n     */\n    Stream.prototype.replaceError = function (replace) {\n        return new (this.ctor())(new ReplaceError(replace, this));\n    };\n    /**\n     * Flattens a \"stream of streams\", handling only one nested stream at a time\n     * (no concurrency).\n     *\n     * If the input stream is a stream that emits streams, then this operator will\n     * return an output stream which is a flat stream: emits regular events. The\n     * flattening happens without concurrency. It works like this: when the input\n     * stream emits a nested stream, *flatten* will start imitating that nested\n     * one. However, as soon as the next nested stream is emitted on the input\n     * stream, *flatten* will forget the previous nested one it was imitating, and\n     * will start imitating the new nested one.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --+--------+---------------\n     *   \\        \\\n     *    \\       ----1----2---3--\n     *    --a--b----c----d--------\n     *           flatten\n     * -----a--b------1----2---3--\n     * ```\n     *\n     * @return {Stream}\n     */\n    Stream.prototype.flatten = function () {\n        var p = this._prod;\n        return new Stream(new Flatten(this));\n    };\n    /**\n     * Passes the input stream to a custom operator, to produce an output stream.\n     *\n     * *compose* is a handy way of using an existing function in a chained style.\n     * Instead of writing `outStream = f(inStream)` you can write\n     * `outStream = inStream.compose(f)`.\n     *\n     * @param {function} operator A function that takes a stream as input and\n     * returns a stream as well.\n     * @return {Stream}\n     */\n    Stream.prototype.compose = function (operator) {\n        return operator(this);\n    };\n    /**\n     * Returns an output stream that behaves like the input stream, but also\n     * remembers the most recent event that happens on the input stream, so that a\n     * newly added listener will immediately receive that memorised event.\n     *\n     * @return {MemoryStream}\n     */\n    Stream.prototype.remember = function () {\n        return new MemoryStream(new Remember(this));\n    };\n    /**\n     * Returns an output stream that identically behaves like the input stream,\n     * but also runs a `spy` function for each event, to help you debug your app.\n     *\n     * *debug* takes a `spy` function as argument, and runs that for each event\n     * happening on the input stream. If you don't provide the `spy` argument,\n     * then *debug* will just `console.log` each event. This helps you to\n     * understand the flow of events through some operator chain.\n     *\n     * Please note that if the output stream has no listeners, then it will not\n     * start, which means `spy` will never run because no actual event happens in\n     * that case.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1----2-----3-----4--\n     *         debug\n     * --1----2-----3-----4--\n     * ```\n     *\n     * @param {function} labelOrSpy A string to use as the label when printing\n     * debug information on the console, or a 'spy' function that takes an event\n     * as argument, and does not need to return anything.\n     * @return {Stream}\n     */\n    Stream.prototype.debug = function (labelOrSpy) {\n        return new (this.ctor())(new Debug(this, labelOrSpy));\n    };\n    /**\n     * *imitate* changes this current Stream to emit the same events that the\n     * `other` given Stream does. This method returns nothing.\n     *\n     * This method exists to allow one thing: **circular dependency of streams**.\n     * For instance, let's imagine that for some reason you need to create a\n     * circular dependency where stream `first$` depends on stream `second$`\n     * which in turn depends on `first$`:\n     *\n     * <!-- skip-example -->\n     * ```js\n     * import delay from 'xstream/extra/delay'\n     *\n     * var first$ = second$.map(x => x * 10).take(3);\n     * var second$ = first$.map(x => x + 1).startWith(1).compose(delay(100));\n     * ```\n     *\n     * However, that is invalid JavaScript, because `second$` is undefined\n     * on the first line. This is how *imitate* can help solve it:\n     *\n     * ```js\n     * import delay from 'xstream/extra/delay'\n     *\n     * var secondProxy$ = xs.create();\n     * var first$ = secondProxy$.map(x => x * 10).take(3);\n     * var second$ = first$.map(x => x + 1).startWith(1).compose(delay(100));\n     * secondProxy$.imitate(second$);\n     * ```\n     *\n     * We create `secondProxy$` before the others, so it can be used in the\n     * declaration of `first$`. Then, after both `first$` and `second$` are\n     * defined, we hook `secondProxy$` with `second$` with `imitate()` to tell\n     * that they are \"the same\". `imitate` will not trigger the start of any\n     * stream, it just binds `secondProxy$` and `second$` together.\n     *\n     * The following is an example where `imitate()` is important in Cycle.js\n     * applications. A parent component contains some child components. A child\n     * has an action stream which is given to the parent to define its state:\n     *\n     * <!-- skip-example -->\n     * ```js\n     * const childActionProxy$ = xs.create();\n     * const parent = Parent({...sources, childAction$: childActionProxy$});\n     * const childAction$ = parent.state$.map(s => s.child.action$).flatten();\n     * childActionProxy$.imitate(childAction$);\n     * ```\n     *\n     * Note, though, that **`imitate()` does not support MemoryStreams**. If we\n     * would attempt to imitate a MemoryStream in a circular dependency, we would\n     * either get a race condition (where the symptom would be \"nothing happens\")\n     * or an infinite cyclic emission of values. It's useful to think about\n     * MemoryStreams as cells in a spreadsheet. It doesn't make any sense to\n     * define a spreadsheet cell `A1` with a formula that depends on `B1` and\n     * cell `B1` defined with a formula that depends on `A1`.\n     *\n     * If you find yourself wanting to use `imitate()` with a\n     * MemoryStream, you should rework your code around `imitate()` to use a\n     * Stream instead. Look for the stream in the circular dependency that\n     * represents an event stream, and that would be a candidate for creating a\n     * proxy Stream which then imitates the target Stream.\n     *\n     * @param {Stream} target The other stream to imitate on the current one. Must\n     * not be a MemoryStream.\n     */\n    Stream.prototype.imitate = function (target) {\n        if (target instanceof MemoryStream)\n            throw new Error('A MemoryStream was given to imitate(), but it only ' +\n                'supports a Stream. Read more about this restriction here: ' +\n                'https://github.com/staltz/xstream#faq');\n        this._target = target;\n        for (var ils = this._ils, N = ils.length, i = 0; i < N; i++)\n            target._add(ils[i]);\n        this._ils = [];\n    };\n    /**\n     * Forces the Stream to emit the given value to its listeners.\n     *\n     * As the name indicates, if you use this, you are most likely doing something\n     * The Wrong Way. Please try to understand the reactive way before using this\n     * method. Use it only when you know what you are doing.\n     *\n     * @param value The \"next\" value you want to broadcast to all listeners of\n     * this Stream.\n     */\n    Stream.prototype.shamefullySendNext = function (value) {\n        this._n(value);\n    };\n    /**\n     * Forces the Stream to emit the given error to its listeners.\n     *\n     * As the name indicates, if you use this, you are most likely doing something\n     * The Wrong Way. Please try to understand the reactive way before using this\n     * method. Use it only when you know what you are doing.\n     *\n     * @param {any} error The error you want to broadcast to all the listeners of\n     * this Stream.\n     */\n    Stream.prototype.shamefullySendError = function (error) {\n        this._e(error);\n    };\n    /**\n     * Forces the Stream to emit the \"completed\" event to its listeners.\n     *\n     * As the name indicates, if you use this, you are most likely doing something\n     * The Wrong Way. Please try to understand the reactive way before using this\n     * method. Use it only when you know what you are doing.\n     */\n    Stream.prototype.shamefullySendComplete = function () {\n        this._c();\n    };\n    /**\n     * Adds a \"debug\" listener to the stream. There can only be one debug\n     * listener, that's why this is 'setDebugListener'. To remove the debug\n     * listener, just call setDebugListener(null).\n     *\n     * A debug listener is like any other listener. The only difference is that a\n     * debug listener is \"stealthy\": its presence/absence does not trigger the\n     * start/stop of the stream (or the producer inside the stream). This is\n     * useful so you can inspect what is going on without changing the behavior\n     * of the program. If you have an idle stream and you add a normal listener to\n     * it, the stream will start executing. But if you set a debug listener on an\n     * idle stream, it won't start executing (not until the first normal listener\n     * is added).\n     *\n     * As the name indicates, we don't recommend using this method to build app\n     * logic. In fact, in most cases the debug operator works just fine. Only use\n     * this one if you know what you're doing.\n     *\n     * @param {Listener<T>} listener\n     */\n    Stream.prototype.setDebugListener = function (listener) {\n        if (!listener) {\n            this._d = false;\n            this._dl = NO;\n        }\n        else {\n            this._d = true;\n            listener._n = listener.next || noop;\n            listener._e = listener.error || noop;\n            listener._c = listener.complete || noop;\n            this._dl = listener;\n        }\n    };\n    /**\n     * Blends multiple streams together, emitting events from all of them\n     * concurrently.\n     *\n     * *merge* takes multiple streams as arguments, and creates a stream that\n     * behaves like each of the argument streams, in parallel.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1----2-----3--------4---\n     * ----a-----b----c---d------\n     *            merge\n     * --1-a--2--b--3-c---d--4---\n     * ```\n     *\n     * @factory true\n     * @param {Stream} stream1 A stream to merge together with other streams.\n     * @param {Stream} stream2 A stream to merge together with other streams. Two\n     * or more streams may be given as arguments.\n     * @return {Stream}\n     */\n    Stream.merge = function merge() {\n        var streams = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            streams[_i] = arguments[_i];\n        }\n        return new Stream(new Merge(streams));\n    };\n    /**\n     * Combines multiple input streams together to return a stream whose events\n     * are arrays that collect the latest events from each input stream.\n     *\n     * *combine* internally remembers the most recent event from each of the input\n     * streams. When any of the input streams emits an event, that event together\n     * with all the other saved events are combined into an array. That array will\n     * be emitted on the output stream. It's essentially a way of joining together\n     * the events from multiple streams.\n     *\n     * Marble diagram:\n     *\n     * ```text\n     * --1----2-----3--------4---\n     * ----a-----b-----c--d------\n     *          combine\n     * ----1a-2a-2b-3b-3c-3d-4d--\n     * ```\n     *\n     * @factory true\n     * @param {Stream} stream1 A stream to combine together with other streams.\n     * @param {Stream} stream2 A stream to combine together with other streams.\n     * Multiple streams, not just two, may be given as arguments.\n     * @return {Stream}\n     */\n    Stream.combine = function combine() {\n        var streams = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            streams[_i] = arguments[_i];\n        }\n        return new Stream(new Combine(streams));\n    };\n    return Stream;\n}());\nexports.Stream = Stream;\nvar MemoryStream = /** @class */ (function (_super) {\n    __extends(MemoryStream, _super);\n    function MemoryStream(producer) {\n        var _this = _super.call(this, producer) || this;\n        _this._has = false;\n        return _this;\n    }\n    MemoryStream.prototype._n = function (x) {\n        this._v = x;\n        this._has = true;\n        _super.prototype._n.call(this, x);\n    };\n    MemoryStream.prototype._add = function (il) {\n        var ta = this._target;\n        if (ta !== NO)\n            return ta._add(il);\n        var a = this._ils;\n        a.push(il);\n        if (a.length > 1) {\n            if (this._has)\n                il._n(this._v);\n            return;\n        }\n        if (this._stopID !== NO) {\n            if (this._has)\n                il._n(this._v);\n            clearTimeout(this._stopID);\n            this._stopID = NO;\n        }\n        else if (this._has)\n            il._n(this._v);\n        else {\n            var p = this._prod;\n            if (p !== NO)\n                p._start(this);\n        }\n    };\n    MemoryStream.prototype._stopNow = function () {\n        this._has = false;\n        _super.prototype._stopNow.call(this);\n    };\n    MemoryStream.prototype._x = function () {\n        this._has = false;\n        _super.prototype._x.call(this);\n    };\n    MemoryStream.prototype.map = function (project) {\n        return this._map(project);\n    };\n    MemoryStream.prototype.mapTo = function (projectedValue) {\n        return _super.prototype.mapTo.call(this, projectedValue);\n    };\n    MemoryStream.prototype.take = function (amount) {\n        return _super.prototype.take.call(this, amount);\n    };\n    MemoryStream.prototype.endWhen = function (other) {\n        return _super.prototype.endWhen.call(this, other);\n    };\n    MemoryStream.prototype.replaceError = function (replace) {\n        return _super.prototype.replaceError.call(this, replace);\n    };\n    MemoryStream.prototype.remember = function () {\n        return this;\n    };\n    MemoryStream.prototype.debug = function (labelOrSpy) {\n        return _super.prototype.debug.call(this, labelOrSpy);\n    };\n    return MemoryStream;\n}(Stream));\nexports.MemoryStream = MemoryStream;\nvar xs = Stream;\nexports.default = xs;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsdURBQTZDO0FBRTdDLElBQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQztBQWlnRU4sZ0JBQUU7QUFoZ0VWLGtCQUFpQixDQUFDO0FBRWxCLFlBQWUsQ0FBVztJQUN4QixJQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ25CLElBQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQztRQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEMsT0FBTyxDQUFDLENBQUM7QUFDWCxDQUFDO0FBRUQsYUFBZ0IsRUFBcUIsRUFBRSxFQUFxQjtJQUMxRCxPQUFPLGVBQWUsQ0FBSTtRQUN4QixPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQU1ELGNBQW9CLENBQW1CLEVBQUUsQ0FBSSxFQUFFLENBQWM7SUFDM0QsSUFBSTtRQUNGLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNmO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDVixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ1IsT0FBTyxFQUFFLENBQUM7S0FDWDtBQUNILENBQUM7QUFRRCxJQUFNLEtBQUssR0FBMEI7SUFDbkMsRUFBRSxFQUFFLElBQUk7SUFDUixFQUFFLEVBQUUsSUFBSTtJQUNSLEVBQUUsRUFBRSxJQUFJO0NBQ1QsQ0FBQztBQTA5RFUsc0JBQUs7QUFoN0RqQixvQkFBb0I7QUFDcEIsNkJBQWdD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QztJQUN4RCxDQUFDO0lBRUQsK0JBQVEsR0FBUjtRQUNFLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUtELDRCQUFLLEdBQUwsVUFBTSxVQUFpRDtRQUNyRCxPQUFPLGlCQUFNLEtBQUssWUFBQyxVQUFpQixDQUFvQixDQUFDO0lBQzNELENBQUM7SUFDSCxtQkFBQztBQUFELENBQUMsQUF4RUQsQ0FBcUMsTUFBTSxHQXdFMUM7QUF4RVksb0NBQVk7QUEyRXpCLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQztBQUVsQixrQkFBZSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJCRvYnNlcnZhYmxlIGZyb20gJ3N5bWJvbC1vYnNlcnZhYmxlJztcblxuY29uc3QgTk8gPSB7fTtcbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5mdW5jdGlvbiBjcDxUPihhOiBBcnJheTxUPik6IEFycmF5PFQ+IHtcbiAgY29uc3QgbCA9IGEubGVuZ3RoO1xuICBjb25zdCBiID0gQXJyYXkobCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgKytpKSBiW2ldID0gYVtpXTtcbiAgcmV0dXJuIGI7XG59XG5cbmZ1bmN0aW9uIGFuZDxUPihmMTogKHQ6IFQpID0+IGJvb2xlYW4sIGYyOiAodDogVCkgPT4gYm9vbGVhbik6ICh0OiBUKSA9PiBib29sZWFuIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGFuZEZuKHQ6IFQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZjEodCkgJiYgZjIodCk7XG4gIH07XG59XG5cbmludGVyZmFjZSBGQ29udGFpbmVyPFQsIFI+IHtcbiAgZih0OiBUKTogUjtcbn1cblxuZnVuY3Rpb24gX3RyeTxULCBSPihjOiBGQ29udGFpbmVyPFQsIFI+LCB0OiBULCB1OiBTdHJlYW08YW55Pik6IFIgfCB7fSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGMuZih0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHUuX2UoZSk7XG4gICAgcmV0dXJuIE5PO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW50ZXJuYWxMaXN0ZW5lcjxUPiB7XG4gIF9uOiAodjogVCkgPT4gdm9pZDtcbiAgX2U6IChlcnI6IGFueSkgPT4gdm9pZDtcbiAgX2M6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IE5PX0lMOiBJbnRlcm5hbExpc3RlbmVyPGFueT4gPSB7XG4gIF9uOiBub29wLFxuICBfZTogbm9vcCxcbiAgX2M6IG5vb3AsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEludGVybmFsUHJvZHVjZXI8VD4ge1xuICBfc3RhcnQobGlzdGVuZXI6IEludGVybmFsTGlzdGVuZXI8VD4pOiB2b2lkO1xuICBfc3RvcDogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPdXRTZW5kZXI8VD4ge1xuICBvdXQ6IFN0cmVhbTxUPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRvcjxULCBSPiBleHRlbmRzIEludGVybmFsUHJvZHVjZXI8Uj4sIEludGVybmFsTGlzdGVuZXI8VD4sIE91dFNlbmRlcjxSPiB7XG4gIHR5cGU6IHN0cmluZztcbiAgaW5zOiBTdHJlYW08VD47XG4gIF9zdGFydChvdXQ6IFN0cmVhbTxSPik6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWdncmVnYXRvcjxULCBVPiBleHRlbmRzIEludGVybmFsUHJvZHVjZXI8VT4sIE91dFNlbmRlcjxVPiB7XG4gIHR5cGU6IHN0cmluZztcbiAgaW5zQXJyOiBBcnJheTxTdHJlYW08VD4+O1xuICBfc3RhcnQob3V0OiBTdHJlYW08VT4pOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2R1Y2VyPFQ+IHtcbiAgc3RhcnQ6IChsaXN0ZW5lcjogTGlzdGVuZXI8VD4pID0+IHZvaWQ7XG4gIHN0b3A6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGlzdGVuZXI8VD4ge1xuICBuZXh0OiAoeDogVCkgPT4gdm9pZDtcbiAgZXJyb3I6IChlcnI6IGFueSkgPT4gdm9pZDtcbiAgY29tcGxldGU6ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uIHtcbiAgdW5zdWJzY3JpYmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPYnNlcnZhYmxlPFQ+IHtcbiAgc3Vic2NyaWJlKGxpc3RlbmVyOiBMaXN0ZW5lcjxUPik6IFN1YnNjcmlwdGlvbjtcbn1cblxuLy8gbXV0YXRlcyB0aGUgaW5wdXRcbmZ1bmN0aW9uIGludGVybmFsaXplUHJvZHVjZXI8VD4ocHJvZHVjZXI6IFByb2R1Y2VyPFQ+ICYgUGFydGlhbDxJbnRlcm5hbFByb2R1Y2VyPFQ+Pikge1xuICBwcm9kdWNlci5fc3RhcnQgPSBmdW5jdGlvbiBfc3RhcnQoaWw6IEludGVybmFsTGlzdGVuZXI8VD4gJiBQYXJ0aWFsPExpc3RlbmVyPFQ+Pikge1xuICAgIGlsLm5leHQgPSBpbC5fbjtcbiAgICBpbC5lcnJvciA9IGlsLl9lO1xuICAgIGlsLmNvbXBsZXRlID0gaWwuX2M7XG4gICAgdGhpcy5zdGFydChpbCk7XG4gIH07XG4gIHByb2R1Y2VyLl9zdG9wID0gcHJvZHVjZXIuc3RvcDtcbn1cblxuY2xhc3MgU3RyZWFtU3ViPFQ+IGltcGxlbWVudHMgU3Vic2NyaXB0aW9uIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfc3RyZWFtOiBTdHJlYW08VD4sIHByaXZhdGUgX2xpc3RlbmVyOiBJbnRlcm5hbExpc3RlbmVyPFQ+KSB7fVxuXG4gIHVuc3Vic2NyaWJlKCk6IHZvaWQge1xuICAgIHRoaXMuX3N0cmVhbS5fcmVtb3ZlKHRoaXMuX2xpc3RlbmVyKTtcbiAgfVxufVxuXG5jbGFzcyBPYnNlcnZlcjxUPiBpbXBsZW1lbnRzIExpc3RlbmVyPFQ+IHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfbGlzdGVuZXI6IEludGVybmFsTGlzdGVuZXI8VD4pIHt9XG5cbiAgbmV4dCh2YWx1ZTogVCkge1xuICAgIHRoaXMuX2xpc3RlbmVyLl9uKHZhbHVlKTtcbiAgfVxuXG4gIGVycm9yKGVycjogYW55KSB7XG4gICAgdGhpcy5fbGlzdGVuZXIuX2UoZXJyKTtcbiAgfVxuXG4gIGNvbXBsZXRlKCkge1xuICAgIHRoaXMuX2xpc3RlbmVyLl9jKCk7XG4gIH1cbn1cblxuY2xhc3MgRnJvbU9ic2VydmFibGU8VD4gaW1wbGVtZW50cyBJbnRlcm5hbFByb2R1Y2VyPFQ+IHtcbiAgcHVibGljIHR5cGUgPSAnZnJvbU9ic2VydmFibGUnO1xuICBwdWJsaWMgaW5zOiBPYnNlcnZhYmxlPFQ+O1xuICBwdWJsaWMgb3V0OiBTdHJlYW08VD47XG4gIHByaXZhdGUgYWN0aXZlOiBib29sZWFuO1xuICBwcml2YXRlIF9zdWI6IFN1YnNjcmlwdGlvbiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihvYnNlcnZhYmxlOiBPYnNlcnZhYmxlPFQ+KSB7XG4gICAgdGhpcy5pbnMgPSBvYnNlcnZhYmxlO1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08VD4pIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5fc3ViID0gdGhpcy5pbnMuc3Vic2NyaWJlKG5ldyBPYnNlcnZlcihvdXQpKTtcbiAgICBpZiAoIXRoaXMuYWN0aXZlKSB0aGlzLl9zdWIudW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIF9zdG9wKCkge1xuICAgIGlmICh0aGlzLl9zdWIpIHRoaXMuX3N1Yi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXJnZVNpZ25hdHVyZSB7XG4gICgpOiBTdHJlYW08YW55PjtcbiAgPFQxPihzMTogU3RyZWFtPFQxPik6IFN0cmVhbTxUMT47XG4gIDxUMSwgVDI+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+KTogU3RyZWFtPFQxIHwgVDI+O1xuICA8VDEsIFQyLCBUMz4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4pOiBTdHJlYW08VDEgfCBUMiB8IFQzPjtcbiAgPFQxLCBUMiwgVDMsIFQ0PihcbiAgICBzMTogU3RyZWFtPFQxPixcbiAgICBzMjogU3RyZWFtPFQyPixcbiAgICBzMzogU3RyZWFtPFQzPixcbiAgICBzNDogU3RyZWFtPFQ0Pik6IFN0cmVhbTxUMSB8IFQyIHwgVDMgfCBUND47XG4gIDxUMSwgVDIsIFQzLCBUNCwgVDU+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+LFxuICAgIHMzOiBTdHJlYW08VDM+LFxuICAgIHM0OiBTdHJlYW08VDQ+LFxuICAgIHM1OiBTdHJlYW08VDU+KTogU3RyZWFtPFQxIHwgVDIgfCBUMyB8IFQ0IHwgVDU+O1xuICA8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4pOiBTdHJlYW08VDEgfCBUMiB8IFQzIHwgVDQgfCBUNSB8IFQ2PjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3PihcbiAgICBzMTogU3RyZWFtPFQxPixcbiAgICBzMjogU3RyZWFtPFQyPixcbiAgICBzMzogU3RyZWFtPFQzPixcbiAgICBzNDogU3RyZWFtPFQ0PixcbiAgICBzNTogU3RyZWFtPFQ1PixcbiAgICBzNjogU3RyZWFtPFQ2PixcbiAgICBzNzogU3RyZWFtPFQ3Pik6IFN0cmVhbTxUMSB8IFQyIHwgVDMgfCBUNCB8IFQ1IHwgVDYgfCBUNz47XG4gIDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDg+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+LFxuICAgIHMzOiBTdHJlYW08VDM+LFxuICAgIHM0OiBTdHJlYW08VDQ+LFxuICAgIHM1OiBTdHJlYW08VDU+LFxuICAgIHM2OiBTdHJlYW08VDY+LFxuICAgIHM3OiBTdHJlYW08VDc+LFxuICAgIHM4OiBTdHJlYW08VDg+KTogU3RyZWFtPFQxIHwgVDIgfCBUMyB8IFQ0IHwgVDUgfCBUNiB8IFQ3IHwgVDg+O1xuICA8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4sXG4gICAgczc6IFN0cmVhbTxUNz4sXG4gICAgczg6IFN0cmVhbTxUOD4sXG4gICAgczk6IFN0cmVhbTxUOT4pOiBTdHJlYW08VDEgfCBUMiB8IFQzIHwgVDQgfCBUNSB8IFQ2IHwgVDcgfCBUOCB8IFQ5PjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMD4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4sXG4gICAgczc6IFN0cmVhbTxUNz4sXG4gICAgczg6IFN0cmVhbTxUOD4sXG4gICAgczk6IFN0cmVhbTxUOT4sXG4gICAgczEwOiBTdHJlYW08VDEwPik6IFN0cmVhbTxUMSB8IFQyIHwgVDMgfCBUNCB8IFQ1IHwgVDYgfCBUNyB8IFQ4IHwgVDkgfCBUMTA+O1xuICA8VD4oLi4uc3RyZWFtOiBBcnJheTxTdHJlYW08VD4+KTogU3RyZWFtPFQ+O1xufVxuXG5jbGFzcyBNZXJnZTxUPiBpbXBsZW1lbnRzIEFnZ3JlZ2F0b3I8VCwgVD4sIEludGVybmFsTGlzdGVuZXI8VD4ge1xuICBwdWJsaWMgdHlwZSA9ICdtZXJnZSc7XG4gIHB1YmxpYyBpbnNBcnI6IEFycmF5PFN0cmVhbTxUPj47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxUPjtcbiAgcHJpdmF0ZSBhYzogbnVtYmVyOyAvLyBhYyBpcyBhY3RpdmVDb3VudFxuXG4gIGNvbnN0cnVjdG9yKGluc0FycjogQXJyYXk8U3RyZWFtPFQ+Pikge1xuICAgIHRoaXMuaW5zQXJyID0gaW5zQXJyO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICAgIHRoaXMuYWMgPSAwO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogU3RyZWFtPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vdXQgPSBvdXQ7XG4gICAgY29uc3QgcyA9IHRoaXMuaW5zQXJyO1xuICAgIGNvbnN0IEwgPSBzLmxlbmd0aDtcbiAgICB0aGlzLmFjID0gTDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEw7IGkrKykgc1tpXS5fYWRkKHRoaXMpO1xuICB9XG5cbiAgX3N0b3AoKTogdm9pZCB7XG4gICAgY29uc3QgcyA9IHRoaXMuaW5zQXJyO1xuICAgIGNvbnN0IEwgPSBzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEw7IGkrKykgc1tpXS5fcmVtb3ZlKHRoaXMpO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICB9XG5cbiAgX24odDogVCkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICB1Ll9uKHQpO1xuICB9XG5cbiAgX2UoZXJyOiBhbnkpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgdS5fZShlcnIpO1xuICB9XG5cbiAgX2MoKSB7XG4gICAgaWYgKC0tdGhpcy5hYyA8PSAwKSB7XG4gICAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICAgIHUuX2MoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21iaW5lU2lnbmF0dXJlIHtcbiAgKCk6IFN0cmVhbTxBcnJheTxhbnk+PjtcbiAgPFQxPihzMTogU3RyZWFtPFQxPik6IFN0cmVhbTxbVDFdPjtcbiAgPFQxLCBUMj4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4pOiBTdHJlYW08W1QxLCBUMl0+O1xuICA8VDEsIFQyLCBUMz4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4pOiBTdHJlYW08W1QxLCBUMiwgVDNdPjtcbiAgPFQxLCBUMiwgVDMsIFQ0PihcbiAgICBzMTogU3RyZWFtPFQxPixcbiAgICBzMjogU3RyZWFtPFQyPixcbiAgICBzMzogU3RyZWFtPFQzPixcbiAgICBzNDogU3RyZWFtPFQ0Pik6IFN0cmVhbTxbVDEsIFQyLCBUMywgVDRdPjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNT4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4pOiBTdHJlYW08W1QxLCBUMiwgVDMsIFQ0LCBUNV0+O1xuICA8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4pOiBTdHJlYW08W1QxLCBUMiwgVDMsIFQ0LCBUNSwgVDZdPjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3PihcbiAgICBzMTogU3RyZWFtPFQxPixcbiAgICBzMjogU3RyZWFtPFQyPixcbiAgICBzMzogU3RyZWFtPFQzPixcbiAgICBzNDogU3RyZWFtPFQ0PixcbiAgICBzNTogU3RyZWFtPFQ1PixcbiAgICBzNjogU3RyZWFtPFQ2PixcbiAgICBzNzogU3RyZWFtPFQ3Pik6IFN0cmVhbTxbVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDddPjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOD4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4sXG4gICAgczc6IFN0cmVhbTxUNz4sXG4gICAgczg6IFN0cmVhbTxUOD4pOiBTdHJlYW08W1QxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOF0+O1xuICA8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4sXG4gICAgczc6IFN0cmVhbTxUNz4sXG4gICAgczg6IFN0cmVhbTxUOD4sXG4gICAgczk6IFN0cmVhbTxUOT4pOiBTdHJlYW08W1QxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDldPjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMD4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4sXG4gICAgczc6IFN0cmVhbTxUNz4sXG4gICAgczg6IFN0cmVhbTxUOD4sXG4gICAgczk6IFN0cmVhbTxUOT4sXG4gICAgczEwOiBTdHJlYW08VDEwPik6IFN0cmVhbTxbVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwXT47XG4gICguLi5zdHJlYW06IEFycmF5PFN0cmVhbTxhbnk+Pik6IFN0cmVhbTxBcnJheTxhbnk+Pjtcbn1cblxuY2xhc3MgQ29tYmluZUxpc3RlbmVyPFQ+IGltcGxlbWVudHMgSW50ZXJuYWxMaXN0ZW5lcjxUPiwgT3V0U2VuZGVyPEFycmF5PFQ+PiB7XG4gIHByaXZhdGUgaTogbnVtYmVyO1xuICBwdWJsaWMgb3V0OiBTdHJlYW08QXJyYXk8VD4+O1xuICBwcml2YXRlIHA6IENvbWJpbmU8VD47XG5cbiAgY29uc3RydWN0b3IoaTogbnVtYmVyLCBvdXQ6IFN0cmVhbTxBcnJheTxUPj4sIHA6IENvbWJpbmU8VD4pIHtcbiAgICB0aGlzLmkgPSBpO1xuICAgIHRoaXMub3V0ID0gb3V0O1xuICAgIHRoaXMucCA9IHA7XG4gICAgcC5pbHMucHVzaCh0aGlzKTtcbiAgfVxuXG4gIF9uKHQ6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBwID0gdGhpcy5wLCBvdXQgPSB0aGlzLm91dDtcbiAgICBpZiAob3V0ID09PSBOTykgcmV0dXJuO1xuICAgIGlmIChwLnVwKHQsIHRoaXMuaSkpIHtcbiAgICAgIGNvbnN0IGEgPSBwLnZhbHM7XG4gICAgICBjb25zdCBsID0gYS5sZW5ndGg7XG4gICAgICBjb25zdCBiID0gQXJyYXkobCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7ICsraSkgYltpXSA9IGFbaV07XG4gICAgICBvdXQuX24oYik7XG4gICAgfVxuICB9XG5cbiAgX2UoZXJyOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBvdXQgPSB0aGlzLm91dDtcbiAgICBpZiAob3V0ID09PSBOTykgcmV0dXJuO1xuICAgIG91dC5fZShlcnIpO1xuICB9XG5cbiAgX2MoKTogdm9pZCB7XG4gICAgY29uc3QgcCA9IHRoaXMucDtcbiAgICBpZiAocC5vdXQgPT09IE5PKSByZXR1cm47XG4gICAgaWYgKC0tcC5OYyA9PT0gMCkgcC5vdXQuX2MoKTtcbiAgfVxufVxuXG5jbGFzcyBDb21iaW5lPFI+IGltcGxlbWVudHMgQWdncmVnYXRvcjxhbnksIEFycmF5PFI+PiB7XG4gIHB1YmxpYyB0eXBlID0gJ2NvbWJpbmUnO1xuICBwdWJsaWMgaW5zQXJyOiBBcnJheTxTdHJlYW08YW55Pj47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxBcnJheTxSPj47XG4gIHB1YmxpYyBpbHM6IEFycmF5PENvbWJpbmVMaXN0ZW5lcjxhbnk+PjtcbiAgcHVibGljIE5jOiBudW1iZXI7IC8vICpOKnVtYmVyIG9mIHN0cmVhbXMgc3RpbGwgdG8gc2VuZCAqYypvbXBsZXRlXG4gIHB1YmxpYyBObjogbnVtYmVyOyAvLyAqTip1bWJlciBvZiBzdHJlYW1zIHN0aWxsIHRvIHNlbmQgKm4qZXh0XG4gIHB1YmxpYyB2YWxzOiBBcnJheTxSPjtcblxuICBjb25zdHJ1Y3RvcihpbnNBcnI6IEFycmF5PFN0cmVhbTxhbnk+Pikge1xuICAgIHRoaXMuaW5zQXJyID0gaW5zQXJyO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPEFycmF5PFI+PjtcbiAgICB0aGlzLmlscyA9IFtdO1xuICAgIHRoaXMuTmMgPSB0aGlzLk5uID0gMDtcbiAgICB0aGlzLnZhbHMgPSBbXTtcbiAgfVxuXG4gIHVwKHQ6IGFueSwgaTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdiA9IHRoaXMudmFsc1tpXTtcbiAgICBjb25zdCBObiA9ICF0aGlzLk5uID8gMCA6IHYgPT09IE5PID8gLS10aGlzLk5uIDogdGhpcy5ObjtcbiAgICB0aGlzLnZhbHNbaV0gPSB0O1xuICAgIHJldHVybiBObiA9PT0gMDtcbiAgfVxuXG4gIF9zdGFydChvdXQ6IFN0cmVhbTxBcnJheTxSPj4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICBjb25zdCBzID0gdGhpcy5pbnNBcnI7XG4gICAgY29uc3QgbiA9IHRoaXMuTmMgPSB0aGlzLk5uID0gcy5sZW5ndGg7XG4gICAgY29uc3QgdmFscyA9IHRoaXMudmFscyA9IG5ldyBBcnJheShuKTtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgb3V0Ll9uKFtdKTtcbiAgICAgIG91dC5fYygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YWxzW2ldID0gTk87XG4gICAgICAgIHNbaV0uX2FkZChuZXcgQ29tYmluZUxpc3RlbmVyKGksIG91dCwgdGhpcykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIGNvbnN0IHMgPSB0aGlzLmluc0FycjtcbiAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgY29uc3QgaWxzID0gdGhpcy5pbHM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHNbaV0uX3JlbW92ZShpbHNbaV0pO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPEFycmF5PFI+PjtcbiAgICB0aGlzLmlscyA9IFtdO1xuICAgIHRoaXMudmFscyA9IFtdO1xuICB9XG59XG5cbmNsYXNzIEZyb21BcnJheTxUPiBpbXBsZW1lbnRzIEludGVybmFsUHJvZHVjZXI8VD4ge1xuICBwdWJsaWMgdHlwZSA9ICdmcm9tQXJyYXknO1xuICBwdWJsaWMgYTogQXJyYXk8VD47XG5cbiAgY29uc3RydWN0b3IoYTogQXJyYXk8VD4pIHtcbiAgICB0aGlzLmEgPSBhO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogSW50ZXJuYWxMaXN0ZW5lcjxUPik6IHZvaWQge1xuICAgIGNvbnN0IGEgPSB0aGlzLmE7XG4gICAgZm9yIChsZXQgaSA9IDAsIG4gPSBhLmxlbmd0aDsgaSA8IG47IGkrKykgb3V0Ll9uKGFbaV0pO1xuICAgIG91dC5fYygpO1xuICB9XG5cbiAgX3N0b3AoKTogdm9pZCB7XG4gIH1cbn1cblxuY2xhc3MgRnJvbVByb21pc2U8VD4gaW1wbGVtZW50cyBJbnRlcm5hbFByb2R1Y2VyPFQ+IHtcbiAgcHVibGljIHR5cGUgPSAnZnJvbVByb21pc2UnO1xuICBwdWJsaWMgb246IGJvb2xlYW47XG4gIHB1YmxpYyBwOiBQcm9taXNlTGlrZTxUPjtcblxuICBjb25zdHJ1Y3RvcihwOiBQcm9taXNlTGlrZTxUPikge1xuICAgIHRoaXMub24gPSBmYWxzZTtcbiAgICB0aGlzLnAgPSBwO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogSW50ZXJuYWxMaXN0ZW5lcjxUPik6IHZvaWQge1xuICAgIGNvbnN0IHByb2QgPSB0aGlzO1xuICAgIHRoaXMub24gPSB0cnVlO1xuICAgIHRoaXMucC50aGVuKFxuICAgICAgKHY6IFQpID0+IHtcbiAgICAgICAgaWYgKHByb2Qub24pIHtcbiAgICAgICAgICBvdXQuX24odik7XG4gICAgICAgICAgb3V0Ll9jKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAoZTogYW55KSA9PiB7XG4gICAgICAgIG91dC5fZShlKTtcbiAgICAgIH0sXG4gICAgKS50aGVuKG5vb3AsIChlcnI6IGFueSkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRocm93IGVycjsgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfc3RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLm9uID0gZmFsc2U7XG4gIH1cbn1cblxuY2xhc3MgUGVyaW9kaWMgaW1wbGVtZW50cyBJbnRlcm5hbFByb2R1Y2VyPG51bWJlcj4ge1xuICBwdWJsaWMgdHlwZSA9ICdwZXJpb2RpYyc7XG4gIHB1YmxpYyBwZXJpb2Q6IG51bWJlcjtcbiAgcHJpdmF0ZSBpbnRlcnZhbElEOiBhbnk7XG4gIHByaXZhdGUgaTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHBlcmlvZDogbnVtYmVyKSB7XG4gICAgdGhpcy5wZXJpb2QgPSBwZXJpb2Q7XG4gICAgdGhpcy5pbnRlcnZhbElEID0gLTE7XG4gICAgdGhpcy5pID0gMDtcbiAgfVxuXG4gIF9zdGFydChvdXQ6IEludGVybmFsTGlzdGVuZXI8bnVtYmVyPik6IHZvaWQge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIGludGVydmFsSGFuZGxlcigpIHsgb3V0Ll9uKHNlbGYuaSsrKTsgfVxuICAgIHRoaXMuaW50ZXJ2YWxJRCA9IHNldEludGVydmFsKGludGVydmFsSGFuZGxlciwgdGhpcy5wZXJpb2QpO1xuICB9XG5cbiAgX3N0b3AoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWxJRCAhPT0gLTEpIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElEKTtcbiAgICB0aGlzLmludGVydmFsSUQgPSAtMTtcbiAgICB0aGlzLmkgPSAwO1xuICB9XG59XG5cbmNsYXNzIERlYnVnPFQ+IGltcGxlbWVudHMgT3BlcmF0b3I8VCwgVD4ge1xuICBwdWJsaWMgdHlwZSA9ICdkZWJ1Zyc7XG4gIHB1YmxpYyBpbnM6IFN0cmVhbTxUPjtcbiAgcHVibGljIG91dDogU3RyZWFtPFQ+O1xuICBwcml2YXRlIHM6ICh0OiBUKSA9PiBhbnk7IC8vIHNweVxuICBwcml2YXRlIGw6IHN0cmluZzsgLy8gbGFiZWxcblxuICBjb25zdHJ1Y3RvcihpbnM6IFN0cmVhbTxUPik7XG4gIGNvbnN0cnVjdG9yKGluczogU3RyZWFtPFQ+LCBhcmc/OiBzdHJpbmcpO1xuICBjb25zdHJ1Y3RvcihpbnM6IFN0cmVhbTxUPiwgYXJnPzogKHQ6IFQpID0+IGFueSk7XG4gIGNvbnN0cnVjdG9yKGluczogU3RyZWFtPFQ+LCBhcmc/OiBzdHJpbmcgfCAoKHQ6IFQpID0+IGFueSkpO1xuICBjb25zdHJ1Y3RvcihpbnM6IFN0cmVhbTxUPiwgYXJnPzogc3RyaW5nIHwgKCh0OiBUKSA9PiBhbnkpIHwgdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5pbnMgPSBpbnM7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy5zID0gbm9vcDtcbiAgICB0aGlzLmwgPSAnJztcbiAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHRoaXMubCA9IGFyZzsgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5zID0gYXJnO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogU3RyZWFtPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vdXQgPSBvdXQ7XG4gICAgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gIH1cblxuICBfbih0OiBUKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIGNvbnN0IHMgPSB0aGlzLnMsIGwgPSB0aGlzLmw7XG4gICAgaWYgKHMgIT09IG5vb3ApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHModCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHUuX2UoZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsKSBjb25zb2xlLmxvZyhsICsgJzonLCB0KTsgZWxzZSBjb25zb2xlLmxvZyh0KTtcbiAgICB1Ll9uKHQpO1xuICB9XG5cbiAgX2UoZXJyOiBhbnkpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgdS5fZShlcnIpO1xuICB9XG5cbiAgX2MoKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2MoKTtcbiAgfVxufVxuXG5jbGFzcyBEcm9wPFQ+IGltcGxlbWVudHMgT3BlcmF0b3I8VCwgVD4ge1xuICBwdWJsaWMgdHlwZSA9ICdkcm9wJztcbiAgcHVibGljIGluczogU3RyZWFtPFQ+O1xuICBwdWJsaWMgb3V0OiBTdHJlYW08VD47XG4gIHB1YmxpYyBtYXg6IG51bWJlcjtcbiAgcHJpdmF0ZSBkcm9wcGVkOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IobWF4OiBudW1iZXIsIGluczogU3RyZWFtPFQ+KSB7XG4gICAgdGhpcy5pbnMgPSBpbnM7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy5tYXggPSBtYXg7XG4gICAgdGhpcy5kcm9wcGVkID0gMDtcbiAgfVxuXG4gIF9zdGFydChvdXQ6IFN0cmVhbTxUPik6IHZvaWQge1xuICAgIHRoaXMub3V0ID0gb3V0O1xuICAgIHRoaXMuZHJvcHBlZCA9IDA7XG4gICAgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gIH1cblxuICBfbih0OiBUKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIGlmICh0aGlzLmRyb3BwZWQrKyA+PSB0aGlzLm1heCkgdS5fbih0KTtcbiAgfVxuXG4gIF9lKGVycjogYW55KSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2UoZXJyKTtcbiAgfVxuXG4gIF9jKCkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICB1Ll9jKCk7XG4gIH1cbn1cblxuY2xhc3MgRW5kV2hlbkxpc3RlbmVyPFQ+IGltcGxlbWVudHMgSW50ZXJuYWxMaXN0ZW5lcjxhbnk+IHtcbiAgcHJpdmF0ZSBvdXQ6IFN0cmVhbTxUPjtcbiAgcHJpdmF0ZSBvcDogRW5kV2hlbjxUPjtcblxuICBjb25zdHJ1Y3RvcihvdXQ6IFN0cmVhbTxUPiwgb3A6IEVuZFdoZW48VD4pIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLm9wID0gb3A7XG4gIH1cblxuICBfbigpIHtcbiAgICB0aGlzLm9wLmVuZCgpO1xuICB9XG5cbiAgX2UoZXJyOiBhbnkpIHtcbiAgICB0aGlzLm91dC5fZShlcnIpO1xuICB9XG5cbiAgX2MoKSB7XG4gICAgdGhpcy5vcC5lbmQoKTtcbiAgfVxufVxuXG5jbGFzcyBFbmRXaGVuPFQ+IGltcGxlbWVudHMgT3BlcmF0b3I8VCwgVD4ge1xuICBwdWJsaWMgdHlwZSA9ICdlbmRXaGVuJztcbiAgcHVibGljIGluczogU3RyZWFtPFQ+O1xuICBwdWJsaWMgb3V0OiBTdHJlYW08VD47XG4gIHB1YmxpYyBvOiBTdHJlYW08YW55PjsgLy8gbyA9IG90aGVyXG4gIHByaXZhdGUgb2lsOiBJbnRlcm5hbExpc3RlbmVyPGFueT47IC8vIG9pbCA9IG90aGVyIEludGVybmFsTGlzdGVuZXJcblxuICBjb25zdHJ1Y3RvcihvOiBTdHJlYW08YW55PiwgaW5zOiBTdHJlYW08VD4pIHtcbiAgICB0aGlzLmlucyA9IGlucztcbiAgICB0aGlzLm91dCA9IE5PIGFzIFN0cmVhbTxUPjtcbiAgICB0aGlzLm8gPSBvO1xuICAgIHRoaXMub2lsID0gTk9fSUw7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08VD4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLm8uX2FkZCh0aGlzLm9pbCA9IG5ldyBFbmRXaGVuTGlzdGVuZXIob3V0LCB0aGlzKSk7XG4gICAgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vLl9yZW1vdmUodGhpcy5vaWwpO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICAgIHRoaXMub2lsID0gTk9fSUw7XG4gIH1cblxuICBlbmQoKTogdm9pZCB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2MoKTtcbiAgfVxuXG4gIF9uKHQ6IFQpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgdS5fbih0KTtcbiAgfVxuXG4gIF9lKGVycjogYW55KSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2UoZXJyKTtcbiAgfVxuXG4gIF9jKCkge1xuICAgIHRoaXMuZW5kKCk7XG4gIH1cbn1cblxuY2xhc3MgRmlsdGVyPFQ+IGltcGxlbWVudHMgT3BlcmF0b3I8VCwgVD4ge1xuICBwdWJsaWMgdHlwZSA9ICdmaWx0ZXInO1xuICBwdWJsaWMgaW5zOiBTdHJlYW08VD47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxUPjtcbiAgcHVibGljIGY6ICh0OiBUKSA9PiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHBhc3NlczogKHQ6IFQpID0+IGJvb2xlYW4sIGluczogU3RyZWFtPFQ+KSB7XG4gICAgdGhpcy5pbnMgPSBpbnM7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy5mID0gcGFzc2VzO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogU3RyZWFtPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vdXQgPSBvdXQ7XG4gICAgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gIH1cblxuICBfbih0OiBUKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIGNvbnN0IHIgPSBfdHJ5KHRoaXMsIHQsIHUpO1xuICAgIGlmIChyID09PSBOTyB8fCAhcikgcmV0dXJuO1xuICAgIHUuX24odCk7XG4gIH1cblxuICBfZShlcnI6IGFueSkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICB1Ll9lKGVycik7XG4gIH1cblxuICBfYygpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgdS5fYygpO1xuICB9XG59XG5cbmNsYXNzIEZsYXR0ZW5MaXN0ZW5lcjxUPiBpbXBsZW1lbnRzIEludGVybmFsTGlzdGVuZXI8VD4ge1xuICBwcml2YXRlIG91dDogU3RyZWFtPFQ+O1xuICBwcml2YXRlIG9wOiBGbGF0dGVuPFQ+O1xuXG4gIGNvbnN0cnVjdG9yKG91dDogU3RyZWFtPFQ+LCBvcDogRmxhdHRlbjxUPikge1xuICAgIHRoaXMub3V0ID0gb3V0O1xuICAgIHRoaXMub3AgPSBvcDtcbiAgfVxuXG4gIF9uKHQ6IFQpIHtcbiAgICB0aGlzLm91dC5fbih0KTtcbiAgfVxuXG4gIF9lKGVycjogYW55KSB7XG4gICAgdGhpcy5vdXQuX2UoZXJyKTtcbiAgfVxuXG4gIF9jKCkge1xuICAgIHRoaXMub3AuaW5uZXIgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy5vcC5sZXNzKCk7XG4gIH1cbn1cblxuY2xhc3MgRmxhdHRlbjxUPiBpbXBsZW1lbnRzIE9wZXJhdG9yPFN0cmVhbTxUPiwgVD4ge1xuICBwdWJsaWMgdHlwZSA9ICdmbGF0dGVuJztcbiAgcHVibGljIGluczogU3RyZWFtPFN0cmVhbTxUPj47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxUPjtcbiAgcHJpdmF0ZSBvcGVuOiBib29sZWFuO1xuICBwdWJsaWMgaW5uZXI6IFN0cmVhbTxUPjsgLy8gQ3VycmVudCBpbm5lciBTdHJlYW1cbiAgcHJpdmF0ZSBpbDogSW50ZXJuYWxMaXN0ZW5lcjxUPjsgLy8gQ3VycmVudCBpbm5lciBJbnRlcm5hbExpc3RlbmVyXG5cbiAgY29uc3RydWN0b3IoaW5zOiBTdHJlYW08U3RyZWFtPFQ+Pikge1xuICAgIHRoaXMuaW5zID0gaW5zO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgdGhpcy5pbm5lciA9IE5PIGFzIFN0cmVhbTxUPjtcbiAgICB0aGlzLmlsID0gTk9fSUw7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08VD4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLm9wZW4gPSB0cnVlO1xuICAgIHRoaXMuaW5uZXIgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy5pbCA9IE5PX0lMO1xuICAgIHRoaXMuaW5zLl9hZGQodGhpcyk7XG4gIH1cblxuICBfc3RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLmlucy5fcmVtb3ZlKHRoaXMpO1xuICAgIGlmICh0aGlzLmlubmVyICE9PSBOTykgdGhpcy5pbm5lci5fcmVtb3ZlKHRoaXMuaWwpO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgdGhpcy5pbm5lciA9IE5PIGFzIFN0cmVhbTxUPjtcbiAgICB0aGlzLmlsID0gTk9fSUw7XG4gIH1cblxuICBsZXNzKCk6IHZvaWQge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICBpZiAoIXRoaXMub3BlbiAmJiB0aGlzLmlubmVyID09PSBOTykgdS5fYygpO1xuICB9XG5cbiAgX24oczogU3RyZWFtPFQ+KSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIGNvbnN0IHtpbm5lciwgaWx9ID0gdGhpcztcbiAgICBpZiAoaW5uZXIgIT09IE5PICYmIGlsICE9PSBOT19JTCkgaW5uZXIuX3JlbW92ZShpbCk7XG4gICAgKHRoaXMuaW5uZXIgPSBzKS5fYWRkKHRoaXMuaWwgPSBuZXcgRmxhdHRlbkxpc3RlbmVyKHUsIHRoaXMpKTtcbiAgfVxuXG4gIF9lKGVycjogYW55KSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2UoZXJyKTtcbiAgfVxuXG4gIF9jKCkge1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIHRoaXMubGVzcygpO1xuICB9XG59XG5cbmNsYXNzIEZvbGQ8VCwgUj4gaW1wbGVtZW50cyBPcGVyYXRvcjxULCBSPiB7XG4gIHB1YmxpYyB0eXBlID0gJ2ZvbGQnO1xuICBwdWJsaWMgaW5zOiBTdHJlYW08VD47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxSPjtcbiAgcHVibGljIGY6ICh0OiBUKSA9PiBSO1xuICBwdWJsaWMgc2VlZDogUjtcbiAgcHJpdmF0ZSBhY2M6IFI7IC8vIGluaXRpYWxpemVkIGFzIHNlZWRcblxuICBjb25zdHJ1Y3RvcihmOiAoYWNjOiBSLCB0OiBUKSA9PiBSLCBzZWVkOiBSLCBpbnM6IFN0cmVhbTxUPikge1xuICAgIHRoaXMuaW5zID0gaW5zO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFI+O1xuICAgIHRoaXMuZiA9ICh0OiBUKSA9PiBmKHRoaXMuYWNjLCB0KTtcbiAgICB0aGlzLmFjYyA9IHRoaXMuc2VlZCA9IHNlZWQ7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08Uj4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLmFjYyA9IHRoaXMuc2VlZDtcbiAgICBvdXQuX24odGhpcy5hY2MpO1xuICAgIHRoaXMuaW5zLl9hZGQodGhpcyk7XG4gIH1cblxuICBfc3RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLmlucy5fcmVtb3ZlKHRoaXMpO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFI+O1xuICAgIHRoaXMuYWNjID0gdGhpcy5zZWVkO1xuICB9XG5cbiAgX24odDogVCkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICBjb25zdCByID0gX3RyeSh0aGlzLCB0LCB1KTtcbiAgICBpZiAociA9PT0gTk8pIHJldHVybjtcbiAgICB1Ll9uKHRoaXMuYWNjID0gciBhcyBSKTtcbiAgfVxuXG4gIF9lKGVycjogYW55KSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2UoZXJyKTtcbiAgfVxuXG4gIF9jKCkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICB1Ll9jKCk7XG4gIH1cbn1cblxuY2xhc3MgTGFzdDxUPiBpbXBsZW1lbnRzIE9wZXJhdG9yPFQsIFQ+IHtcbiAgcHVibGljIHR5cGUgPSAnbGFzdCc7XG4gIHB1YmxpYyBpbnM6IFN0cmVhbTxUPjtcbiAgcHVibGljIG91dDogU3RyZWFtPFQ+O1xuICBwcml2YXRlIGhhczogYm9vbGVhbjtcbiAgcHJpdmF0ZSB2YWw6IFQ7XG5cbiAgY29uc3RydWN0b3IoaW5zOiBTdHJlYW08VD4pIHtcbiAgICB0aGlzLmlucyA9IGlucztcbiAgICB0aGlzLm91dCA9IE5PIGFzIFN0cmVhbTxUPjtcbiAgICB0aGlzLmhhcyA9IGZhbHNlO1xuICAgIHRoaXMudmFsID0gTk8gYXMgVDtcbiAgfVxuXG4gIF9zdGFydChvdXQ6IFN0cmVhbTxUPik6IHZvaWQge1xuICAgIHRoaXMub3V0ID0gb3V0O1xuICAgIHRoaXMuaGFzID0gZmFsc2U7XG4gICAgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy52YWwgPSBOTyBhcyBUO1xuICB9XG5cbiAgX24odDogVCkge1xuICAgIHRoaXMuaGFzID0gdHJ1ZTtcbiAgICB0aGlzLnZhbCA9IHQ7XG4gIH1cblxuICBfZShlcnI6IGFueSkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICB1Ll9lKGVycik7XG4gIH1cblxuICBfYygpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgaWYgKHRoaXMuaGFzKSB7XG4gICAgICB1Ll9uKHRoaXMudmFsKTtcbiAgICAgIHUuX2MoKTtcbiAgICB9IGVsc2UgdS5fZShuZXcgRXJyb3IoJ2xhc3QoKSBmYWlsZWQgYmVjYXVzZSBpbnB1dCBzdHJlYW0gY29tcGxldGVkJykpO1xuICB9XG59XG5cbmNsYXNzIE1hcE9wPFQsIFI+IGltcGxlbWVudHMgT3BlcmF0b3I8VCwgUj4ge1xuICBwdWJsaWMgdHlwZSA9ICdtYXAnO1xuICBwdWJsaWMgaW5zOiBTdHJlYW08VD47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxSPjtcbiAgcHVibGljIGY6ICh0OiBUKSA9PiBSO1xuXG4gIGNvbnN0cnVjdG9yKHByb2plY3Q6ICh0OiBUKSA9PiBSLCBpbnM6IFN0cmVhbTxUPikge1xuICAgIHRoaXMuaW5zID0gaW5zO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFI+O1xuICAgIHRoaXMuZiA9IHByb2plY3Q7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08Uj4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLmlucy5fYWRkKHRoaXMpO1xuICB9XG5cbiAgX3N0b3AoKTogdm9pZCB7XG4gICAgdGhpcy5pbnMuX3JlbW92ZSh0aGlzKTtcbiAgICB0aGlzLm91dCA9IE5PIGFzIFN0cmVhbTxSPjtcbiAgfVxuXG4gIF9uKHQ6IFQpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgY29uc3QgciA9IF90cnkodGhpcywgdCwgdSk7XG4gICAgaWYgKHIgPT09IE5PKSByZXR1cm47XG4gICAgdS5fbihyIGFzIFIpO1xuICB9XG5cbiAgX2UoZXJyOiBhbnkpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgdS5fZShlcnIpO1xuICB9XG5cbiAgX2MoKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2MoKTtcbiAgfVxufVxuXG5jbGFzcyBSZW1lbWJlcjxUPiBpbXBsZW1lbnRzIEludGVybmFsUHJvZHVjZXI8VD4ge1xuICBwdWJsaWMgdHlwZSA9ICdyZW1lbWJlcic7XG4gIHB1YmxpYyBpbnM6IFN0cmVhbTxUPjtcbiAgcHVibGljIG91dDogU3RyZWFtPFQ+O1xuXG4gIGNvbnN0cnVjdG9yKGluczogU3RyZWFtPFQ+KSB7XG4gICAgdGhpcy5pbnMgPSBpbnM7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08VD4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLmlucy5fYWRkKG91dCk7XG4gIH1cblxuICBfc3RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLmlucy5fcmVtb3ZlKHRoaXMub3V0KTtcbiAgICB0aGlzLm91dCA9IE5PIGFzIFN0cmVhbTxUPjtcbiAgfVxufVxuXG5jbGFzcyBSZXBsYWNlRXJyb3I8VD4gaW1wbGVtZW50cyBPcGVyYXRvcjxULCBUPiB7XG4gIHB1YmxpYyB0eXBlID0gJ3JlcGxhY2VFcnJvcic7XG4gIHB1YmxpYyBpbnM6IFN0cmVhbTxUPjtcbiAgcHVibGljIG91dDogU3RyZWFtPFQ+O1xuICBwdWJsaWMgZjogKGVycjogYW55KSA9PiBTdHJlYW08VD47XG5cbiAgY29uc3RydWN0b3IocmVwbGFjZXI6IChlcnI6IGFueSkgPT4gU3RyZWFtPFQ+LCBpbnM6IFN0cmVhbTxUPikge1xuICAgIHRoaXMuaW5zID0gaW5zO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICAgIHRoaXMuZiA9IHJlcGxhY2VyO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogU3RyZWFtPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vdXQgPSBvdXQ7XG4gICAgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gIH1cblxuICBfbih0OiBUKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX24odCk7XG4gIH1cblxuICBfZShlcnI6IGFueSkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAodSA9PT0gTk8pIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgdGhpcy5pbnMuX3JlbW92ZSh0aGlzKTtcbiAgICAgICh0aGlzLmlucyA9IHRoaXMuZihlcnIpKS5fYWRkKHRoaXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHUuX2UoZSk7XG4gICAgfVxuICB9XG5cbiAgX2MoKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2MoKTtcbiAgfVxufVxuXG5jbGFzcyBTdGFydFdpdGg8VD4gaW1wbGVtZW50cyBJbnRlcm5hbFByb2R1Y2VyPFQ+IHtcbiAgcHVibGljIHR5cGUgPSAnc3RhcnRXaXRoJztcbiAgcHVibGljIGluczogU3RyZWFtPFQ+O1xuICBwdWJsaWMgb3V0OiBTdHJlYW08VD47XG4gIHB1YmxpYyB2YWw6IFQ7XG5cbiAgY29uc3RydWN0b3IoaW5zOiBTdHJlYW08VD4sIHZhbDogVCkge1xuICAgIHRoaXMuaW5zID0gaW5zO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICAgIHRoaXMudmFsID0gdmFsO1xuICB9XG5cbiAgX3N0YXJ0KG91dDogU3RyZWFtPFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vdXQgPSBvdXQ7XG4gICAgdGhpcy5vdXQuX24odGhpcy52YWwpO1xuICAgIHRoaXMuaW5zLl9hZGQob3V0KTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcy5vdXQpO1xuICAgIHRoaXMub3V0ID0gTk8gYXMgU3RyZWFtPFQ+O1xuICB9XG59XG5cbmNsYXNzIFRha2U8VD4gaW1wbGVtZW50cyBPcGVyYXRvcjxULCBUPiB7XG4gIHB1YmxpYyB0eXBlID0gJ3Rha2UnO1xuICBwdWJsaWMgaW5zOiBTdHJlYW08VD47XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxUPjtcbiAgcHVibGljIG1heDogbnVtYmVyO1xuICBwcml2YXRlIHRha2VuOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IobWF4OiBudW1iZXIsIGluczogU3RyZWFtPFQ+KSB7XG4gICAgdGhpcy5pbnMgPSBpbnM7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gICAgdGhpcy5tYXggPSBtYXg7XG4gICAgdGhpcy50YWtlbiA9IDA7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08VD4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLnRha2VuID0gMDtcbiAgICBpZiAodGhpcy5tYXggPD0gMCkgb3V0Ll9jKCk7IGVsc2UgdGhpcy5pbnMuX2FkZCh0aGlzKTtcbiAgfVxuXG4gIF9zdG9wKCk6IHZvaWQge1xuICAgIHRoaXMuaW5zLl9yZW1vdmUodGhpcyk7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08VD47XG4gIH1cblxuICBfbih0OiBUKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIGNvbnN0IG0gPSArK3RoaXMudGFrZW47XG4gICAgaWYgKG0gPCB0aGlzLm1heCkgdS5fbih0KTsgZWxzZSBpZiAobSA9PT0gdGhpcy5tYXgpIHtcbiAgICAgIHUuX24odCk7XG4gICAgICB1Ll9jKCk7XG4gICAgfVxuICB9XG5cbiAgX2UoZXJyOiBhbnkpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKHUgPT09IE5PKSByZXR1cm47XG4gICAgdS5fZShlcnIpO1xuICB9XG5cbiAgX2MoKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICh1ID09PSBOTykgcmV0dXJuO1xuICAgIHUuX2MoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RyZWFtPFQ+IGltcGxlbWVudHMgSW50ZXJuYWxMaXN0ZW5lcjxUPiB7XG4gIHB1YmxpYyBfcHJvZDogSW50ZXJuYWxQcm9kdWNlcjxUPjtcbiAgcHJvdGVjdGVkIF9pbHM6IEFycmF5PEludGVybmFsTGlzdGVuZXI8VD4+OyAvLyAnaWxzJyA9IEludGVybmFsIGxpc3RlbmVyc1xuICBwcm90ZWN0ZWQgX3N0b3BJRDogYW55O1xuICBwcm90ZWN0ZWQgX2RsOiBJbnRlcm5hbExpc3RlbmVyPFQ+OyAvLyB0aGUgZGVidWcgbGlzdGVuZXJcbiAgcHJvdGVjdGVkIF9kOiBib29sZWFuOyAvLyBmbGFnIGluZGljYXRpbmcgdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZGVidWcgbGlzdGVuZXJcbiAgcHJvdGVjdGVkIF90YXJnZXQ6IFN0cmVhbTxUPjsgLy8gaW1pdGF0aW9uIHRhcmdldCBpZiB0aGlzIFN0cmVhbSB3aWxsIGltaXRhdGVcbiAgcHJvdGVjdGVkIF9lcnI6IGFueTtcblxuICBjb25zdHJ1Y3Rvcihwcm9kdWNlcj86IEludGVybmFsUHJvZHVjZXI8VD4pIHtcbiAgICB0aGlzLl9wcm9kID0gcHJvZHVjZXIgfHwgTk8gYXMgSW50ZXJuYWxQcm9kdWNlcjxUPjtcbiAgICB0aGlzLl9pbHMgPSBbXTtcbiAgICB0aGlzLl9zdG9wSUQgPSBOTztcbiAgICB0aGlzLl9kbCA9IE5PIGFzIEludGVybmFsTGlzdGVuZXI8VD47XG4gICAgdGhpcy5fZCA9IGZhbHNlO1xuICAgIHRoaXMuX3RhcmdldCA9IE5PIGFzIFN0cmVhbTxUPjtcbiAgICB0aGlzLl9lcnIgPSBOTztcbiAgfVxuXG4gIF9uKHQ6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBhID0gdGhpcy5faWxzO1xuICAgIGNvbnN0IEwgPSBhLmxlbmd0aDtcbiAgICBpZiAodGhpcy5fZCkgdGhpcy5fZGwuX24odCk7XG4gICAgaWYgKEwgPT0gMSkgYVswXS5fbih0KTsgZWxzZSBpZiAoTCA9PSAwKSByZXR1cm47IGVsc2Uge1xuICAgICAgY29uc3QgYiA9IGNwKGEpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBMOyBpKyspIGJbaV0uX24odCk7XG4gICAgfVxuICB9XG5cbiAgX2UoZXJyOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fZXJyICE9PSBOTykgcmV0dXJuO1xuICAgIHRoaXMuX2VyciA9IGVycjtcbiAgICBjb25zdCBhID0gdGhpcy5faWxzO1xuICAgIGNvbnN0IEwgPSBhLmxlbmd0aDtcbiAgICB0aGlzLl94KCk7XG4gICAgaWYgKHRoaXMuX2QpIHRoaXMuX2RsLl9lKGVycik7XG4gICAgaWYgKEwgPT0gMSkgYVswXS5fZShlcnIpOyBlbHNlIGlmIChMID09IDApIHJldHVybjsgZWxzZSB7XG4gICAgICBjb25zdCBiID0gY3AoYSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEw7IGkrKykgYltpXS5fZShlcnIpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2QgJiYgTCA9PSAwKSB0aHJvdyB0aGlzLl9lcnI7XG4gIH1cblxuICBfYygpOiB2b2lkIHtcbiAgICBjb25zdCBhID0gdGhpcy5faWxzO1xuICAgIGNvbnN0IEwgPSBhLmxlbmd0aDtcbiAgICB0aGlzLl94KCk7XG4gICAgaWYgKHRoaXMuX2QpIHRoaXMuX2RsLl9jKCk7XG4gICAgaWYgKEwgPT0gMSkgYVswXS5fYygpOyBlbHNlIGlmIChMID09IDApIHJldHVybjsgZWxzZSB7XG4gICAgICBjb25zdCBiID0gY3AoYSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEw7IGkrKykgYltpXS5fYygpO1xuICAgIH1cbiAgfVxuXG4gIF94KCk6IHZvaWQgeyAvLyB0ZWFyIGRvd24gbG9naWMsIGFmdGVyIGVycm9yIG9yIGNvbXBsZXRlXG4gICAgaWYgKHRoaXMuX2lscy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBpZiAodGhpcy5fcHJvZCAhPT0gTk8pIHRoaXMuX3Byb2QuX3N0b3AoKTtcbiAgICB0aGlzLl9lcnIgPSBOTztcbiAgICB0aGlzLl9pbHMgPSBbXTtcbiAgfVxuXG4gIF9zdG9wTm93KCkge1xuICAgIC8vIFdBUk5JTkc6IGNvZGUgdGhhdCBjYWxscyB0aGlzIG1ldGhvZCBzaG91bGRcbiAgICAvLyBmaXJzdCBjaGVjayBpZiB0aGlzLl9wcm9kIGlzIHZhbGlkIChub3QgYE5PYClcbiAgICB0aGlzLl9wcm9kLl9zdG9wKCk7XG4gICAgdGhpcy5fZXJyID0gTk87XG4gICAgdGhpcy5fc3RvcElEID0gTk87XG4gIH1cblxuICBfYWRkKGlsOiBJbnRlcm5hbExpc3RlbmVyPFQ+KTogdm9pZCB7XG4gICAgY29uc3QgdGEgPSB0aGlzLl90YXJnZXQ7XG4gICAgaWYgKHRhICE9PSBOTykgcmV0dXJuIHRhLl9hZGQoaWwpO1xuICAgIGNvbnN0IGEgPSB0aGlzLl9pbHM7XG4gICAgYS5wdXNoKGlsKTtcbiAgICBpZiAoYS5sZW5ndGggPiAxKSByZXR1cm47XG4gICAgaWYgKHRoaXMuX3N0b3BJRCAhPT0gTk8pIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9zdG9wSUQpO1xuICAgICAgdGhpcy5fc3RvcElEID0gTk87XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLl9wcm9kO1xuICAgICAgaWYgKHAgIT09IE5PKSBwLl9zdGFydCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICBfcmVtb3ZlKGlsOiBJbnRlcm5hbExpc3RlbmVyPFQ+KTogdm9pZCB7XG4gICAgY29uc3QgdGEgPSB0aGlzLl90YXJnZXQ7XG4gICAgaWYgKHRhICE9PSBOTykgcmV0dXJuIHRhLl9yZW1vdmUoaWwpO1xuICAgIGNvbnN0IGEgPSB0aGlzLl9pbHM7XG4gICAgY29uc3QgaSA9IGEuaW5kZXhPZihpbCk7XG4gICAgaWYgKGkgPiAtMSkge1xuICAgICAgYS5zcGxpY2UoaSwgMSk7XG4gICAgICBpZiAodGhpcy5fcHJvZCAhPT0gTk8gJiYgYS5sZW5ndGggPD0gMCkge1xuICAgICAgICB0aGlzLl9lcnIgPSBOTztcbiAgICAgICAgdGhpcy5fc3RvcElEID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLl9zdG9wTm93KCkpO1xuICAgICAgfSBlbHNlIGlmIChhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICB0aGlzLl9wcnVuZUN5Y2xlcygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIElmIGFsbCBwYXRocyBzdGVtbWluZyBmcm9tIGB0aGlzYCBzdHJlYW0gZXZlbnR1YWxseSBlbmQgYXQgYHRoaXNgXG4gIC8vIHN0cmVhbSwgdGhlbiB3ZSByZW1vdmUgdGhlIHNpbmdsZSBsaXN0ZW5lciBvZiBgdGhpc2Agc3RyZWFtLCB0b1xuICAvLyBmb3JjZSBpdCB0byBlbmQgaXRzIGV4ZWN1dGlvbiBhbmQgZGlzcG9zZSByZXNvdXJjZXMuIFRoaXMgbWV0aG9kXG4gIC8vIGFzc3VtZXMgYXMgYSBwcmVjb25kaXRpb24gdGhhdCB0aGlzLl9pbHMgaGFzIGp1c3Qgb25lIGxpc3RlbmVyLlxuICBfcHJ1bmVDeWNsZXMoKSB7XG4gICAgaWYgKHRoaXMuX2hhc05vU2lua3ModGhpcywgW10pKSB0aGlzLl9yZW1vdmUodGhpcy5faWxzWzBdKTtcbiAgfVxuXG4gIC8vIENoZWNrcyB3aGV0aGVyICp0aGVyZSBpcyBubyogcGF0aCBzdGFydGluZyBmcm9tIGB4YCB0aGF0IGxlYWRzIHRvIGFuIGVuZFxuICAvLyBsaXN0ZW5lciAoc2luaykgaW4gdGhlIHN0cmVhbSBncmFwaCwgZm9sbG93aW5nIGVkZ2VzIEEtPkIgd2hlcmUgQiBpcyBhXG4gIC8vIGxpc3RlbmVyIG9mIEEuIFRoaXMgbWVhbnMgdGhlc2UgcGF0aHMgY29uc3RpdHV0ZSBhIGN5Y2xlIHNvbWVob3cuIElzIGdpdmVuXG4gIC8vIGEgdHJhY2Ugb2YgYWxsIHZpc2l0ZWQgbm9kZXMgc28gZmFyLlxuICBfaGFzTm9TaW5rcyh4OiBJbnRlcm5hbExpc3RlbmVyPGFueT4sIHRyYWNlOiBBcnJheTxhbnk+KTogYm9vbGVhbiB7XG4gICAgaWYgKHRyYWNlLmluZGV4T2YoeCkgIT09IC0xKVxuICAgICAgcmV0dXJuIHRydWU7IGVsc2VcbiAgICBpZiAoKHggYXMgYW55IGFzIE91dFNlbmRlcjxhbnk+KS5vdXQgPT09IHRoaXMpXG4gICAgICByZXR1cm4gdHJ1ZTsgZWxzZVxuICAgIGlmICgoeCBhcyBhbnkgYXMgT3V0U2VuZGVyPGFueT4pLm91dCAmJiAoeCBhcyBhbnkgYXMgT3V0U2VuZGVyPGFueT4pLm91dCAhPT0gTk8pXG4gICAgICByZXR1cm4gdGhpcy5faGFzTm9TaW5rcygoeCBhcyBhbnkgYXMgT3V0U2VuZGVyPGFueT4pLm91dCwgdHJhY2UuY29uY2F0KHgpKTsgZWxzZVxuICAgIGlmICgoeCBhcyBTdHJlYW08YW55PikuX2lscykge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSAoeCBhcyBTdHJlYW08YW55PikuX2lscy5sZW5ndGg7IGkgPCBOOyBpKyspXG4gICAgICAgIGlmICghdGhpcy5faGFzTm9TaW5rcygoeCBhcyBTdHJlYW08YW55PikuX2lsc1tpXSwgdHJhY2UuY29uY2F0KHgpKSlcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBjdG9yKCk6IHR5cGVvZiBTdHJlYW0ge1xuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgTWVtb3J5U3RyZWFtID8gTWVtb3J5U3RyZWFtIDogU3RyZWFtO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBMaXN0ZW5lciB0byB0aGUgU3RyZWFtLlxuICAgKlxuICAgKiBAcGFyYW0ge0xpc3RlbmVyfSBsaXN0ZW5lclxuICAgKi9cbiAgYWRkTGlzdGVuZXIobGlzdGVuZXI6IFBhcnRpYWw8TGlzdGVuZXI8VD4+KTogdm9pZCB7XG4gICAgKGxpc3RlbmVyIGFzIEludGVybmFsTGlzdGVuZXI8VD4pLl9uID0gbGlzdGVuZXIubmV4dCB8fCBub29wO1xuICAgIChsaXN0ZW5lciBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+KS5fZSA9IGxpc3RlbmVyLmVycm9yIHx8IG5vb3A7XG4gICAgKGxpc3RlbmVyIGFzIEludGVybmFsTGlzdGVuZXI8VD4pLl9jID0gbGlzdGVuZXIuY29tcGxldGUgfHwgbm9vcDtcbiAgICB0aGlzLl9hZGQobGlzdGVuZXIgYXMgSW50ZXJuYWxMaXN0ZW5lcjxUPik7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIExpc3RlbmVyIGZyb20gdGhlIFN0cmVhbSwgYXNzdW1pbmcgdGhlIExpc3RlbmVyIHdhcyBhZGRlZCB0byBpdC5cbiAgICpcbiAgICogQHBhcmFtIHtMaXN0ZW5lcjxUPn0gbGlzdGVuZXJcbiAgICovXG4gIHJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyOiBQYXJ0aWFsPExpc3RlbmVyPFQ+Pik6IHZvaWQge1xuICAgIHRoaXMuX3JlbW92ZShsaXN0ZW5lciBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgTGlzdGVuZXIgdG8gdGhlIFN0cmVhbSByZXR1cm5pbmcgYSBTdWJzY3JpcHRpb24gdG8gcmVtb3ZlIHRoYXRcbiAgICogbGlzdGVuZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7TGlzdGVuZXJ9IGxpc3RlbmVyXG4gICAqIEByZXR1cm5zIHtTdWJzY3JpcHRpb259XG4gICAqL1xuICBzdWJzY3JpYmUobGlzdGVuZXI6IFBhcnRpYWw8TGlzdGVuZXI8VD4+KTogU3Vic2NyaXB0aW9uIHtcbiAgICB0aGlzLmFkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gbmV3IFN0cmVhbVN1YjxUPih0aGlzLCBsaXN0ZW5lciBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgaW50ZXJvcCBiZXR3ZWVuIG1vc3QuanMgYW5kIFJ4SlMgNVxuICAgKlxuICAgKiBAcmV0dXJucyB7U3RyZWFtfVxuICAgKi9cbiAgWyQkb2JzZXJ2YWJsZV0oKTogU3RyZWFtPFQ+IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFN0cmVhbSBnaXZlbiBhIFByb2R1Y2VyLlxuICAgKlxuICAgKiBAZmFjdG9yeSB0cnVlXG4gICAqIEBwYXJhbSB7UHJvZHVjZXJ9IHByb2R1Y2VyIEFuIG9wdGlvbmFsIFByb2R1Y2VyIHRoYXQgZGljdGF0ZXMgaG93IHRvXG4gICAqIHN0YXJ0LCBnZW5lcmF0ZSBldmVudHMsIGFuZCBzdG9wIHRoZSBTdHJlYW0uXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGU8VD4ocHJvZHVjZXI/OiBQcm9kdWNlcjxUPik6IFN0cmVhbTxUPiB7XG4gICAgaWYgKHByb2R1Y2VyKSB7XG4gICAgICBpZiAodHlwZW9mIHByb2R1Y2VyLnN0YXJ0ICE9PSAnZnVuY3Rpb24nXG4gICAgICB8fCB0eXBlb2YgcHJvZHVjZXIuc3RvcCAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9kdWNlciByZXF1aXJlcyBib3RoIHN0YXJ0IGFuZCBzdG9wIGZ1bmN0aW9ucycpO1xuICAgICAgaW50ZXJuYWxpemVQcm9kdWNlcihwcm9kdWNlcik7IC8vIG11dGF0ZXMgdGhlIGlucHV0XG4gICAgfVxuICAgIHJldHVybiBuZXcgU3RyZWFtKHByb2R1Y2VyIGFzIEludGVybmFsUHJvZHVjZXI8VD4gJiBQcm9kdWNlcjxUPik7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBNZW1vcnlTdHJlYW0gZ2l2ZW4gYSBQcm9kdWNlci5cbiAgICpcbiAgICogQGZhY3RvcnkgdHJ1ZVxuICAgKiBAcGFyYW0ge1Byb2R1Y2VyfSBwcm9kdWNlciBBbiBvcHRpb25hbCBQcm9kdWNlciB0aGF0IGRpY3RhdGVzIGhvdyB0b1xuICAgKiBzdGFydCwgZ2VuZXJhdGUgZXZlbnRzLCBhbmQgc3RvcCB0aGUgU3RyZWFtLlxuICAgKiBAcmV0dXJuIHtNZW1vcnlTdHJlYW19XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlV2l0aE1lbW9yeTxUPihwcm9kdWNlcj86IFByb2R1Y2VyPFQ+KTogTWVtb3J5U3RyZWFtPFQ+IHtcbiAgICBpZiAocHJvZHVjZXIpIGludGVybmFsaXplUHJvZHVjZXIocHJvZHVjZXIpOyAvLyBtdXRhdGVzIHRoZSBpbnB1dFxuICAgIHJldHVybiBuZXcgTWVtb3J5U3RyZWFtPFQ+KHByb2R1Y2VyIGFzIEludGVybmFsUHJvZHVjZXI8VD4gJiBQcm9kdWNlcjxUPik7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFN0cmVhbSB0aGF0IGRvZXMgbm90aGluZyB3aGVuIHN0YXJ0ZWQuIEl0IG5ldmVyIGVtaXRzIGFueSBldmVudC5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogICAgICAgICAgbmV2ZXJcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogYGBgXG4gICAqXG4gICAqIEBmYWN0b3J5IHRydWVcbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgc3RhdGljIG5ldmVyKCk6IFN0cmVhbTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFN0cmVhbTxhbnk+KHtfc3RhcnQ6IG5vb3AsIF9zdG9wOiBub29wfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFN0cmVhbSB0aGF0IGltbWVkaWF0ZWx5IGVtaXRzIHRoZSBcImNvbXBsZXRlXCIgbm90aWZpY2F0aW9uIHdoZW5cbiAgICogc3RhcnRlZCwgYW5kIHRoYXQncyBpdC5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogZW1wdHlcbiAgICogLXxcbiAgICogYGBgXG4gICAqXG4gICAqIEBmYWN0b3J5IHRydWVcbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgc3RhdGljIGVtcHR5KCk6IFN0cmVhbTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFN0cmVhbTxhbnk+KHtcbiAgICAgIF9zdGFydChpbDogSW50ZXJuYWxMaXN0ZW5lcjxhbnk+KSB7IGlsLl9jKCk7IH0sXG4gICAgICBfc3RvcDogbm9vcCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU3RyZWFtIHRoYXQgaW1tZWRpYXRlbHkgZW1pdHMgYW4gXCJlcnJvclwiIG5vdGlmaWNhdGlvbiB3aXRoIHRoZVxuICAgKiB2YWx1ZSB5b3UgcGFzc2VkIGFzIHRoZSBgZXJyb3JgIGFyZ3VtZW50IHdoZW4gdGhlIHN0cmVhbSBzdGFydHMsIGFuZCB0aGF0J3NcbiAgICogaXQuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIHRocm93KFgpXG4gICAqIC1YXG4gICAqIGBgYFxuICAgKlxuICAgKiBAZmFjdG9yeSB0cnVlXG4gICAqIEBwYXJhbSBlcnJvciBUaGUgZXJyb3IgZXZlbnQgdG8gZW1pdCBvbiB0aGUgY3JlYXRlZCBzdHJlYW0uXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIHN0YXRpYyB0aHJvdyhlcnJvcjogYW55KTogU3RyZWFtPGFueT4ge1xuICAgIHJldHVybiBuZXcgU3RyZWFtPGFueT4oe1xuICAgICAgX3N0YXJ0KGlsOiBJbnRlcm5hbExpc3RlbmVyPGFueT4pIHsgaWwuX2UoZXJyb3IpOyB9LFxuICAgICAgX3N0b3A6IG5vb3AsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHN0cmVhbSBmcm9tIGFuIEFycmF5LCBQcm9taXNlLCBvciBhbiBPYnNlcnZhYmxlLlxuICAgKlxuICAgKiBAZmFjdG9yeSB0cnVlXG4gICAqIEBwYXJhbSB7QXJyYXl8UHJvbWlzZUxpa2V8T2JzZXJ2YWJsZX0gaW5wdXQgVGhlIGlucHV0IHRvIG1ha2UgYSBzdHJlYW0gZnJvbS5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgc3RhdGljIGZyb208VD4oaW5wdXQ6IFByb21pc2VMaWtlPFQ+IHwgU3RyZWFtPFQ+IHwgQXJyYXk8VD4gfCBPYnNlcnZhYmxlPFQ+KTogU3RyZWFtPFQ+IHtcbiAgICBpZiAodHlwZW9mIGlucHV0WyQkb2JzZXJ2YWJsZV0gPT09ICdmdW5jdGlvbicpXG4gICAgICByZXR1cm4gU3RyZWFtLmZyb21PYnNlcnZhYmxlPFQ+KGlucHV0IGFzIE9ic2VydmFibGU8VD4pOyBlbHNlXG4gICAgaWYgKHR5cGVvZiAoaW5wdXQgYXMgUHJvbWlzZUxpa2U8VD4pLnRoZW4gPT09ICdmdW5jdGlvbicpXG4gICAgICByZXR1cm4gU3RyZWFtLmZyb21Qcm9taXNlPFQ+KGlucHV0IGFzIFByb21pc2VMaWtlPFQ+KTsgZWxzZVxuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSlcbiAgICAgIHJldHVybiBTdHJlYW0uZnJvbUFycmF5PFQ+KGlucHV0KTtcblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFR5cGUgb2YgaW5wdXQgdG8gZnJvbSgpIG11c3QgYmUgYW4gQXJyYXksIFByb21pc2UsIG9yIE9ic2VydmFibGVgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU3RyZWFtIHRoYXQgaW1tZWRpYXRlbHkgZW1pdHMgdGhlIGFyZ3VtZW50cyB0aGF0IHlvdSBnaXZlIHRvXG4gICAqICpvZiosIHRoZW4gY29tcGxldGVzLlxuICAgKlxuICAgKiBNYXJibGUgZGlhZ3JhbTpcbiAgICpcbiAgICogYGBgdGV4dFxuICAgKiBvZigxLDIsMylcbiAgICogMTIzfFxuICAgKiBgYGBcbiAgICpcbiAgICogQGZhY3RvcnkgdHJ1ZVxuICAgKiBAcGFyYW0gYSBUaGUgZmlyc3QgdmFsdWUgeW91IHdhbnQgdG8gZW1pdCBhcyBhbiBldmVudCBvbiB0aGUgc3RyZWFtLlxuICAgKiBAcGFyYW0gYiBUaGUgc2Vjb25kIHZhbHVlIHlvdSB3YW50IHRvIGVtaXQgYXMgYW4gZXZlbnQgb24gdGhlIHN0cmVhbS4gT25lXG4gICAqIG9yIG1vcmUgb2YgdGhlc2UgdmFsdWVzIG1heSBiZSBnaXZlbiBhcyBhcmd1bWVudHMuXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIHN0YXRpYyBvZjxUPiguLi5pdGVtczogQXJyYXk8VD4pOiBTdHJlYW08VD4ge1xuICAgIHJldHVybiBTdHJlYW0uZnJvbUFycmF5PFQ+KGl0ZW1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhbiBhcnJheSB0byBhIHN0cmVhbS4gVGhlIHJldHVybmVkIHN0cmVhbSB3aWxsIGVtaXQgc3luY2hyb25vdXNseVxuICAgKiBhbGwgdGhlIGl0ZW1zIGluIHRoZSBhcnJheSwgYW5kIHRoZW4gY29tcGxldGUuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIGZyb21BcnJheShbMSwyLDNdKVxuICAgKiAxMjN8XG4gICAqIGBgYFxuICAgKlxuICAgKiBAZmFjdG9yeSB0cnVlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBiZSBjb252ZXJ0ZWQgYXMgYSBzdHJlYW0uXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIHN0YXRpYyBmcm9tQXJyYXk8VD4oYXJyYXk6IEFycmF5PFQ+KTogU3RyZWFtPFQ+IHtcbiAgICByZXR1cm4gbmV3IFN0cmVhbTxUPihuZXcgRnJvbUFycmF5PFQ+KGFycmF5KSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSBwcm9taXNlIHRvIGEgc3RyZWFtLiBUaGUgcmV0dXJuZWQgc3RyZWFtIHdpbGwgZW1pdCB0aGUgcmVzb2x2ZWRcbiAgICogdmFsdWUgb2YgdGhlIHByb21pc2UsIGFuZCB0aGVuIGNvbXBsZXRlLiBIb3dldmVyLCBpZiB0aGUgcHJvbWlzZSBpc1xuICAgKiByZWplY3RlZCwgdGhlIHN0cmVhbSB3aWxsIGVtaXQgdGhlIGNvcnJlc3BvbmRpbmcgZXJyb3IuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIGZyb21Qcm9taXNlKCAtLS0tNDIgKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLTQyfFxuICAgKiBgYGBcbiAgICpcbiAgICogQGZhY3RvcnkgdHJ1ZVxuICAgKiBAcGFyYW0ge1Byb21pc2VMaWtlfSBwcm9taXNlIFRoZSBwcm9taXNlIHRvIGJlIGNvbnZlcnRlZCBhcyBhIHN0cmVhbS5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgc3RhdGljIGZyb21Qcm9taXNlPFQ+KHByb21pc2U6IFByb21pc2VMaWtlPFQ+KTogU3RyZWFtPFQ+IHtcbiAgICByZXR1cm4gbmV3IFN0cmVhbTxUPihuZXcgRnJvbVByb21pc2U8VD4ocHJvbWlzZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGFuIE9ic2VydmFibGUgaW50byBhIFN0cmVhbS5cbiAgICpcbiAgICogQGZhY3RvcnkgdHJ1ZVxuICAgKiBAcGFyYW0ge2FueX0gb2JzZXJ2YWJsZSBUaGUgb2JzZXJ2YWJsZSB0byBiZSBjb252ZXJ0ZWQgYXMgYSBzdHJlYW0uXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIHN0YXRpYyBmcm9tT2JzZXJ2YWJsZTxUPihvYnM6IHtzdWJzY3JpYmU6IGFueX0pOiBTdHJlYW08VD4ge1xuICAgIGlmICgob2JzIGFzIFN0cmVhbTxUPikuZW5kV2hlbikgcmV0dXJuIG9icyBhcyBTdHJlYW08VD47XG4gICAgY29uc3QgbyA9IHR5cGVvZiBvYnNbJCRvYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJyA/IG9ic1skJG9ic2VydmFibGVdKCkgOiBvYnM7XG4gICAgcmV0dXJuIG5ldyBTdHJlYW08VD4obmV3IEZyb21PYnNlcnZhYmxlKG8pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgc3RyZWFtIHRoYXQgcGVyaW9kaWNhbGx5IGVtaXRzIGluY3JlbWVudGFsIG51bWJlcnMsIGV2ZXJ5XG4gICAqIGBwZXJpb2RgIG1pbGxpc2Vjb25kcy5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogICAgIHBlcmlvZGljKDEwMDApXG4gICAqIC0tLTAtLS0xLS0tMi0tLTMtLS00LS0tLi4uXG4gICAqIGBgYFxuICAgKlxuICAgKiBAZmFjdG9yeSB0cnVlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwZXJpb2QgVGhlIGludGVydmFsIGluIG1pbGxpc2Vjb25kcyB0byB1c2UgYXMgYSByYXRlIG9mXG4gICAqIGVtaXNzaW9uLlxuICAgKiBAcmV0dXJuIHtTdHJlYW19XG4gICAqL1xuICBzdGF0aWMgcGVyaW9kaWMocGVyaW9kOiBudW1iZXIpOiBTdHJlYW08bnVtYmVyPiB7XG4gICAgcmV0dXJuIG5ldyBTdHJlYW08bnVtYmVyPihuZXcgUGVyaW9kaWMocGVyaW9kKSk7XG4gIH1cblxuICAvKipcbiAgICogQmxlbmRzIG11bHRpcGxlIHN0cmVhbXMgdG9nZXRoZXIsIGVtaXR0aW5nIGV2ZW50cyBmcm9tIGFsbCBvZiB0aGVtXG4gICAqIGNvbmN1cnJlbnRseS5cbiAgICpcbiAgICogKm1lcmdlKiB0YWtlcyBtdWx0aXBsZSBzdHJlYW1zIGFzIGFyZ3VtZW50cywgYW5kIGNyZWF0ZXMgYSBzdHJlYW0gdGhhdFxuICAgKiBiZWhhdmVzIGxpa2UgZWFjaCBvZiB0aGUgYXJndW1lbnQgc3RyZWFtcywgaW4gcGFyYWxsZWwuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIC0tMS0tLS0yLS0tLS0zLS0tLS0tLS00LS0tXG4gICAqIC0tLS1hLS0tLS1iLS0tLWMtLS1kLS0tLS0tXG4gICAqICAgICAgICAgICAgbWVyZ2VcbiAgICogLS0xLWEtLTItLWItLTMtYy0tLWQtLTQtLS1cbiAgICogYGBgXG4gICAqXG4gICAqIEBmYWN0b3J5IHRydWVcbiAgICogQHBhcmFtIHtTdHJlYW19IHN0cmVhbTEgQSBzdHJlYW0gdG8gbWVyZ2UgdG9nZXRoZXIgd2l0aCBvdGhlciBzdHJlYW1zLlxuICAgKiBAcGFyYW0ge1N0cmVhbX0gc3RyZWFtMiBBIHN0cmVhbSB0byBtZXJnZSB0b2dldGhlciB3aXRoIG90aGVyIHN0cmVhbXMuIFR3b1xuICAgKiBvciBtb3JlIHN0cmVhbXMgbWF5IGJlIGdpdmVuIGFzIGFyZ3VtZW50cy5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgc3RhdGljIG1lcmdlOiBNZXJnZVNpZ25hdHVyZSA9IGZ1bmN0aW9uIG1lcmdlKC4uLnN0cmVhbXM6IEFycmF5PFN0cmVhbTxhbnk+Pikge1xuICAgIHJldHVybiBuZXcgU3RyZWFtPGFueT4obmV3IE1lcmdlKHN0cmVhbXMpKTtcbiAgfSBhcyBNZXJnZVNpZ25hdHVyZTtcblxuICAvKipcbiAgICogQ29tYmluZXMgbXVsdGlwbGUgaW5wdXQgc3RyZWFtcyB0b2dldGhlciB0byByZXR1cm4gYSBzdHJlYW0gd2hvc2UgZXZlbnRzXG4gICAqIGFyZSBhcnJheXMgdGhhdCBjb2xsZWN0IHRoZSBsYXRlc3QgZXZlbnRzIGZyb20gZWFjaCBpbnB1dCBzdHJlYW0uXG4gICAqXG4gICAqICpjb21iaW5lKiBpbnRlcm5hbGx5IHJlbWVtYmVycyB0aGUgbW9zdCByZWNlbnQgZXZlbnQgZnJvbSBlYWNoIG9mIHRoZSBpbnB1dFxuICAgKiBzdHJlYW1zLiBXaGVuIGFueSBvZiB0aGUgaW5wdXQgc3RyZWFtcyBlbWl0cyBhbiBldmVudCwgdGhhdCBldmVudCB0b2dldGhlclxuICAgKiB3aXRoIGFsbCB0aGUgb3RoZXIgc2F2ZWQgZXZlbnRzIGFyZSBjb21iaW5lZCBpbnRvIGFuIGFycmF5LiBUaGF0IGFycmF5IHdpbGxcbiAgICogYmUgZW1pdHRlZCBvbiB0aGUgb3V0cHV0IHN0cmVhbS4gSXQncyBlc3NlbnRpYWxseSBhIHdheSBvZiBqb2luaW5nIHRvZ2V0aGVyXG4gICAqIHRoZSBldmVudHMgZnJvbSBtdWx0aXBsZSBzdHJlYW1zLlxuICAgKlxuICAgKiBNYXJibGUgZGlhZ3JhbTpcbiAgICpcbiAgICogYGBgdGV4dFxuICAgKiAtLTEtLS0tMi0tLS0tMy0tLS0tLS0tNC0tLVxuICAgKiAtLS0tYS0tLS0tYi0tLS0tYy0tZC0tLS0tLVxuICAgKiAgICAgICAgICBjb21iaW5lXG4gICAqIC0tLS0xYS0yYS0yYi0zYi0zYy0zZC00ZC0tXG4gICAqIGBgYFxuICAgKlxuICAgKiBAZmFjdG9yeSB0cnVlXG4gICAqIEBwYXJhbSB7U3RyZWFtfSBzdHJlYW0xIEEgc3RyZWFtIHRvIGNvbWJpbmUgdG9nZXRoZXIgd2l0aCBvdGhlciBzdHJlYW1zLlxuICAgKiBAcGFyYW0ge1N0cmVhbX0gc3RyZWFtMiBBIHN0cmVhbSB0byBjb21iaW5lIHRvZ2V0aGVyIHdpdGggb3RoZXIgc3RyZWFtcy5cbiAgICogTXVsdGlwbGUgc3RyZWFtcywgbm90IGp1c3QgdHdvLCBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnRzLlxuICAgKiBAcmV0dXJuIHtTdHJlYW19XG4gICAqL1xuICBzdGF0aWMgY29tYmluZTogQ29tYmluZVNpZ25hdHVyZSA9IGZ1bmN0aW9uIGNvbWJpbmUoLi4uc3RyZWFtczogQXJyYXk8U3RyZWFtPGFueT4+KSB7XG4gICAgcmV0dXJuIG5ldyBTdHJlYW08QXJyYXk8YW55Pj4obmV3IENvbWJpbmU8YW55PihzdHJlYW1zKSk7XG4gIH0gYXMgQ29tYmluZVNpZ25hdHVyZTtcblxuICBwcm90ZWN0ZWQgX21hcDxVPihwcm9qZWN0OiAodDogVCkgPT4gVSk6IFN0cmVhbTxVPiB8IE1lbW9yeVN0cmVhbTxVPiB7XG4gICAgcmV0dXJuIG5ldyAodGhpcy5jdG9yKCkpPFU+KG5ldyBNYXBPcDxULCBVPihwcm9qZWN0LCB0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBlYWNoIGV2ZW50IGZyb20gdGhlIGlucHV0IFN0cmVhbSB0aHJvdWdoIGEgYHByb2plY3RgIGZ1bmN0aW9uLFxuICAgKiB0byBnZXQgYSBTdHJlYW0gdGhhdCBlbWl0cyB0aG9zZSB0cmFuc2Zvcm1lZCBldmVudHMuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIC0tMS0tLTMtLTUtLS0tLTctLS0tLS1cbiAgICogICAgbWFwKGkgPT4gaSAqIDEwKVxuICAgKiAtLTEwLS0zMC01MC0tLS03MC0tLS0tXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm9qZWN0IEEgZnVuY3Rpb24gb2YgdHlwZSBgKHQ6IFQpID0+IFVgIHRoYXQgdGFrZXMgZXZlbnRcbiAgICogYHRgIG9mIHR5cGUgYFRgIGZyb20gdGhlIGlucHV0IFN0cmVhbSBhbmQgcHJvZHVjZXMgYW4gZXZlbnQgb2YgdHlwZSBgVWAsIHRvXG4gICAqIGJlIGVtaXR0ZWQgb24gdGhlIG91dHB1dCBTdHJlYW0uXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIG1hcDxVPihwcm9qZWN0OiAodDogVCkgPT4gVSk6IFN0cmVhbTxVPiB7XG4gICAgcmV0dXJuIHRoaXMuX21hcChwcm9qZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCdzIGxpa2UgYG1hcGAsIGJ1dCB0cmFuc2Zvcm1zIGVhY2ggaW5wdXQgZXZlbnQgdG8gYWx3YXlzIHRoZSBzYW1lXG4gICAqIGNvbnN0YW50IHZhbHVlIG9uIHRoZSBvdXRwdXQgU3RyZWFtLlxuICAgKlxuICAgKiBNYXJibGUgZGlhZ3JhbTpcbiAgICpcbiAgICogYGBgdGV4dFxuICAgKiAtLTEtLS0zLS01LS0tLS03LS0tLS1cbiAgICogICAgICAgbWFwVG8oMTApXG4gICAqIC0tMTAtLTEwLTEwLS0tLTEwLS0tLVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHByb2plY3RlZFZhbHVlIEEgdmFsdWUgdG8gZW1pdCBvbiB0aGUgb3V0cHV0IFN0cmVhbSB3aGVuZXZlciB0aGVcbiAgICogaW5wdXQgU3RyZWFtIGVtaXRzIGFueSB2YWx1ZS5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgbWFwVG88VT4ocHJvamVjdGVkVmFsdWU6IFUpOiBTdHJlYW08VT4ge1xuICAgIGNvbnN0IHMgPSB0aGlzLm1hcCgoKSA9PiBwcm9qZWN0ZWRWYWx1ZSk7XG4gICAgY29uc3Qgb3A6IE9wZXJhdG9yPFQsIFU+ID0gcy5fcHJvZCBhcyBPcGVyYXRvcjxULCBVPjtcbiAgICBvcC50eXBlID0gJ21hcFRvJztcbiAgICByZXR1cm4gcztcbiAgfVxuXG4gIGZpbHRlcjxTIGV4dGVuZHMgVD4ocGFzc2VzOiAodDogVCkgPT4gdCBpcyBTKTogU3RyZWFtPFM+O1xuICBmaWx0ZXIocGFzc2VzOiAodDogVCkgPT4gYm9vbGVhbik6IFN0cmVhbTxUPjtcbiAgLyoqXG4gICAqIE9ubHkgYWxsb3dzIGV2ZW50cyB0aGF0IHBhc3MgdGhlIHRlc3QgZ2l2ZW4gYnkgdGhlIGBwYXNzZXNgIGFyZ3VtZW50LlxuICAgKlxuICAgKiBFYWNoIGV2ZW50IGZyb20gdGhlIGlucHV0IHN0cmVhbSBpcyBnaXZlbiB0byB0aGUgYHBhc3Nlc2AgZnVuY3Rpb24uIElmIHRoZVxuICAgKiBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCwgdGhlIGV2ZW50IGlzIGZvcndhcmRlZCB0byB0aGUgb3V0cHV0IHN0cmVhbSxcbiAgICogb3RoZXJ3aXNlIGl0IGlzIGlnbm9yZWQgYW5kIG5vdCBmb3J3YXJkZWQuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIC0tMS0tLTItLTMtLS0tLTQtLS0tLTUtLS02LS03LTgtLVxuICAgKiAgICAgZmlsdGVyKGkgPT4gaSAlIDIgPT09IDApXG4gICAqIC0tLS0tLTItLS0tLS0tLTQtLS0tLS0tLS02LS0tLTgtLVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcGFzc2VzIEEgZnVuY3Rpb24gb2YgdHlwZSBgKHQ6IFQpID0+IGJvb2xlYW5gIHRoYXQgdGFrZXNcbiAgICogYW4gZXZlbnQgZnJvbSB0aGUgaW5wdXQgc3RyZWFtIGFuZCBjaGVja3MgaWYgaXQgcGFzc2VzLCBieSByZXR1cm5pbmcgYVxuICAgKiBib29sZWFuLlxuICAgKiBAcmV0dXJuIHtTdHJlYW19XG4gICAqL1xuICBmaWx0ZXIocGFzc2VzOiAodDogVCkgPT4gYm9vbGVhbik6IFN0cmVhbTxUPiB7XG4gICAgY29uc3QgcCA9IHRoaXMuX3Byb2Q7XG4gICAgaWYgKHAgaW5zdGFuY2VvZiBGaWx0ZXIpXG4gICAgICByZXR1cm4gbmV3IFN0cmVhbTxUPihuZXcgRmlsdGVyPFQ+KFxuICAgICAgICBhbmQoKHAgYXMgRmlsdGVyPFQ+KS5mLCBwYXNzZXMpLFxuICAgICAgICAocCBhcyBGaWx0ZXI8VD4pLmluc1xuICAgICAgKSk7XG4gICAgcmV0dXJuIG5ldyBTdHJlYW08VD4obmV3IEZpbHRlcjxUPihwYXNzZXMsIHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMZXRzIHRoZSBmaXJzdCBgYW1vdW50YCBtYW55IGV2ZW50cyBmcm9tIHRoZSBpbnB1dCBzdHJlYW0gcGFzcyB0byB0aGVcbiAgICogb3V0cHV0IHN0cmVhbSwgdGhlbiBtYWtlcyB0aGUgb3V0cHV0IHN0cmVhbSBjb21wbGV0ZS5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogLS1hLS0tYi0tYy0tLS1kLS0tZS0tXG4gICAqICAgIHRha2UoMylcbiAgICogLS1hLS0tYi0tY3xcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSG93IG1hbnkgZXZlbnRzIHRvIGFsbG93IGZyb20gdGhlIGlucHV0IHN0cmVhbVxuICAgKiBiZWZvcmUgY29tcGxldGluZyB0aGUgb3V0cHV0IHN0cmVhbS5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgdGFrZShhbW91bnQ6IG51bWJlcik6IFN0cmVhbTxUPiB7XG4gICAgcmV0dXJuIG5ldyAodGhpcy5jdG9yKCkpPFQ+KG5ldyBUYWtlPFQ+KGFtb3VudCwgdGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIElnbm9yZXMgdGhlIGZpcnN0IGBhbW91bnRgIG1hbnkgZXZlbnRzIGZyb20gdGhlIGlucHV0IHN0cmVhbSwgYW5kIHRoZW5cbiAgICogYWZ0ZXIgdGhhdCBzdGFydHMgZm9yd2FyZGluZyBldmVudHMgZnJvbSB0aGUgaW5wdXQgc3RyZWFtIHRvIHRoZSBvdXRwdXRcbiAgICogc3RyZWFtLlxuICAgKlxuICAgKiBNYXJibGUgZGlhZ3JhbTpcbiAgICpcbiAgICogYGBgdGV4dFxuICAgKiAtLWEtLS1iLS1jLS0tLWQtLS1lLS1cbiAgICogICAgICAgZHJvcCgzKVxuICAgKiAtLS0tLS0tLS0tLS0tLWQtLS1lLS1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSG93IG1hbnkgZXZlbnRzIHRvIGlnbm9yZSBmcm9tIHRoZSBpbnB1dCBzdHJlYW1cbiAgICogYmVmb3JlIGZvcndhcmRpbmcgYWxsIGV2ZW50cyBmcm9tIHRoZSBpbnB1dCBzdHJlYW0gdG8gdGhlIG91dHB1dCBzdHJlYW0uXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIGRyb3AoYW1vdW50OiBudW1iZXIpOiBTdHJlYW08VD4ge1xuICAgIHJldHVybiBuZXcgU3RyZWFtPFQ+KG5ldyBEcm9wPFQ+KGFtb3VudCwgdGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGlucHV0IHN0cmVhbSBjb21wbGV0ZXMsIHRoZSBvdXRwdXQgc3RyZWFtIHdpbGwgZW1pdCB0aGUgbGFzdCBldmVudFxuICAgKiBlbWl0dGVkIGJ5IHRoZSBpbnB1dCBzdHJlYW0sIGFuZCB0aGVuIHdpbGwgYWxzbyBjb21wbGV0ZS5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogLS1hLS0tYi0tYy0tZC0tLS18XG4gICAqICAgICAgIGxhc3QoKVxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLWR8XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJlYW19XG4gICAqL1xuICBsYXN0KCk6IFN0cmVhbTxUPiB7XG4gICAgcmV0dXJuIG5ldyBTdHJlYW08VD4obmV3IExhc3Q8VD4odGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBlbmRzIHRoZSBnaXZlbiBgaW5pdGlhbGAgdmFsdWUgdG8gdGhlIHNlcXVlbmNlIG9mIGV2ZW50cyBlbWl0dGVkIGJ5IHRoZVxuICAgKiBpbnB1dCBzdHJlYW0uIFRoZSByZXR1cm5lZCBzdHJlYW0gaXMgYSBNZW1vcnlTdHJlYW0sIHdoaWNoIG1lYW5zIGl0IGlzXG4gICAqIGFscmVhZHkgYHJlbWVtYmVyKClgJ2QuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIC0tLTEtLS0yLS0tLS0zLS0tXG4gICAqICAgc3RhcnRXaXRoKDApXG4gICAqIDAtLTEtLS0yLS0tLS0zLS0tXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gaW5pdGlhbCBUaGUgdmFsdWUgb3IgZXZlbnQgdG8gcHJlcGVuZC5cbiAgICogQHJldHVybiB7TWVtb3J5U3RyZWFtfVxuICAgKi9cbiAgc3RhcnRXaXRoKGluaXRpYWw6IFQpOiBNZW1vcnlTdHJlYW08VD4ge1xuICAgIHJldHVybiBuZXcgTWVtb3J5U3RyZWFtPFQ+KG5ldyBTdGFydFdpdGg8VD4odGhpcywgaW5pdGlhbCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZXMgYW5vdGhlciBzdHJlYW0gdG8gZGV0ZXJtaW5lIHdoZW4gdG8gY29tcGxldGUgdGhlIGN1cnJlbnQgc3RyZWFtLlxuICAgKlxuICAgKiBXaGVuIHRoZSBnaXZlbiBgb3RoZXJgIHN0cmVhbSBlbWl0cyBhbiBldmVudCBvciBjb21wbGV0ZXMsIHRoZSBvdXRwdXRcbiAgICogc3RyZWFtIHdpbGwgY29tcGxldGUuIEJlZm9yZSB0aGF0IGhhcHBlbnMsIHRoZSBvdXRwdXQgc3RyZWFtIHdpbGwgYmVoYXZlc1xuICAgKiBsaWtlIHRoZSBpbnB1dCBzdHJlYW0uXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIC0tLTEtLS0yLS0tLS0zLS00LS0tLTUtLS0tNi0tLVxuICAgKiAgIGVuZFdoZW4oIC0tLS0tLS0tYS0tYi0tfCApXG4gICAqIC0tLTEtLS0yLS0tLS0zLS00LS18XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gb3RoZXIgU29tZSBvdGhlciBzdHJlYW0gdGhhdCBpcyB1c2VkIHRvIGtub3cgd2hlbiBzaG91bGQgdGhlIG91dHB1dFxuICAgKiBzdHJlYW0gb2YgdGhpcyBvcGVyYXRvciBjb21wbGV0ZS5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgZW5kV2hlbihvdGhlcjogU3RyZWFtPGFueT4pOiBTdHJlYW08VD4ge1xuICAgIHJldHVybiBuZXcgKHRoaXMuY3RvcigpKTxUPihuZXcgRW5kV2hlbjxUPihvdGhlciwgdGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiRm9sZHNcIiB0aGUgc3RyZWFtIG9udG8gaXRzZWxmLlxuICAgKlxuICAgKiBDb21iaW5lcyBldmVudHMgZnJvbSB0aGUgcGFzdCB0aHJvdWdob3V0XG4gICAqIHRoZSBlbnRpcmUgZXhlY3V0aW9uIG9mIHRoZSBpbnB1dCBzdHJlYW0sIGFsbG93aW5nIHlvdSB0byBhY2N1bXVsYXRlIHRoZW1cbiAgICogdG9nZXRoZXIuIEl0J3MgZXNzZW50aWFsbHkgbGlrZSBgQXJyYXkucHJvdG90eXBlLnJlZHVjZWAuIFRoZSByZXR1cm5lZFxuICAgKiBzdHJlYW0gaXMgYSBNZW1vcnlTdHJlYW0sIHdoaWNoIG1lYW5zIGl0IGlzIGFscmVhZHkgYHJlbWVtYmVyKClgJ2QuXG4gICAqXG4gICAqIFRoZSBvdXRwdXQgc3RyZWFtIHN0YXJ0cyBieSBlbWl0dGluZyB0aGUgYHNlZWRgIHdoaWNoIHlvdSBnaXZlIGFzIGFyZ3VtZW50LlxuICAgKiBUaGVuLCB3aGVuIGFuIGV2ZW50IGhhcHBlbnMgb24gdGhlIGlucHV0IHN0cmVhbSwgaXQgaXMgY29tYmluZWQgd2l0aCB0aGF0XG4gICAqIHNlZWQgdmFsdWUgdGhyb3VnaCB0aGUgYGFjY3VtdWxhdGVgIGZ1bmN0aW9uLCBhbmQgdGhlIG91dHB1dCB2YWx1ZSBpc1xuICAgKiBlbWl0dGVkIG9uIHRoZSBvdXRwdXQgc3RyZWFtLiBgZm9sZGAgcmVtZW1iZXJzIHRoYXQgb3V0cHV0IHZhbHVlIGFzIGBhY2NgXG4gICAqIChcImFjY3VtdWxhdG9yXCIpLCBhbmQgdGhlbiB3aGVuIGEgbmV3IGlucHV0IGV2ZW50IGB0YCBoYXBwZW5zLCBgYWNjYCB3aWxsIGJlXG4gICAqIGNvbWJpbmVkIHdpdGggdGhhdCB0byBwcm9kdWNlIHRoZSBuZXcgYGFjY2AgYW5kIHNvIGZvcnRoLlxuICAgKlxuICAgKiBNYXJibGUgZGlhZ3JhbTpcbiAgICpcbiAgICogYGBgdGV4dFxuICAgKiAtLS0tLS0xLS0tLS0xLS0yLS0tLTEtLS0tMS0tLS0tLVxuICAgKiAgIGZvbGQoKGFjYywgeCkgPT4gYWNjICsgeCwgMylcbiAgICogMy0tLS0tNC0tLS0tNS0tNy0tLS04LS0tLTktLS0tLS1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjY3VtdWxhdGUgQSBmdW5jdGlvbiBvZiB0eXBlIGAoYWNjOiBSLCB0OiBUKSA9PiBSYCB0aGF0XG4gICAqIHRha2VzIHRoZSBwcmV2aW91cyBhY2N1bXVsYXRlZCB2YWx1ZSBgYWNjYCBhbmQgdGhlIGluY29taW5nIGV2ZW50IGZyb20gdGhlXG4gICAqIGlucHV0IHN0cmVhbSBhbmQgcHJvZHVjZXMgdGhlIG5ldyBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICogQHBhcmFtIHNlZWQgVGhlIGluaXRpYWwgYWNjdW11bGF0ZWQgdmFsdWUsIG9mIHR5cGUgYFJgLlxuICAgKiBAcmV0dXJuIHtNZW1vcnlTdHJlYW19XG4gICAqL1xuICBmb2xkPFI+KGFjY3VtdWxhdGU6IChhY2M6IFIsIHQ6IFQpID0+IFIsIHNlZWQ6IFIpOiBNZW1vcnlTdHJlYW08Uj4ge1xuICAgIHJldHVybiBuZXcgTWVtb3J5U3RyZWFtPFI+KG5ldyBGb2xkPFQsIFI+KGFjY3VtdWxhdGUsIHNlZWQsIHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbiBlcnJvciB3aXRoIGFub3RoZXIgc3RyZWFtLlxuICAgKlxuICAgKiBXaGVuIChhbmQgaWYpIGFuIGVycm9yIGhhcHBlbnMgb24gdGhlIGlucHV0IHN0cmVhbSwgaW5zdGVhZCBvZiBmb3J3YXJkaW5nXG4gICAqIHRoYXQgZXJyb3IgdG8gdGhlIG91dHB1dCBzdHJlYW0sICpyZXBsYWNlRXJyb3IqIHdpbGwgY2FsbCB0aGUgYHJlcGxhY2VgXG4gICAqIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHN0cmVhbSB0aGF0IHRoZSBvdXRwdXQgc3RyZWFtIHdpbGwgcmVwbGljYXRlLlxuICAgKiBBbmQsIGluIGNhc2UgdGhhdCBuZXcgc3RyZWFtIGFsc28gZW1pdHMgYW4gZXJyb3IsIGByZXBsYWNlYCB3aWxsIGJlIGNhbGxlZFxuICAgKiBhZ2FpbiB0byBnZXQgYW5vdGhlciBzdHJlYW0gdG8gc3RhcnQgcmVwbGljYXRpbmcuXG4gICAqXG4gICAqIE1hcmJsZSBkaWFncmFtOlxuICAgKlxuICAgKiBgYGB0ZXh0XG4gICAqIC0tMS0tLTItLS0tLTMtLTQtLS0tLVhcbiAgICogICByZXBsYWNlRXJyb3IoICgpID0+IC0tMTAtLXwgKVxuICAgKiAtLTEtLS0yLS0tLS0zLS00LS0tLS0tLS0xMC0tfFxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVwbGFjZSBBIGZ1bmN0aW9uIG9mIHR5cGUgYChlcnIpID0+IFN0cmVhbWAgdGhhdCB0YWtlc1xuICAgKiB0aGUgZXJyb3IgdGhhdCBvY2N1cnJlZCBvbiB0aGUgaW5wdXQgc3RyZWFtIG9yIG9uIHRoZSBwcmV2aW91cyByZXBsYWNlbWVudFxuICAgKiBzdHJlYW0gYW5kIHJldHVybnMgYSBuZXcgc3RyZWFtLiBUaGUgb3V0cHV0IHN0cmVhbSB3aWxsIGJlaGF2ZSBsaWtlIHRoZVxuICAgKiBzdHJlYW0gdGhhdCB0aGlzIGZ1bmN0aW9uIHJldHVybnMuXG4gICAqIEByZXR1cm4ge1N0cmVhbX1cbiAgICovXG4gIHJlcGxhY2VFcnJvcihyZXBsYWNlOiAoZXJyOiBhbnkpID0+IFN0cmVhbTxUPik6IFN0cmVhbTxUPiB7XG4gICAgcmV0dXJuIG5ldyAodGhpcy5jdG9yKCkpPFQ+KG5ldyBSZXBsYWNlRXJyb3I8VD4ocmVwbGFjZSwgdGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZsYXR0ZW5zIGEgXCJzdHJlYW0gb2Ygc3RyZWFtc1wiLCBoYW5kbGluZyBvbmx5IG9uZSBuZXN0ZWQgc3RyZWFtIGF0IGEgdGltZVxuICAgKiAobm8gY29uY3VycmVuY3kpLlxuICAgKlxuICAgKiBJZiB0aGUgaW5wdXQgc3RyZWFtIGlzIGEgc3RyZWFtIHRoYXQgZW1pdHMgc3RyZWFtcywgdGhlbiB0aGlzIG9wZXJhdG9yIHdpbGxcbiAgICogcmV0dXJuIGFuIG91dHB1dCBzdHJlYW0gd2hpY2ggaXMgYSBmbGF0IHN0cmVhbTogZW1pdHMgcmVndWxhciBldmVudHMuIFRoZVxuICAgKiBmbGF0dGVuaW5nIGhhcHBlbnMgd2l0aG91dCBjb25jdXJyZW5jeS4gSXQgd29ya3MgbGlrZSB0aGlzOiB3aGVuIHRoZSBpbnB1dFxuICAgKiBzdHJlYW0gZW1pdHMgYSBuZXN0ZWQgc3RyZWFtLCAqZmxhdHRlbiogd2lsbCBzdGFydCBpbWl0YXRpbmcgdGhhdCBuZXN0ZWRcbiAgICogb25lLiBIb3dldmVyLCBhcyBzb29uIGFzIHRoZSBuZXh0IG5lc3RlZCBzdHJlYW0gaXMgZW1pdHRlZCBvbiB0aGUgaW5wdXRcbiAgICogc3RyZWFtLCAqZmxhdHRlbiogd2lsbCBmb3JnZXQgdGhlIHByZXZpb3VzIG5lc3RlZCBvbmUgaXQgd2FzIGltaXRhdGluZywgYW5kXG4gICAqIHdpbGwgc3RhcnQgaW1pdGF0aW5nIHRoZSBuZXcgbmVzdGVkIG9uZS5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogLS0rLS0tLS0tLS0rLS0tLS0tLS0tLS0tLS0tXG4gICAqICAgXFwgICAgICAgIFxcXG4gICAqICAgIFxcICAgICAgIC0tLS0xLS0tLTItLS0zLS1cbiAgICogICAgLS1hLS1iLS0tLWMtLS0tZC0tLS0tLS0tXG4gICAqICAgICAgICAgICBmbGF0dGVuXG4gICAqIC0tLS0tYS0tYi0tLS0tLTEtLS0tMi0tLTMtLVxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgZmxhdHRlbjxSPih0aGlzOiBTdHJlYW08U3RyZWFtPFI+Pik6IFQge1xuICAgIGNvbnN0IHAgPSB0aGlzLl9wcm9kO1xuICAgIHJldHVybiBuZXcgU3RyZWFtPFI+KG5ldyBGbGF0dGVuKHRoaXMpKSBhcyBUICYgU3RyZWFtPFI+O1xuICB9XG5cbiAgLyoqXG4gICAqIFBhc3NlcyB0aGUgaW5wdXQgc3RyZWFtIHRvIGEgY3VzdG9tIG9wZXJhdG9yLCB0byBwcm9kdWNlIGFuIG91dHB1dCBzdHJlYW0uXG4gICAqXG4gICAqICpjb21wb3NlKiBpcyBhIGhhbmR5IHdheSBvZiB1c2luZyBhbiBleGlzdGluZyBmdW5jdGlvbiBpbiBhIGNoYWluZWQgc3R5bGUuXG4gICAqIEluc3RlYWQgb2Ygd3JpdGluZyBgb3V0U3RyZWFtID0gZihpblN0cmVhbSlgIHlvdSBjYW4gd3JpdGVcbiAgICogYG91dFN0cmVhbSA9IGluU3RyZWFtLmNvbXBvc2UoZilgLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvcGVyYXRvciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBzdHJlYW0gYXMgaW5wdXQgYW5kXG4gICAqIHJldHVybnMgYSBzdHJlYW0gYXMgd2VsbC5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgY29tcG9zZTxVPihvcGVyYXRvcjogKHN0cmVhbTogU3RyZWFtPFQ+KSA9PiBVKTogVSB7XG4gICAgcmV0dXJuIG9wZXJhdG9yKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb3V0cHV0IHN0cmVhbSB0aGF0IGJlaGF2ZXMgbGlrZSB0aGUgaW5wdXQgc3RyZWFtLCBidXQgYWxzb1xuICAgKiByZW1lbWJlcnMgdGhlIG1vc3QgcmVjZW50IGV2ZW50IHRoYXQgaGFwcGVucyBvbiB0aGUgaW5wdXQgc3RyZWFtLCBzbyB0aGF0IGFcbiAgICogbmV3bHkgYWRkZWQgbGlzdGVuZXIgd2lsbCBpbW1lZGlhdGVseSByZWNlaXZlIHRoYXQgbWVtb3Jpc2VkIGV2ZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtNZW1vcnlTdHJlYW19XG4gICAqL1xuICByZW1lbWJlcigpOiBNZW1vcnlTdHJlYW08VD4ge1xuICAgIHJldHVybiBuZXcgTWVtb3J5U3RyZWFtPFQ+KG5ldyBSZW1lbWJlcjxUPih0aGlzKSk7XG4gIH1cblxuICBkZWJ1ZygpOiBTdHJlYW08VD47XG4gIGRlYnVnKGxhYmVsT3JTcHk6IHN0cmluZyk6IFN0cmVhbTxUPjtcbiAgZGVidWcobGFiZWxPclNweTogKHQ6IFQpID0+IGFueSk6IFN0cmVhbTxUPjtcbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb3V0cHV0IHN0cmVhbSB0aGF0IGlkZW50aWNhbGx5IGJlaGF2ZXMgbGlrZSB0aGUgaW5wdXQgc3RyZWFtLFxuICAgKiBidXQgYWxzbyBydW5zIGEgYHNweWAgZnVuY3Rpb24gZm9yIGVhY2ggZXZlbnQsIHRvIGhlbHAgeW91IGRlYnVnIHlvdXIgYXBwLlxuICAgKlxuICAgKiAqZGVidWcqIHRha2VzIGEgYHNweWAgZnVuY3Rpb24gYXMgYXJndW1lbnQsIGFuZCBydW5zIHRoYXQgZm9yIGVhY2ggZXZlbnRcbiAgICogaGFwcGVuaW5nIG9uIHRoZSBpbnB1dCBzdHJlYW0uIElmIHlvdSBkb24ndCBwcm92aWRlIHRoZSBgc3B5YCBhcmd1bWVudCxcbiAgICogdGhlbiAqZGVidWcqIHdpbGwganVzdCBgY29uc29sZS5sb2dgIGVhY2ggZXZlbnQuIFRoaXMgaGVscHMgeW91IHRvXG4gICAqIHVuZGVyc3RhbmQgdGhlIGZsb3cgb2YgZXZlbnRzIHRocm91Z2ggc29tZSBvcGVyYXRvciBjaGFpbi5cbiAgICpcbiAgICogUGxlYXNlIG5vdGUgdGhhdCBpZiB0aGUgb3V0cHV0IHN0cmVhbSBoYXMgbm8gbGlzdGVuZXJzLCB0aGVuIGl0IHdpbGwgbm90XG4gICAqIHN0YXJ0LCB3aGljaCBtZWFucyBgc3B5YCB3aWxsIG5ldmVyIHJ1biBiZWNhdXNlIG5vIGFjdHVhbCBldmVudCBoYXBwZW5zIGluXG4gICAqIHRoYXQgY2FzZS5cbiAgICpcbiAgICogTWFyYmxlIGRpYWdyYW06XG4gICAqXG4gICAqIGBgYHRleHRcbiAgICogLS0xLS0tLTItLS0tLTMtLS0tLTQtLVxuICAgKiAgICAgICAgIGRlYnVnXG4gICAqIC0tMS0tLS0yLS0tLS0zLS0tLS00LS1cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGxhYmVsT3JTcHkgQSBzdHJpbmcgdG8gdXNlIGFzIHRoZSBsYWJlbCB3aGVuIHByaW50aW5nXG4gICAqIGRlYnVnIGluZm9ybWF0aW9uIG9uIHRoZSBjb25zb2xlLCBvciBhICdzcHknIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gZXZlbnRcbiAgICogYXMgYXJndW1lbnQsIGFuZCBkb2VzIG5vdCBuZWVkIHRvIHJldHVybiBhbnl0aGluZy5cbiAgICogQHJldHVybiB7U3RyZWFtfVxuICAgKi9cbiAgZGVidWcobGFiZWxPclNweT86IHN0cmluZyB8ICgodDogVCkgPT4gYW55KSk6IFN0cmVhbTxUPiB7XG4gICAgcmV0dXJuIG5ldyAodGhpcy5jdG9yKCkpPFQ+KG5ldyBEZWJ1ZzxUPih0aGlzLCBsYWJlbE9yU3B5KSk7XG4gIH1cblxuICAvKipcbiAgICogKmltaXRhdGUqIGNoYW5nZXMgdGhpcyBjdXJyZW50IFN0cmVhbSB0byBlbWl0IHRoZSBzYW1lIGV2ZW50cyB0aGF0IHRoZVxuICAgKiBgb3RoZXJgIGdpdmVuIFN0cmVhbSBkb2VzLiBUaGlzIG1ldGhvZCByZXR1cm5zIG5vdGhpbmcuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGV4aXN0cyB0byBhbGxvdyBvbmUgdGhpbmc6ICoqY2lyY3VsYXIgZGVwZW5kZW5jeSBvZiBzdHJlYW1zKiouXG4gICAqIEZvciBpbnN0YW5jZSwgbGV0J3MgaW1hZ2luZSB0aGF0IGZvciBzb21lIHJlYXNvbiB5b3UgbmVlZCB0byBjcmVhdGUgYVxuICAgKiBjaXJjdWxhciBkZXBlbmRlbmN5IHdoZXJlIHN0cmVhbSBgZmlyc3QkYCBkZXBlbmRzIG9uIHN0cmVhbSBgc2Vjb25kJGBcbiAgICogd2hpY2ggaW4gdHVybiBkZXBlbmRzIG9uIGBmaXJzdCRgOlxuICAgKlxuICAgKiA8IS0tIHNraXAtZXhhbXBsZSAtLT5cbiAgICogYGBganNcbiAgICogaW1wb3J0IGRlbGF5IGZyb20gJ3hzdHJlYW0vZXh0cmEvZGVsYXknXG4gICAqXG4gICAqIHZhciBmaXJzdCQgPSBzZWNvbmQkLm1hcCh4ID0+IHggKiAxMCkudGFrZSgzKTtcbiAgICogdmFyIHNlY29uZCQgPSBmaXJzdCQubWFwKHggPT4geCArIDEpLnN0YXJ0V2l0aCgxKS5jb21wb3NlKGRlbGF5KDEwMCkpO1xuICAgKiBgYGBcbiAgICpcbiAgICogSG93ZXZlciwgdGhhdCBpcyBpbnZhbGlkIEphdmFTY3JpcHQsIGJlY2F1c2UgYHNlY29uZCRgIGlzIHVuZGVmaW5lZFxuICAgKiBvbiB0aGUgZmlyc3QgbGluZS4gVGhpcyBpcyBob3cgKmltaXRhdGUqIGNhbiBoZWxwIHNvbHZlIGl0OlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBpbXBvcnQgZGVsYXkgZnJvbSAneHN0cmVhbS9leHRyYS9kZWxheSdcbiAgICpcbiAgICogdmFyIHNlY29uZFByb3h5JCA9IHhzLmNyZWF0ZSgpO1xuICAgKiB2YXIgZmlyc3QkID0gc2Vjb25kUHJveHkkLm1hcCh4ID0+IHggKiAxMCkudGFrZSgzKTtcbiAgICogdmFyIHNlY29uZCQgPSBmaXJzdCQubWFwKHggPT4geCArIDEpLnN0YXJ0V2l0aCgxKS5jb21wb3NlKGRlbGF5KDEwMCkpO1xuICAgKiBzZWNvbmRQcm94eSQuaW1pdGF0ZShzZWNvbmQkKTtcbiAgICogYGBgXG4gICAqXG4gICAqIFdlIGNyZWF0ZSBgc2Vjb25kUHJveHkkYCBiZWZvcmUgdGhlIG90aGVycywgc28gaXQgY2FuIGJlIHVzZWQgaW4gdGhlXG4gICAqIGRlY2xhcmF0aW9uIG9mIGBmaXJzdCRgLiBUaGVuLCBhZnRlciBib3RoIGBmaXJzdCRgIGFuZCBgc2Vjb25kJGAgYXJlXG4gICAqIGRlZmluZWQsIHdlIGhvb2sgYHNlY29uZFByb3h5JGAgd2l0aCBgc2Vjb25kJGAgd2l0aCBgaW1pdGF0ZSgpYCB0byB0ZWxsXG4gICAqIHRoYXQgdGhleSBhcmUgXCJ0aGUgc2FtZVwiLiBgaW1pdGF0ZWAgd2lsbCBub3QgdHJpZ2dlciB0aGUgc3RhcnQgb2YgYW55XG4gICAqIHN0cmVhbSwgaXQganVzdCBiaW5kcyBgc2Vjb25kUHJveHkkYCBhbmQgYHNlY29uZCRgIHRvZ2V0aGVyLlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIGlzIGFuIGV4YW1wbGUgd2hlcmUgYGltaXRhdGUoKWAgaXMgaW1wb3J0YW50IGluIEN5Y2xlLmpzXG4gICAqIGFwcGxpY2F0aW9ucy4gQSBwYXJlbnQgY29tcG9uZW50IGNvbnRhaW5zIHNvbWUgY2hpbGQgY29tcG9uZW50cy4gQSBjaGlsZFxuICAgKiBoYXMgYW4gYWN0aW9uIHN0cmVhbSB3aGljaCBpcyBnaXZlbiB0byB0aGUgcGFyZW50IHRvIGRlZmluZSBpdHMgc3RhdGU6XG4gICAqXG4gICAqIDwhLS0gc2tpcC1leGFtcGxlIC0tPlxuICAgKiBgYGBqc1xuICAgKiBjb25zdCBjaGlsZEFjdGlvblByb3h5JCA9IHhzLmNyZWF0ZSgpO1xuICAgKiBjb25zdCBwYXJlbnQgPSBQYXJlbnQoey4uLnNvdXJjZXMsIGNoaWxkQWN0aW9uJDogY2hpbGRBY3Rpb25Qcm94eSR9KTtcbiAgICogY29uc3QgY2hpbGRBY3Rpb24kID0gcGFyZW50LnN0YXRlJC5tYXAocyA9PiBzLmNoaWxkLmFjdGlvbiQpLmZsYXR0ZW4oKTtcbiAgICogY2hpbGRBY3Rpb25Qcm94eSQuaW1pdGF0ZShjaGlsZEFjdGlvbiQpO1xuICAgKiBgYGBcbiAgICpcbiAgICogTm90ZSwgdGhvdWdoLCB0aGF0ICoqYGltaXRhdGUoKWAgZG9lcyBub3Qgc3VwcG9ydCBNZW1vcnlTdHJlYW1zKiouIElmIHdlXG4gICAqIHdvdWxkIGF0dGVtcHQgdG8gaW1pdGF0ZSBhIE1lbW9yeVN0cmVhbSBpbiBhIGNpcmN1bGFyIGRlcGVuZGVuY3ksIHdlIHdvdWxkXG4gICAqIGVpdGhlciBnZXQgYSByYWNlIGNvbmRpdGlvbiAod2hlcmUgdGhlIHN5bXB0b20gd291bGQgYmUgXCJub3RoaW5nIGhhcHBlbnNcIilcbiAgICogb3IgYW4gaW5maW5pdGUgY3ljbGljIGVtaXNzaW9uIG9mIHZhbHVlcy4gSXQncyB1c2VmdWwgdG8gdGhpbmsgYWJvdXRcbiAgICogTWVtb3J5U3RyZWFtcyBhcyBjZWxscyBpbiBhIHNwcmVhZHNoZWV0LiBJdCBkb2Vzbid0IG1ha2UgYW55IHNlbnNlIHRvXG4gICAqIGRlZmluZSBhIHNwcmVhZHNoZWV0IGNlbGwgYEExYCB3aXRoIGEgZm9ybXVsYSB0aGF0IGRlcGVuZHMgb24gYEIxYCBhbmRcbiAgICogY2VsbCBgQjFgIGRlZmluZWQgd2l0aCBhIGZvcm11bGEgdGhhdCBkZXBlbmRzIG9uIGBBMWAuXG4gICAqXG4gICAqIElmIHlvdSBmaW5kIHlvdXJzZWxmIHdhbnRpbmcgdG8gdXNlIGBpbWl0YXRlKClgIHdpdGggYVxuICAgKiBNZW1vcnlTdHJlYW0sIHlvdSBzaG91bGQgcmV3b3JrIHlvdXIgY29kZSBhcm91bmQgYGltaXRhdGUoKWAgdG8gdXNlIGFcbiAgICogU3RyZWFtIGluc3RlYWQuIExvb2sgZm9yIHRoZSBzdHJlYW0gaW4gdGhlIGNpcmN1bGFyIGRlcGVuZGVuY3kgdGhhdFxuICAgKiByZXByZXNlbnRzIGFuIGV2ZW50IHN0cmVhbSwgYW5kIHRoYXQgd291bGQgYmUgYSBjYW5kaWRhdGUgZm9yIGNyZWF0aW5nIGFcbiAgICogcHJveHkgU3RyZWFtIHdoaWNoIHRoZW4gaW1pdGF0ZXMgdGhlIHRhcmdldCBTdHJlYW0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyZWFtfSB0YXJnZXQgVGhlIG90aGVyIHN0cmVhbSB0byBpbWl0YXRlIG9uIHRoZSBjdXJyZW50IG9uZS4gTXVzdFxuICAgKiBub3QgYmUgYSBNZW1vcnlTdHJlYW0uXG4gICAqL1xuICBpbWl0YXRlKHRhcmdldDogU3RyZWFtPFQ+KTogdm9pZCB7XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIE1lbW9yeVN0cmVhbSlcbiAgICAgIHRocm93IG5ldyBFcnJvcignQSBNZW1vcnlTdHJlYW0gd2FzIGdpdmVuIHRvIGltaXRhdGUoKSwgYnV0IGl0IG9ubHkgJyArXG4gICAgICAnc3VwcG9ydHMgYSBTdHJlYW0uIFJlYWQgbW9yZSBhYm91dCB0aGlzIHJlc3RyaWN0aW9uIGhlcmU6ICcgK1xuICAgICAgJ2h0dHBzOi8vZ2l0aHViLmNvbS9zdGFsdHoveHN0cmVhbSNmYXEnKTtcbiAgICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XG4gICAgZm9yIChsZXQgaWxzID0gdGhpcy5faWxzLCBOID0gaWxzLmxlbmd0aCwgaSA9IDA7IGkgPCBOOyBpKyspIHRhcmdldC5fYWRkKGlsc1tpXSk7XG4gICAgdGhpcy5faWxzID0gW107XG4gIH1cblxuICAvKipcbiAgICogRm9yY2VzIHRoZSBTdHJlYW0gdG8gZW1pdCB0aGUgZ2l2ZW4gdmFsdWUgdG8gaXRzIGxpc3RlbmVycy5cbiAgICpcbiAgICogQXMgdGhlIG5hbWUgaW5kaWNhdGVzLCBpZiB5b3UgdXNlIHRoaXMsIHlvdSBhcmUgbW9zdCBsaWtlbHkgZG9pbmcgc29tZXRoaW5nXG4gICAqIFRoZSBXcm9uZyBXYXkuIFBsZWFzZSB0cnkgdG8gdW5kZXJzdGFuZCB0aGUgcmVhY3RpdmUgd2F5IGJlZm9yZSB1c2luZyB0aGlzXG4gICAqIG1ldGhvZC4gVXNlIGl0IG9ubHkgd2hlbiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgXCJuZXh0XCIgdmFsdWUgeW91IHdhbnQgdG8gYnJvYWRjYXN0IHRvIGFsbCBsaXN0ZW5lcnMgb2ZcbiAgICogdGhpcyBTdHJlYW0uXG4gICAqL1xuICBzaGFtZWZ1bGx5U2VuZE5leHQodmFsdWU6IFQpIHtcbiAgICB0aGlzLl9uKHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZXMgdGhlIFN0cmVhbSB0byBlbWl0IHRoZSBnaXZlbiBlcnJvciB0byBpdHMgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBBcyB0aGUgbmFtZSBpbmRpY2F0ZXMsIGlmIHlvdSB1c2UgdGhpcywgeW91IGFyZSBtb3N0IGxpa2VseSBkb2luZyBzb21ldGhpbmdcbiAgICogVGhlIFdyb25nIFdheS4gUGxlYXNlIHRyeSB0byB1bmRlcnN0YW5kIHRoZSByZWFjdGl2ZSB3YXkgYmVmb3JlIHVzaW5nIHRoaXNcbiAgICogbWV0aG9kLiBVc2UgaXQgb25seSB3aGVuIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cbiAgICpcbiAgICogQHBhcmFtIHthbnl9IGVycm9yIFRoZSBlcnJvciB5b3Ugd2FudCB0byBicm9hZGNhc3QgdG8gYWxsIHRoZSBsaXN0ZW5lcnMgb2ZcbiAgICogdGhpcyBTdHJlYW0uXG4gICAqL1xuICBzaGFtZWZ1bGx5U2VuZEVycm9yKGVycm9yOiBhbnkpIHtcbiAgICB0aGlzLl9lKGVycm9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZXMgdGhlIFN0cmVhbSB0byBlbWl0IHRoZSBcImNvbXBsZXRlZFwiIGV2ZW50IHRvIGl0cyBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEFzIHRoZSBuYW1lIGluZGljYXRlcywgaWYgeW91IHVzZSB0aGlzLCB5b3UgYXJlIG1vc3QgbGlrZWx5IGRvaW5nIHNvbWV0aGluZ1xuICAgKiBUaGUgV3JvbmcgV2F5LiBQbGVhc2UgdHJ5IHRvIHVuZGVyc3RhbmQgdGhlIHJlYWN0aXZlIHdheSBiZWZvcmUgdXNpbmcgdGhpc1xuICAgKiBtZXRob2QuIFVzZSBpdCBvbmx5IHdoZW4geW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLlxuICAgKi9cbiAgc2hhbWVmdWxseVNlbmRDb21wbGV0ZSgpIHtcbiAgICB0aGlzLl9jKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIFwiZGVidWdcIiBsaXN0ZW5lciB0byB0aGUgc3RyZWFtLiBUaGVyZSBjYW4gb25seSBiZSBvbmUgZGVidWdcbiAgICogbGlzdGVuZXIsIHRoYXQncyB3aHkgdGhpcyBpcyAnc2V0RGVidWdMaXN0ZW5lcicuIFRvIHJlbW92ZSB0aGUgZGVidWdcbiAgICogbGlzdGVuZXIsIGp1c3QgY2FsbCBzZXREZWJ1Z0xpc3RlbmVyKG51bGwpLlxuICAgKlxuICAgKiBBIGRlYnVnIGxpc3RlbmVyIGlzIGxpa2UgYW55IG90aGVyIGxpc3RlbmVyLiBUaGUgb25seSBkaWZmZXJlbmNlIGlzIHRoYXQgYVxuICAgKiBkZWJ1ZyBsaXN0ZW5lciBpcyBcInN0ZWFsdGh5XCI6IGl0cyBwcmVzZW5jZS9hYnNlbmNlIGRvZXMgbm90IHRyaWdnZXIgdGhlXG4gICAqIHN0YXJ0L3N0b3Agb2YgdGhlIHN0cmVhbSAob3IgdGhlIHByb2R1Y2VyIGluc2lkZSB0aGUgc3RyZWFtKS4gVGhpcyBpc1xuICAgKiB1c2VmdWwgc28geW91IGNhbiBpbnNwZWN0IHdoYXQgaXMgZ29pbmcgb24gd2l0aG91dCBjaGFuZ2luZyB0aGUgYmVoYXZpb3JcbiAgICogb2YgdGhlIHByb2dyYW0uIElmIHlvdSBoYXZlIGFuIGlkbGUgc3RyZWFtIGFuZCB5b3UgYWRkIGEgbm9ybWFsIGxpc3RlbmVyIHRvXG4gICAqIGl0LCB0aGUgc3RyZWFtIHdpbGwgc3RhcnQgZXhlY3V0aW5nLiBCdXQgaWYgeW91IHNldCBhIGRlYnVnIGxpc3RlbmVyIG9uIGFuXG4gICAqIGlkbGUgc3RyZWFtLCBpdCB3b24ndCBzdGFydCBleGVjdXRpbmcgKG5vdCB1bnRpbCB0aGUgZmlyc3Qgbm9ybWFsIGxpc3RlbmVyXG4gICAqIGlzIGFkZGVkKS5cbiAgICpcbiAgICogQXMgdGhlIG5hbWUgaW5kaWNhdGVzLCB3ZSBkb24ndCByZWNvbW1lbmQgdXNpbmcgdGhpcyBtZXRob2QgdG8gYnVpbGQgYXBwXG4gICAqIGxvZ2ljLiBJbiBmYWN0LCBpbiBtb3N0IGNhc2VzIHRoZSBkZWJ1ZyBvcGVyYXRvciB3b3JrcyBqdXN0IGZpbmUuIE9ubHkgdXNlXG4gICAqIHRoaXMgb25lIGlmIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0xpc3RlbmVyPFQ+fSBsaXN0ZW5lclxuICAgKi9cbiAgc2V0RGVidWdMaXN0ZW5lcihsaXN0ZW5lcjogUGFydGlhbDxMaXN0ZW5lcjxUPj4gfCBudWxsIHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKCFsaXN0ZW5lcikge1xuICAgICAgdGhpcy5fZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fZGwgPSBOTyBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kID0gdHJ1ZTtcbiAgICAgIChsaXN0ZW5lciBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+KS5fbiA9IGxpc3RlbmVyLm5leHQgfHwgbm9vcDtcbiAgICAgIChsaXN0ZW5lciBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+KS5fZSA9IGxpc3RlbmVyLmVycm9yIHx8IG5vb3A7XG4gICAgICAobGlzdGVuZXIgYXMgSW50ZXJuYWxMaXN0ZW5lcjxUPikuX2MgPSBsaXN0ZW5lci5jb21wbGV0ZSB8fCBub29wO1xuICAgICAgdGhpcy5fZGwgPSBsaXN0ZW5lciBhcyBJbnRlcm5hbExpc3RlbmVyPFQ+O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWVtb3J5U3RyZWFtPFQ+IGV4dGVuZHMgU3RyZWFtPFQ+IHtcbiAgcHJpdmF0ZSBfdjogVDtcbiAgcHJpdmF0ZSBfaGFzOiBib29sZWFuID0gZmFsc2U7XG4gIGNvbnN0cnVjdG9yKHByb2R1Y2VyOiBJbnRlcm5hbFByb2R1Y2VyPFQ+KSB7XG4gICAgc3VwZXIocHJvZHVjZXIpO1xuICB9XG5cbiAgX24oeDogVCkge1xuICAgIHRoaXMuX3YgPSB4O1xuICAgIHRoaXMuX2hhcyA9IHRydWU7XG4gICAgc3VwZXIuX24oeCk7XG4gIH1cblxuICBfYWRkKGlsOiBJbnRlcm5hbExpc3RlbmVyPFQ+KTogdm9pZCB7XG4gICAgY29uc3QgdGEgPSB0aGlzLl90YXJnZXQ7XG4gICAgaWYgKHRhICE9PSBOTykgcmV0dXJuIHRhLl9hZGQoaWwpO1xuICAgIGNvbnN0IGEgPSB0aGlzLl9pbHM7XG4gICAgYS5wdXNoKGlsKTtcbiAgICBpZiAoYS5sZW5ndGggPiAxKSB7XG4gICAgICBpZiAodGhpcy5faGFzKSBpbC5fbih0aGlzLl92KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N0b3BJRCAhPT0gTk8pIHtcbiAgICAgIGlmICh0aGlzLl9oYXMpIGlsLl9uKHRoaXMuX3YpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3N0b3BJRCk7XG4gICAgICB0aGlzLl9zdG9wSUQgPSBOTztcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2hhcykgaWwuX24odGhpcy5fdik7IGVsc2Uge1xuICAgICAgY29uc3QgcCA9IHRoaXMuX3Byb2Q7XG4gICAgICBpZiAocCAhPT0gTk8pIHAuX3N0YXJ0KHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIF9zdG9wTm93KCkge1xuICAgIHRoaXMuX2hhcyA9IGZhbHNlO1xuICAgIHN1cGVyLl9zdG9wTm93KCk7XG4gIH1cblxuICBfeCgpOiB2b2lkIHtcbiAgICB0aGlzLl9oYXMgPSBmYWxzZTtcbiAgICBzdXBlci5feCgpO1xuICB9XG5cbiAgbWFwPFU+KHByb2plY3Q6ICh0OiBUKSA9PiBVKTogTWVtb3J5U3RyZWFtPFU+IHtcbiAgICByZXR1cm4gdGhpcy5fbWFwKHByb2plY3QpIGFzIE1lbW9yeVN0cmVhbTxVPjtcbiAgfVxuXG4gIG1hcFRvPFU+KHByb2plY3RlZFZhbHVlOiBVKTogTWVtb3J5U3RyZWFtPFU+IHtcbiAgICByZXR1cm4gc3VwZXIubWFwVG8ocHJvamVjdGVkVmFsdWUpIGFzIE1lbW9yeVN0cmVhbTxVPjtcbiAgfVxuXG4gIHRha2UoYW1vdW50OiBudW1iZXIpOiBNZW1vcnlTdHJlYW08VD4ge1xuICAgIHJldHVybiBzdXBlci50YWtlKGFtb3VudCkgYXMgTWVtb3J5U3RyZWFtPFQ+O1xuICB9XG5cbiAgZW5kV2hlbihvdGhlcjogU3RyZWFtPGFueT4pOiBNZW1vcnlTdHJlYW08VD4ge1xuICAgIHJldHVybiBzdXBlci5lbmRXaGVuKG90aGVyKSBhcyBNZW1vcnlTdHJlYW08VD47XG4gIH1cblxuICByZXBsYWNlRXJyb3IocmVwbGFjZTogKGVycjogYW55KSA9PiBTdHJlYW08VD4pOiBNZW1vcnlTdHJlYW08VD4ge1xuICAgIHJldHVybiBzdXBlci5yZXBsYWNlRXJyb3IocmVwbGFjZSkgYXMgTWVtb3J5U3RyZWFtPFQ+O1xuICB9XG5cbiAgcmVtZW1iZXIoKTogTWVtb3J5U3RyZWFtPFQ+IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGRlYnVnKCk6IE1lbW9yeVN0cmVhbTxUPjtcbiAgZGVidWcobGFiZWxPclNweTogc3RyaW5nKTogTWVtb3J5U3RyZWFtPFQ+O1xuICBkZWJ1ZyhsYWJlbE9yU3B5OiAodDogVCkgPT4gYW55KTogTWVtb3J5U3RyZWFtPFQ+O1xuICBkZWJ1ZyhsYWJlbE9yU3B5Pzogc3RyaW5nIHwgKCh0OiBUKSA9PiBhbnkpIHwgdW5kZWZpbmVkKTogTWVtb3J5U3RyZWFtPFQ+IHtcbiAgICByZXR1cm4gc3VwZXIuZGVidWcobGFiZWxPclNweSBhcyBhbnkpIGFzIE1lbW9yeVN0cmVhbTxUPjtcbiAgfVxufVxuXG5leHBvcnQge05PLCBOT19JTH07XG5jb25zdCB4cyA9IFN0cmVhbTtcbnR5cGUgeHM8VD4gPSBTdHJlYW08VD47XG5leHBvcnQgZGVmYXVsdCB4cztcbiJdfQ==","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction microtask() {\n    if (typeof MutationObserver !== 'undefined') {\n        var node_1 = document.createTextNode('');\n        var queue_1 = [];\n        var i_1 = 0;\n        new MutationObserver(function () {\n            while (queue_1.length) {\n                queue_1.shift()();\n            }\n        }).observe(node_1, { characterData: true });\n        return function (fn) {\n            queue_1.push(fn);\n            node_1.data = i_1 = 1 - i_1;\n        };\n    }\n    else if (typeof setImmediate !== 'undefined') {\n        return setImmediate;\n    }\n    else if (typeof process !== 'undefined') {\n        return process.nextTick;\n    }\n    else {\n        return setTimeout;\n    }\n}\nexports.default = microtask;\n//# sourceMappingURL=index.js.map","function getGlobal() {\n    var globalObj;\n    if (typeof window !== 'undefined') {\n        globalObj = window;\n    }\n    else if (typeof global !== 'undefined') {\n        globalObj = global;\n    }\n    else {\n        globalObj = this;\n    }\n    globalObj.Cyclejs = globalObj.Cyclejs || {};\n    globalObj = globalObj.Cyclejs;\n    globalObj.adaptStream = globalObj.adaptStream || (function (x) { return x; });\n    return globalObj;\n}\nexport function setAdapt(f) {\n    getGlobal().adaptStream = f;\n}\nexport function adapt(stream) {\n    return getGlobal().adaptStream(stream);\n}\n//# sourceMappingURL=adapt.js.map","import xs from 'xstream';\nimport quicktask from 'quicktask';\nimport { adapt } from './adapt';\nvar scheduleMicrotask = quicktask();\nexport function makeSinkProxies(drivers) {\n    var sinkProxies = {};\n    for (var name_1 in drivers) {\n        if (drivers.hasOwnProperty(name_1)) {\n            sinkProxies[name_1] = xs.create();\n        }\n    }\n    return sinkProxies;\n}\nexport function callDrivers(drivers, sinkProxies) {\n    var sources = {};\n    for (var name_2 in drivers) {\n        if (drivers.hasOwnProperty(name_2)) {\n            sources[name_2] = drivers[name_2](sinkProxies[name_2], name_2);\n            if (sources[name_2] && typeof sources[name_2] === 'object') {\n                sources[name_2]._isCycleSource = name_2;\n            }\n        }\n    }\n    return sources;\n}\n// NOTE: this will mutate `sources`.\nexport function adaptSources(sources) {\n    for (var name_3 in sources) {\n        if (sources.hasOwnProperty(name_3) &&\n            sources[name_3] &&\n            typeof sources[name_3]['shamefullySendNext'] === 'function') {\n            sources[name_3] = adapt(sources[name_3]);\n        }\n    }\n    return sources;\n}\nexport function replicateMany(sinks, sinkProxies) {\n    var sinkNames = Object.keys(sinks).filter(function (name) { return !!sinkProxies[name]; });\n    var buffers = {};\n    var replicators = {};\n    sinkNames.forEach(function (name) {\n        buffers[name] = { _n: [], _e: [] };\n        replicators[name] = {\n            next: function (x) { return buffers[name]._n.push(x); },\n            error: function (err) { return buffers[name]._e.push(err); },\n            complete: function () { },\n        };\n    });\n    var subscriptions = sinkNames.map(function (name) {\n        return xs.fromObservable(sinks[name]).subscribe(replicators[name]);\n    });\n    sinkNames.forEach(function (name) {\n        var listener = sinkProxies[name];\n        var next = function (x) {\n            scheduleMicrotask(function () { return listener._n(x); });\n        };\n        var error = function (err) {\n            scheduleMicrotask(function () {\n                (console.error || console.log)(err);\n                listener._e(err);\n            });\n        };\n        buffers[name]._n.forEach(next);\n        buffers[name]._e.forEach(error);\n        replicators[name].next = next;\n        replicators[name].error = error;\n        // because sink.subscribe(replicator) had mutated replicator to add\n        // _n, _e, _c, we must also update these:\n        replicators[name]._n = next;\n        replicators[name]._e = error;\n    });\n    buffers = null; // free up for GC\n    return function disposeReplication() {\n        subscriptions.forEach(function (s) { return s.unsubscribe(); });\n    };\n}\nexport function disposeSinkProxies(sinkProxies) {\n    Object.keys(sinkProxies).forEach(function (name) { return sinkProxies[name]._c(); });\n}\nexport function disposeSources(sources) {\n    for (var k in sources) {\n        if (sources.hasOwnProperty(k) &&\n            sources[k] &&\n            sources[k].dispose) {\n            sources[k].dispose();\n        }\n    }\n}\nexport function isObjectEmpty(obj) {\n    return Object.keys(obj).length === 0;\n}\n//# sourceMappingURL=internals.js.map","import { adaptSources, callDrivers, makeSinkProxies, disposeSources, disposeSinkProxies, isObjectEmpty, replicateMany, } from './internals';\n/**\n * A function that prepares the Cycle application to be executed. Takes a `main`\n * function and prepares to circularly connects it to the given collection of\n * driver functions. As an output, `setup()` returns an object with three\n * properties: `sources`, `sinks` and `run`. Only when `run()` is called will\n * the application actually execute. Refer to the documentation of `run()` for\n * more details.\n *\n * **Example:**\n * ```js\n * import {setup} from '@cycle/run';\n * const {sources, sinks, run} = setup(main, drivers);\n * // ...\n * const dispose = run(); // Executes the application\n * // ...\n * dispose();\n * ```\n *\n * @param {Function} main a function that takes `sources` as input and outputs\n * `sinks`.\n * @param {Object} drivers an object where keys are driver names and values\n * are driver functions.\n * @return {Object} an object with three properties: `sources`, `sinks` and\n * `run`. `sources` is the collection of driver sources, `sinks` is the\n * collection of driver sinks, these can be used for debugging or testing. `run`\n * is the function that once called will execute the application.\n * @function setup\n */\nexport function setup(main, drivers) {\n    if (typeof main !== \"function\") {\n        throw new Error(\"First argument given to Cycle must be the 'main' \" + \"function.\");\n    }\n    if (typeof drivers !== \"object\" || drivers === null) {\n        throw new Error(\"Second argument given to Cycle must be an object \" +\n            \"with driver functions as properties.\");\n    }\n    if (isObjectEmpty(drivers)) {\n        throw new Error(\"Second argument given to Cycle must be an object \" +\n            \"with at least one driver function declared as a property.\");\n    }\n    var engine = setupReusable(drivers);\n    var sinks = main(engine.sources);\n    if (typeof window !== 'undefined') {\n        window.Cyclejs = window.Cyclejs || {};\n        window.Cyclejs.sinks = sinks;\n    }\n    function _run() {\n        var disposeRun = engine.run(sinks);\n        return function dispose() {\n            disposeRun();\n            engine.dispose();\n        };\n    }\n    return { sinks: sinks, sources: engine.sources, run: _run };\n}\n/**\n * A partially-applied variant of setup() which accepts only the drivers, and\n * allows many `main` functions to execute and reuse this same set of drivers.\n *\n * Takes an object with driver functions as input, and outputs an object which\n * contains the generated sources (from those drivers) and a `run` function\n * (which in turn expects sinks as argument). This `run` function can be called\n * multiple times with different arguments, and it will reuse the drivers that\n * were passed to `setupReusable`.\n *\n * **Example:**\n * ```js\n * import {setupReusable} from '@cycle/run';\n * const {sources, run, dispose} = setupReusable(drivers);\n * // ...\n * const sinks = main(sources);\n * const disposeRun = run(sinks);\n * // ...\n * disposeRun();\n * // ...\n * dispose(); // ends the reusability of drivers\n * ```\n *\n * @param {Object} drivers an object where keys are driver names and values\n * are driver functions.\n * @return {Object} an object with three properties: `sources`, `run` and\n * `dispose`. `sources` is the collection of driver sources, `run` is the\n * function that once called with 'sinks' as argument, will execute the\n * application, tying together sources with sinks. `dispose` terminates the\n * reusable resources used by the drivers. Note also that `run` returns a\n * dispose function which terminates resources that are specific (not reusable)\n * to that run.\n * @function setupReusable\n */\nexport function setupReusable(drivers) {\n    if (typeof drivers !== \"object\" || drivers === null) {\n        throw new Error(\"Argument given to setupReusable must be an object \" +\n            \"with driver functions as properties.\");\n    }\n    if (isObjectEmpty(drivers)) {\n        throw new Error(\"Argument given to setupReusable must be an object \" +\n            \"with at least one driver function declared as a property.\");\n    }\n    var sinkProxies = makeSinkProxies(drivers);\n    var rawSources = callDrivers(drivers, sinkProxies);\n    var sources = adaptSources(rawSources);\n    function _run(sinks) {\n        return replicateMany(sinks, sinkProxies);\n    }\n    function disposeEngine() {\n        disposeSources(sources);\n        disposeSinkProxies(sinkProxies);\n    }\n    return { sources: sources, run: _run, dispose: disposeEngine };\n}\n/**\n * Takes a `main` function and circularly connects it to the given collection\n * of driver functions.\n *\n * **Example:**\n * ```js\n * import run from '@cycle/run';\n * const dispose = run(main, drivers);\n * // ...\n * dispose();\n * ```\n *\n * The `main` function expects a collection of \"source\" streams (returned from\n * drivers) as input, and should return a collection of \"sink\" streams (to be\n * given to drivers). A \"collection of streams\" is a JavaScript object where\n * keys match the driver names registered by the `drivers` object, and values\n * are the streams. Refer to the documentation of each driver to see more\n * details on what types of sources it outputs and sinks it receives.\n *\n * @param {Function} main a function that takes `sources` as input and outputs\n * `sinks`.\n * @param {Object} drivers an object where keys are driver names and values\n * are driver functions.\n * @return {Function} a dispose function, used to terminate the execution of the\n * Cycle.js program, cleaning up resources used.\n * @function run\n */\nexport function run(main, drivers) {\n    var program = setup(main, drivers);\n    if (typeof window !== 'undefined' &&\n        window['CyclejsDevTool_startGraphSerializer']) {\n        window['CyclejsDevTool_startGraphSerializer'](program.sinks);\n    }\n    return program.run();\n}\nexport default run;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction vnode(sel, data, children, text, elm) {\n    var key = data === undefined ? undefined : data.key;\n    return { sel: sel, data: data, children: children,\n        text: text, elm: elm, key: key };\n}\nexports.vnode = vnode;\nexports.default = vnode;\n//# sourceMappingURL=vnode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.array = Array.isArray;\nfunction primitive(s) {\n    return typeof s === 'string' || typeof s === 'number';\n}\nexports.primitive = primitive;\n//# sourceMappingURL=is.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar is = require(\"./is\");\nfunction addNS(data, children, sel) {\n    data.ns = 'http://www.w3.org/2000/svg';\n    if (sel !== 'foreignObject' && children !== undefined) {\n        for (var i = 0; i < children.length; ++i) {\n            var childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nfunction h(sel, b, c) {\n    var data = {}, children, text, i;\n    if (c !== undefined) {\n        data = b;\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (children !== undefined) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode_1.vnode(undefined, undefined, undefined, children[i], undefined);\n        }\n    }\n    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {\n        addNS(data, children, sel);\n    }\n    return vnode_1.vnode(sel, data, children, text, undefined);\n}\nexports.h = h;\n;\nexports.default = h;\n//# sourceMappingURL=h.js.map","import { h } from 'snabbdom/h';\nfunction copyToThunk(vnode, thunkVNode) {\n    thunkVNode.elm = vnode.elm;\n    vnode.data.fn = thunkVNode.data.fn;\n    vnode.data.args = thunkVNode.data.args;\n    vnode.data.isolate = thunkVNode.data.isolate;\n    thunkVNode.data = vnode.data;\n    thunkVNode.children = vnode.children;\n    thunkVNode.text = vnode.text;\n    thunkVNode.elm = vnode.elm;\n}\nfunction init(thunkVNode) {\n    var cur = thunkVNode.data;\n    var vnode = cur.fn.apply(undefined, cur.args);\n    copyToThunk(vnode, thunkVNode);\n}\nfunction prepatch(oldVnode, thunkVNode) {\n    var old = oldVnode.data, cur = thunkVNode.data;\n    var i;\n    var oldArgs = old.args, args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn.apply(undefined, args), thunkVNode);\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn.apply(undefined, args), thunkVNode);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunkVNode);\n}\nexport function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h(sel, {\n        key: key,\n        hook: { init: init, prepatch: prepatch },\n        fn: fn,\n        args: args,\n    });\n}\nexport default thunk;\n//# sourceMappingURL=thunk.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getGlobal() {\n    var globalObj;\n    if (typeof window !== 'undefined') {\n        globalObj = window;\n    }\n    else if (typeof global !== 'undefined') {\n        globalObj = global;\n    }\n    else {\n        globalObj = this;\n    }\n    globalObj.Cyclejs = globalObj.Cyclejs || {};\n    globalObj = globalObj.Cyclejs;\n    globalObj.adaptStream = globalObj.adaptStream || (function (x) { return x; });\n    return globalObj;\n}\nfunction setAdapt(f) {\n    getGlobal().adaptStream = f;\n}\nexports.setAdapt = setAdapt;\nfunction adapt(stream) {\n    return getGlobal().adaptStream(stream);\n}\nexports.adapt = adapt;\n//# sourceMappingURL=adapt.js.map","import { Stream } from 'xstream';\nexport function fromEvent(element, eventName, useCapture, preventDefault, passive) {\n    if (useCapture === void 0) { useCapture = false; }\n    if (preventDefault === void 0) { preventDefault = false; }\n    if (passive === void 0) { passive = false; }\n    return Stream.create({\n        element: element,\n        next: null,\n        start: function start(listener) {\n            if (preventDefault) {\n                this.next = function next(event) {\n                    preventDefaultConditional(event, preventDefault);\n                    listener.next(event);\n                };\n            }\n            else {\n                this.next = function next(event) {\n                    listener.next(event);\n                };\n            }\n            this.element.addEventListener(eventName, this.next, {\n                capture: useCapture,\n                passive: passive,\n            });\n        },\n        stop: function stop() {\n            this.element.removeEventListener(eventName, this.next, useCapture);\n        },\n    });\n}\nfunction matchObject(matcher, obj) {\n    var keys = Object.keys(matcher);\n    var n = keys.length;\n    for (var i = 0; i < n; i++) {\n        var k = keys[i];\n        if (typeof matcher[k] === 'object' && typeof obj[k] === 'object') {\n            if (!matchObject(matcher[k], obj[k])) {\n                return false;\n            }\n        }\n        else if (matcher[k] !== obj[k]) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function preventDefaultConditional(event, preventDefault) {\n    if (preventDefault) {\n        if (typeof preventDefault === 'boolean') {\n            event.preventDefault();\n        }\n        else if (typeof preventDefault === 'function') {\n            if (preventDefault(event)) {\n                event.preventDefault();\n            }\n        }\n        else if (typeof preventDefault === 'object') {\n            if (matchObject(preventDefault, event)) {\n                event.preventDefault();\n            }\n        }\n        else {\n            throw new Error('preventDefault has to be either a boolean, predicate function or object');\n        }\n    }\n}\n//# sourceMappingURL=fromEvent.js.map","import xs from 'xstream';\nimport { adapt } from '@cycle/run/lib/adapt';\nimport { fromEvent } from './fromEvent';\nvar DocumentDOMSource = /** @class */ (function () {\n    function DocumentDOMSource(_name) {\n        this._name = _name;\n    }\n    DocumentDOMSource.prototype.select = function (selector) {\n        // This functionality is still undefined/undecided.\n        return this;\n    };\n    DocumentDOMSource.prototype.elements = function () {\n        var out = adapt(xs.of([document]));\n        out._isCycleSource = this._name;\n        return out;\n    };\n    DocumentDOMSource.prototype.element = function () {\n        var out = adapt(xs.of(document));\n        out._isCycleSource = this._name;\n        return out;\n    };\n    DocumentDOMSource.prototype.events = function (eventType, options) {\n        if (options === void 0) { options = {}; }\n        var stream;\n        stream = fromEvent(document, eventType, options.useCapture, options.preventDefault);\n        var out = adapt(stream);\n        out._isCycleSource = this._name;\n        return out;\n    };\n    return DocumentDOMSource;\n}());\nexport { DocumentDOMSource };\n//# sourceMappingURL=DocumentDOMSource.js.map","import xs from 'xstream';\nimport { adapt } from '@cycle/run/lib/adapt';\nimport { fromEvent } from './fromEvent';\nvar BodyDOMSource = /** @class */ (function () {\n    function BodyDOMSource(_name) {\n        this._name = _name;\n    }\n    BodyDOMSource.prototype.select = function (selector) {\n        // This functionality is still undefined/undecided.\n        return this;\n    };\n    BodyDOMSource.prototype.elements = function () {\n        var out = adapt(xs.of([document.body]));\n        out._isCycleSource = this._name;\n        return out;\n    };\n    BodyDOMSource.prototype.element = function () {\n        var out = adapt(xs.of(document.body));\n        out._isCycleSource = this._name;\n        return out;\n    };\n    BodyDOMSource.prototype.events = function (eventType, options) {\n        if (options === void 0) { options = {}; }\n        var stream;\n        stream = fromEvent(document.body, eventType, options.useCapture, options.preventDefault);\n        var out = adapt(stream);\n        out._isCycleSource = this._name;\n        return out;\n    };\n    return BodyDOMSource;\n}());\nexport { BodyDOMSource };\n//# sourceMappingURL=BodyDOMSource.js.map","function isValidNode(obj) {\n    var ELEM_TYPE = 1;\n    var FRAG_TYPE = 11;\n    return typeof HTMLElement === 'object'\n        ? obj instanceof HTMLElement || obj instanceof DocumentFragment\n        : obj &&\n            typeof obj === 'object' &&\n            obj !== null &&\n            (obj.nodeType === ELEM_TYPE || obj.nodeType === FRAG_TYPE) &&\n            typeof obj.nodeName === 'string';\n}\nexport function isClassOrId(str) {\n    return str.length > 1 && (str[0] === '.' || str[0] === '#');\n}\nexport function isDocFrag(el) {\n    return el.nodeType === 11;\n}\nexport function checkValidContainer(container) {\n    if (typeof container !== 'string' && !isValidNode(container)) {\n        throw new Error('Given container is not a DOM element neither a selector string.');\n    }\n}\nexport function getValidNode(selectors) {\n    var domElement = typeof selectors === 'string'\n        ? document.querySelector(selectors)\n        : selectors;\n    if (typeof selectors === 'string' && domElement === null) {\n        throw new Error(\"Cannot render into unknown element `\" + selectors + \"`\");\n    }\n    return domElement;\n}\nexport function getSelectors(namespace) {\n    var res = '';\n    for (var i = namespace.length - 1; i >= 0; i--) {\n        if (namespace[i].type !== 'selector') {\n            break;\n        }\n        res = namespace[i].scope + ' ' + res;\n    }\n    return res.trim();\n}\nexport function isEqualNamespace(a, b) {\n    if (!Array.isArray(a) || !Array.isArray(b) || a.length !== b.length) {\n        return false;\n    }\n    for (var i = 0; i < a.length; i++) {\n        if (a[i].type !== b[i].type || a[i].scope !== b[i].scope) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function makeInsert(map) {\n    return function (type, elm, value) {\n        if (map.has(type)) {\n            var innerMap = map.get(type);\n            innerMap.set(elm, value);\n        }\n        else {\n            var innerMap = new Map();\n            innerMap.set(elm, value);\n            map.set(type, innerMap);\n        }\n    };\n}\n//# sourceMappingURL=utils.js.map","import { isEqualNamespace } from './utils';\nvar ScopeChecker = /** @class */ (function () {\n    function ScopeChecker(namespace, isolateModule) {\n        this.namespace = namespace;\n        this.isolateModule = isolateModule;\n        this._namespace = namespace.filter(function (n) { return n.type !== 'selector'; });\n    }\n    /**\n     * Checks whether the given element is *directly* in the scope of this\n     * scope checker. Being contained *indirectly* through other scopes\n     * is not valid. This is crucial for implementing parent-child isolation,\n     * so that the parent selectors don't search inside a child scope.\n     */\n    ScopeChecker.prototype.isDirectlyInScope = function (leaf) {\n        var namespace = this.isolateModule.getNamespace(leaf);\n        if (!namespace) {\n            return false;\n        }\n        if (this._namespace.length > namespace.length ||\n            !isEqualNamespace(this._namespace, namespace.slice(0, this._namespace.length))) {\n            return false;\n        }\n        for (var i = this._namespace.length; i < namespace.length; i++) {\n            if (namespace[i].type === 'total') {\n                return false;\n            }\n        }\n        return true;\n    };\n    return ScopeChecker;\n}());\nexport { ScopeChecker };\n//# sourceMappingURL=ScopeChecker.js.map","import { ScopeChecker } from './ScopeChecker';\nimport { getSelectors } from './utils';\nfunction toElArray(input) {\n    return Array.prototype.slice.call(input);\n}\nvar ElementFinder = /** @class */ (function () {\n    function ElementFinder(namespace, isolateModule) {\n        this.namespace = namespace;\n        this.isolateModule = isolateModule;\n    }\n    ElementFinder.prototype.call = function () {\n        var namespace = this.namespace;\n        var selector = getSelectors(namespace);\n        var scopeChecker = new ScopeChecker(namespace, this.isolateModule);\n        var topNode = this.isolateModule.getElement(namespace.filter(function (n) { return n.type !== 'selector'; }));\n        if (topNode === undefined) {\n            return [];\n        }\n        if (selector === '') {\n            return [topNode];\n        }\n        return toElArray(topNode.querySelectorAll(selector))\n            .filter(scopeChecker.isDirectlyInScope, scopeChecker)\n            .concat(topNode.matches(selector) ? [topNode] : []);\n    };\n    return ElementFinder;\n}());\nexport { ElementFinder };\n//# sourceMappingURL=ElementFinder.js.map","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport { isClassOrId } from './utils';\nexport function makeIsolateSink(namespace) {\n    return function (sink, scope) {\n        if (scope === ':root') {\n            return sink;\n        }\n        return sink.map(function (node) {\n            if (!node) {\n                return node;\n            }\n            var scopeObj = getScopeObj(scope);\n            var newNode = __assign({}, node, { data: __assign({}, node.data, { isolate: !node.data || !Array.isArray(node.data.isolate)\n                        ? namespace.concat([scopeObj])\n                        : node.data.isolate }) });\n            return __assign({}, newNode, { key: newNode.key !== undefined\n                    ? newNode.key\n                    : JSON.stringify(newNode.data.isolate) });\n        });\n    };\n}\nexport function getScopeObj(scope) {\n    return {\n        type: isClassOrId(scope) ? 'sibling' : 'total',\n        scope: scope,\n    };\n}\n//# sourceMappingURL=isolate.js.map","import { adapt } from '@cycle/run/lib/adapt';\nimport { DocumentDOMSource } from './DocumentDOMSource';\nimport { BodyDOMSource } from './BodyDOMSource';\nimport { ElementFinder } from './ElementFinder';\nimport { makeIsolateSink, getScopeObj } from './isolate';\nvar MainDOMSource = /** @class */ (function () {\n    function MainDOMSource(_rootElement$, _sanitation$, _namespace, _isolateModule, _eventDelegator, _name) {\n        if (_namespace === void 0) { _namespace = []; }\n        this._rootElement$ = _rootElement$;\n        this._sanitation$ = _sanitation$;\n        this._namespace = _namespace;\n        this._isolateModule = _isolateModule;\n        this._eventDelegator = _eventDelegator;\n        this._name = _name;\n        this.isolateSource = function (source, scope) {\n            return new MainDOMSource(source._rootElement$, source._sanitation$, source._namespace.concat(getScopeObj(scope)), source._isolateModule, source._eventDelegator, source._name);\n        };\n        this.isolateSink = makeIsolateSink(this._namespace);\n    }\n    MainDOMSource.prototype._elements = function () {\n        if (this._namespace.length === 0) {\n            return this._rootElement$.map(function (x) { return [x]; });\n        }\n        else {\n            var elementFinder_1 = new ElementFinder(this._namespace, this._isolateModule);\n            return this._rootElement$.map(function () { return elementFinder_1.call(); });\n        }\n    };\n    MainDOMSource.prototype.elements = function () {\n        var out = adapt(this._elements().remember());\n        out._isCycleSource = this._name;\n        return out;\n    };\n    MainDOMSource.prototype.element = function () {\n        var out = adapt(this._elements()\n            .filter(function (arr) { return arr.length > 0; })\n            .map(function (arr) { return arr[0]; })\n            .remember());\n        out._isCycleSource = this._name;\n        return out;\n    };\n    Object.defineProperty(MainDOMSource.prototype, \"namespace\", {\n        get: function () {\n            return this._namespace;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MainDOMSource.prototype.select = function (selector) {\n        if (typeof selector !== 'string') {\n            throw new Error(\"DOM driver's select() expects the argument to be a \" +\n                \"string as a CSS selector\");\n        }\n        if (selector === 'document') {\n            return new DocumentDOMSource(this._name);\n        }\n        if (selector === 'body') {\n            return new BodyDOMSource(this._name);\n        }\n        var namespace = selector === ':root'\n            ? []\n            : this._namespace.concat({ type: 'selector', scope: selector.trim() });\n        return new MainDOMSource(this._rootElement$, this._sanitation$, namespace, this._isolateModule, this._eventDelegator, this._name);\n    };\n    MainDOMSource.prototype.events = function (eventType, options, bubbles) {\n        if (options === void 0) { options = {}; }\n        if (typeof eventType !== \"string\") {\n            throw new Error(\"DOM driver's events() expects argument to be a \" +\n                \"string representing the event type to listen for.\");\n        }\n        var event$ = this._eventDelegator.addEventListener(eventType, this._namespace, options, bubbles);\n        var out = adapt(event$);\n        out._isCycleSource = this._name;\n        return out;\n    };\n    MainDOMSource.prototype.dispose = function () {\n        this._sanitation$.shamefullySendNext(null);\n        //this._isolateModule.reset();\n    };\n    return MainDOMSource;\n}());\nexport { MainDOMSource };\n//# sourceMappingURL=MainDOMSource.js.map","export function vnode(sel, data, children, text, elm) {\n    var key = data === undefined ? undefined : data.key;\n    return { sel: sel, data: data, children: children,\n        text: text, elm: elm, key: key };\n}\nexport default vnode;\n//# sourceMappingURL=vnode.js.map","export var array = Array.isArray;\nexport function primitive(s) {\n    return typeof s === 'string' || typeof s === 'number';\n}\n//# sourceMappingURL=is.js.map","function createElement(tagName) {\n    return document.createElement(tagName);\n}\nfunction createElementNS(namespaceURI, qualifiedName) {\n    return document.createElementNS(namespaceURI, qualifiedName);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexport var htmlDomApi = {\n    createElement: createElement,\n    createElementNS: createElementNS,\n    createTextNode: createTextNode,\n    createComment: createComment,\n    insertBefore: insertBefore,\n    removeChild: removeChild,\n    appendChild: appendChild,\n    parentNode: parentNode,\n    nextSibling: nextSibling,\n    tagName: tagName,\n    setTextContent: setTextContent,\n    getTextContent: getTextContent,\n    isElement: isElement,\n    isText: isText,\n    isComment: isComment,\n};\nexport default htmlDomApi;\n//# sourceMappingURL=htmldomapi.js.map","import { vnode } from './vnode';\nimport * as is from './is';\nfunction addNS(data, children, sel) {\n    data.ns = 'http://www.w3.org/2000/svg';\n    if (sel !== 'foreignObject' && children !== undefined) {\n        for (var i = 0; i < children.length; ++i) {\n            var childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nexport function h(sel, b, c) {\n    var data = {}, children, text, i;\n    if (c !== undefined) {\n        data = b;\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (children !== undefined) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode(undefined, undefined, undefined, children[i], undefined);\n        }\n    }\n    if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g' &&\n        (sel.length === 3 || sel[3] === '.' || sel[3] === '#')) {\n        addNS(data, children, sel);\n    }\n    return vnode(sel, data, children, text, undefined);\n}\n;\nexport default h;\n//# sourceMappingURL=h.js.map","import { h } from './h';\nfunction copyToThunk(vnode, thunk) {\n    thunk.elm = vnode.elm;\n    vnode.data.fn = thunk.data.fn;\n    vnode.data.args = thunk.data.args;\n    thunk.data = vnode.data;\n    thunk.children = vnode.children;\n    thunk.text = vnode.text;\n    thunk.elm = vnode.elm;\n}\nfunction init(thunk) {\n    var cur = thunk.data;\n    var vnode = cur.fn.apply(undefined, cur.args);\n    copyToThunk(vnode, thunk);\n}\nfunction prepatch(oldVnode, thunk) {\n    var i, old = oldVnode.data, cur = thunk.data;\n    var oldArgs = old.args, args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn.apply(undefined, args), thunk);\n        return;\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn.apply(undefined, args), thunk);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunk);\n}\nexport var thunk = function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h(sel, {\n        key: key,\n        hook: { init: init, prepatch: prepatch },\n        fn: fn,\n        args: args\n    });\n};\nexport default thunk;\n//# sourceMappingURL=thunk.js.map","import vnode from './vnode';\nimport * as is from './is';\nimport htmlDomApi from './htmldomapi';\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\nvar emptyNode = vnode('', {}, [], undefined, undefined);\nfunction sameVnode(vnode1, vnode2) {\n    return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\nfunction isVnode(vnode) {\n    return vnode.sel !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var i, map = {}, key, ch;\n    for (i = beginIdx; i <= endIdx; ++i) {\n        ch = children[i];\n        if (ch != null) {\n            key = ch.key;\n            if (key !== undefined)\n                map[key] = i;\n        }\n    }\n    return map;\n}\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\nexport { h } from './h';\nexport { thunk } from './thunk';\nexport function init(modules, domApi) {\n    var i, j, cbs = {};\n    var api = domApi !== undefined ? domApi : htmlDomApi;\n    for (i = 0; i < hooks.length; ++i) {\n        cbs[hooks[i]] = [];\n        for (j = 0; j < modules.length; ++j) {\n            var hook = modules[j][hooks[i]];\n            if (hook !== undefined) {\n                cbs[hooks[i]].push(hook);\n            }\n        }\n    }\n    function emptyNodeAt(elm) {\n        var id = elm.id ? '#' + elm.id : '';\n        var c = elm.className ? '.' + elm.className.split(' ').join('.') : '';\n        return vnode(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n    }\n    function createRmCb(childElm, listeners) {\n        return function rmCb() {\n            if (--listeners === 0) {\n                var parent_1 = api.parentNode(childElm);\n                api.removeChild(parent_1, childElm);\n            }\n        };\n    }\n    function createElm(vnode, insertedVnodeQueue) {\n        var i, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.init)) {\n                i(vnode);\n                data = vnode.data;\n            }\n        }\n        var children = vnode.children, sel = vnode.sel;\n        if (sel === '!') {\n            if (isUndef(vnode.text)) {\n                vnode.text = '';\n            }\n            vnode.elm = api.createComment(vnode.text);\n        }\n        else if (sel !== undefined) {\n            // Parse selector\n            var hashIdx = sel.indexOf('#');\n            var dotIdx = sel.indexOf('.', hashIdx);\n            var hash = hashIdx > 0 ? hashIdx : sel.length;\n            var dot = dotIdx > 0 ? dotIdx : sel.length;\n            var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n            var elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? api.createElementNS(i, tag)\n                : api.createElement(tag);\n            if (hash < dot)\n                elm.setAttribute('id', sel.slice(hash + 1, dot));\n            if (dotIdx > 0)\n                elm.setAttribute('class', sel.slice(dot + 1).replace(/\\./g, ' '));\n            for (i = 0; i < cbs.create.length; ++i)\n                cbs.create[i](emptyNode, vnode);\n            if (is.array(children)) {\n                for (i = 0; i < children.length; ++i) {\n                    var ch = children[i];\n                    if (ch != null) {\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\n                    }\n                }\n            }\n            else if (is.primitive(vnode.text)) {\n                api.appendChild(elm, api.createTextNode(vnode.text));\n            }\n            i = vnode.data.hook; // Reuse variable\n            if (isDef(i)) {\n                if (i.create)\n                    i.create(emptyNode, vnode);\n                if (i.insert)\n                    insertedVnodeQueue.push(vnode);\n            }\n        }\n        else {\n            vnode.elm = api.createTextNode(vnode.text);\n        }\n        return vnode.elm;\n    }\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var ch = vnodes[startIdx];\n            if (ch != null) {\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n            }\n        }\n    }\n    function invokeDestroyHook(vnode) {\n        var i, j, data = vnode.data;\n        if (data !== undefined) {\n            if (isDef(i = data.hook) && isDef(i = i.destroy))\n                i(vnode);\n            for (i = 0; i < cbs.destroy.length; ++i)\n                cbs.destroy[i](vnode);\n            if (vnode.children !== undefined) {\n                for (j = 0; j < vnode.children.length; ++j) {\n                    i = vnode.children[j];\n                    if (i != null && typeof i !== \"string\") {\n                        invokeDestroyHook(i);\n                    }\n                }\n            }\n        }\n    }\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            var i_1 = void 0, listeners = void 0, rm = void 0, ch = vnodes[startIdx];\n            if (ch != null) {\n                if (isDef(ch.sel)) {\n                    invokeDestroyHook(ch);\n                    listeners = cbs.remove.length + 1;\n                    rm = createRmCb(ch.elm, listeners);\n                    for (i_1 = 0; i_1 < cbs.remove.length; ++i_1)\n                        cbs.remove[i_1](ch, rm);\n                    if (isDef(i_1 = ch.data) && isDef(i_1 = i_1.hook) && isDef(i_1 = i_1.remove)) {\n                        i_1(ch, rm);\n                    }\n                    else {\n                        rm();\n                    }\n                }\n                else {\n                    api.removeChild(parentElm, ch.elm);\n                }\n            }\n        }\n    }\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n        var oldStartIdx = 0, newStartIdx = 0;\n        var oldEndIdx = oldCh.length - 1;\n        var oldStartVnode = oldCh[0];\n        var oldEndVnode = oldCh[oldEndIdx];\n        var newEndIdx = newCh.length - 1;\n        var newStartVnode = newCh[0];\n        var newEndVnode = newCh[newEndIdx];\n        var oldKeyToIdx;\n        var idxInOld;\n        var elmToMove;\n        var before;\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n            if (oldStartVnode == null) {\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n            }\n            else if (oldEndVnode == null) {\n                oldEndVnode = oldCh[--oldEndIdx];\n            }\n            else if (newStartVnode == null) {\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (newEndVnode == null) {\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n                oldStartVnode = oldCh[++oldStartIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newEndVnode)) {\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n                oldStartVnode = oldCh[++oldStartIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldEndVnode, newStartVnode)) {\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                if (oldKeyToIdx === undefined) {\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n                }\n                idxInOld = oldKeyToIdx[newStartVnode.key];\n                if (isUndef(idxInOld)) {\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    newStartVnode = newCh[++newStartIdx];\n                }\n                else {\n                    elmToMove = oldCh[idxInOld];\n                    if (elmToMove.sel !== newStartVnode.sel) {\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    }\n                    else {\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n                        oldCh[idxInOld] = undefined;\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                    }\n                    newStartVnode = newCh[++newStartIdx];\n                }\n            }\n        }\n        if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n            if (oldStartIdx > oldEndIdx) {\n                before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n                addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n            }\n            else {\n                removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n            }\n        }\n    }\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n        var i, hook;\n        if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n            i(oldVnode, vnode);\n        }\n        var elm = vnode.elm = oldVnode.elm;\n        var oldCh = oldVnode.children;\n        var ch = vnode.children;\n        if (oldVnode === vnode)\n            return;\n        if (vnode.data !== undefined) {\n            for (i = 0; i < cbs.update.length; ++i)\n                cbs.update[i](oldVnode, vnode);\n            i = vnode.data.hook;\n            if (isDef(i) && isDef(i = i.update))\n                i(oldVnode, vnode);\n        }\n        if (isUndef(vnode.text)) {\n            if (isDef(oldCh) && isDef(ch)) {\n                if (oldCh !== ch)\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n            }\n            else if (isDef(ch)) {\n                if (isDef(oldVnode.text))\n                    api.setTextContent(elm, '');\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n            }\n            else if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            else if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, '');\n            }\n        }\n        else if (oldVnode.text !== vnode.text) {\n            api.setTextContent(elm, vnode.text);\n        }\n        if (isDef(hook) && isDef(i = hook.postpatch)) {\n            i(oldVnode, vnode);\n        }\n    }\n    return function patch(oldVnode, vnode) {\n        var i, elm, parent;\n        var insertedVnodeQueue = [];\n        for (i = 0; i < cbs.pre.length; ++i)\n            cbs.pre[i]();\n        if (!isVnode(oldVnode)) {\n            oldVnode = emptyNodeAt(oldVnode);\n        }\n        if (sameVnode(oldVnode, vnode)) {\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\n        }\n        else {\n            elm = oldVnode.elm;\n            parent = api.parentNode(elm);\n            createElm(vnode, insertedVnodeQueue);\n            if (parent !== null) {\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n                removeVnodes(parent, [oldVnode], 0, 0);\n            }\n        }\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n        }\n        for (i = 0; i < cbs.post.length; ++i)\n            cbs.post[i]();\n        return vnode;\n    };\n}\n//# sourceMappingURL=snabbdom.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"../index\");\nvar ConcatProducer = /** @class */ (function () {\n    function ConcatProducer(streams) {\n        this.streams = streams;\n        this.type = 'concat';\n        this.out = null;\n        this.i = 0;\n    }\n    ConcatProducer.prototype._start = function (out) {\n        this.out = out;\n        this.streams[this.i]._add(this);\n    };\n    ConcatProducer.prototype._stop = function () {\n        var streams = this.streams;\n        if (this.i < streams.length) {\n            streams[this.i]._remove(this);\n        }\n        this.i = 0;\n        this.out = null;\n    };\n    ConcatProducer.prototype._n = function (t) {\n        var u = this.out;\n        if (!u)\n            return;\n        u._n(t);\n    };\n    ConcatProducer.prototype._e = function (err) {\n        var u = this.out;\n        if (!u)\n            return;\n        u._e(err);\n    };\n    ConcatProducer.prototype._c = function () {\n        var u = this.out;\n        if (!u)\n            return;\n        var streams = this.streams;\n        streams[this.i]._remove(this);\n        if (++this.i < streams.length) {\n            streams[this.i]._add(this);\n        }\n        else {\n            u._c();\n        }\n    };\n    return ConcatProducer;\n}());\n/**\n * Puts one stream after the other. *concat* is a factory that takes multiple\n * streams as arguments, and starts the `n+1`-th stream only when the `n`-th\n * stream has completed. It concatenates those streams together.\n *\n * Marble diagram:\n *\n * ```text\n * --1--2---3---4-|\n * ...............--a-b-c--d-|\n *           concat\n * --1--2---3---4---a-b-c--d-|\n * ```\n *\n * Example:\n *\n * ```js\n * import concat from 'xstream/extra/concat'\n *\n * const streamA = xs.of('a', 'b', 'c')\n * const streamB = xs.of(10, 20, 30)\n * const streamC = xs.of('X', 'Y', 'Z')\n *\n * const outputStream = concat(streamA, streamB, streamC)\n *\n * outputStream.addListener({\n *   next: (x) => console.log(x),\n *   error: (err) => console.error(err),\n *   complete: () => console.log('concat completed'),\n * })\n * ```\n *\n * @factory true\n * @param {Stream} stream1 A stream to concatenate together with other streams.\n * @param {Stream} stream2 A stream to concatenate together with other streams. Two\n * or more streams may be given as arguments.\n * @return {Stream}\n */\nfunction concat() {\n    var streams = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        streams[_i] = arguments[_i];\n    }\n    return new index_1.Stream(new ConcatProducer(streams));\n}\nexports.default = concat;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uY2F0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2V4dHJhL2NvbmNhdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGtDQUErRTtBQUUvRTtJQUtFLHdCQUFtQixPQUF5QjtRQUF6QixZQUFPLEdBQVAsT0FBTyxDQUFrQjtRQUpyQyxTQUFJLEdBQUcsUUFBUSxDQUFDO1FBQ2hCLFFBQUcsR0FBYyxJQUFXLENBQUM7UUFDNUIsTUFBQyxHQUFXLENBQUMsQ0FBQztJQUd0QixDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFPLEdBQWM7UUFDbkIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVELDhCQUFLLEdBQUw7UUFDRSxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzdCLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFO1lBQzNCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQy9CO1FBQ0QsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDWCxJQUFJLENBQUMsR0FBRyxHQUFHLElBQVcsQ0FBQztJQUN6QixDQUFDO0lBRUQsMkJBQUUsR0FBRixVQUFHLENBQUk7UUFDTCxJQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ25CLElBQUksQ0FBQyxDQUFDO1lBQUUsT0FBTztRQUNmLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDVixDQUFDO0lBRUQsMkJBQUUsR0FBRixVQUFHLEdBQVE7UUFDVCxJQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ25CLElBQUksQ0FBQyxDQUFDO1lBQUUsT0FBTztRQUNmLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDWixDQUFDO0lBRUQsMkJBQUUsR0FBRjtRQUNFLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbkIsSUFBSSxDQUFDLENBQUM7WUFBRSxPQUFPO1FBQ2YsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM3QixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QixJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFO1lBQzdCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzVCO2FBQU07WUFDTCxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7U0FDUjtJQUNILENBQUM7SUFDSCxxQkFBQztBQUFELENBQUMsQUE3Q0QsSUE2Q0M7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXFDRztBQUNIO0lBQWtDLGlCQUE0QjtTQUE1QixVQUE0QixFQUE1QixxQkFBNEIsRUFBNUIsSUFBNEI7UUFBNUIsNEJBQTRCOztJQUM1RCxPQUFPLElBQUksY0FBTSxDQUFJLElBQUksY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDcEQsQ0FBQztBQUZELHlCQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtTdHJlYW0sIEludGVybmFsUHJvZHVjZXIsIEludGVybmFsTGlzdGVuZXIsIE91dFNlbmRlcn0gZnJvbSAnLi4vaW5kZXgnO1xuXG5jbGFzcyBDb25jYXRQcm9kdWNlcjxUPiBpbXBsZW1lbnRzIEludGVybmFsUHJvZHVjZXI8VD4sIEludGVybmFsTGlzdGVuZXI8VD4sIE91dFNlbmRlcjxUPiB7XG4gIHB1YmxpYyB0eXBlID0gJ2NvbmNhdCc7XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxUPiA9IG51bGwgYXMgYW55O1xuICBwcml2YXRlIGk6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IocHVibGljIHN0cmVhbXM6IEFycmF5PFN0cmVhbTxUPj4pIHtcbiAgfVxuXG4gIF9zdGFydChvdXQ6IFN0cmVhbTxUPik6IHZvaWQge1xuICAgIHRoaXMub3V0ID0gb3V0O1xuICAgIHRoaXMuc3RyZWFtc1t0aGlzLmldLl9hZGQodGhpcyk7XG4gIH1cblxuICBfc3RvcCgpOiB2b2lkIHtcbiAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5zdHJlYW1zO1xuICAgIGlmICh0aGlzLmkgPCBzdHJlYW1zLmxlbmd0aCkge1xuICAgICAgc3RyZWFtc1t0aGlzLmldLl9yZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHRoaXMuaSA9IDA7XG4gICAgdGhpcy5vdXQgPSBudWxsIGFzIGFueTtcbiAgfVxuXG4gIF9uKHQ6IFQpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKCF1KSByZXR1cm47XG4gICAgdS5fbih0KTtcbiAgfVxuXG4gIF9lKGVycjogYW55KSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICghdSkgcmV0dXJuO1xuICAgIHUuX2UoZXJyKTtcbiAgfVxuXG4gIF9jKCkge1xuICAgIGNvbnN0IHUgPSB0aGlzLm91dDtcbiAgICBpZiAoIXUpIHJldHVybjtcbiAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5zdHJlYW1zO1xuICAgIHN0cmVhbXNbdGhpcy5pXS5fcmVtb3ZlKHRoaXMpO1xuICAgIGlmICgrK3RoaXMuaSA8IHN0cmVhbXMubGVuZ3RoKSB7XG4gICAgICBzdHJlYW1zW3RoaXMuaV0uX2FkZCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdS5fYygpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFB1dHMgb25lIHN0cmVhbSBhZnRlciB0aGUgb3RoZXIuICpjb25jYXQqIGlzIGEgZmFjdG9yeSB0aGF0IHRha2VzIG11bHRpcGxlXG4gKiBzdHJlYW1zIGFzIGFyZ3VtZW50cywgYW5kIHN0YXJ0cyB0aGUgYG4rMWAtdGggc3RyZWFtIG9ubHkgd2hlbiB0aGUgYG5gLXRoXG4gKiBzdHJlYW0gaGFzIGNvbXBsZXRlZC4gSXQgY29uY2F0ZW5hdGVzIHRob3NlIHN0cmVhbXMgdG9nZXRoZXIuXG4gKlxuICogTWFyYmxlIGRpYWdyYW06XG4gKlxuICogYGBgdGV4dFxuICogLS0xLS0yLS0tMy0tLTQtfFxuICogLi4uLi4uLi4uLi4uLi4uLS1hLWItYy0tZC18XG4gKiAgICAgICAgICAgY29uY2F0XG4gKiAtLTEtLTItLS0zLS0tNC0tLWEtYi1jLS1kLXxcbiAqIGBgYFxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBjb25jYXQgZnJvbSAneHN0cmVhbS9leHRyYS9jb25jYXQnXG4gKlxuICogY29uc3Qgc3RyZWFtQSA9IHhzLm9mKCdhJywgJ2InLCAnYycpXG4gKiBjb25zdCBzdHJlYW1CID0geHMub2YoMTAsIDIwLCAzMClcbiAqIGNvbnN0IHN0cmVhbUMgPSB4cy5vZignWCcsICdZJywgJ1onKVxuICpcbiAqIGNvbnN0IG91dHB1dFN0cmVhbSA9IGNvbmNhdChzdHJlYW1BLCBzdHJlYW1CLCBzdHJlYW1DKVxuICpcbiAqIG91dHB1dFN0cmVhbS5hZGRMaXN0ZW5lcih7XG4gKiAgIG5leHQ6ICh4KSA9PiBjb25zb2xlLmxvZyh4KSxcbiAqICAgZXJyb3I6IChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSxcbiAqICAgY29tcGxldGU6ICgpID0+IGNvbnNvbGUubG9nKCdjb25jYXQgY29tcGxldGVkJyksXG4gKiB9KVxuICogYGBgXG4gKlxuICogQGZhY3RvcnkgdHJ1ZVxuICogQHBhcmFtIHtTdHJlYW19IHN0cmVhbTEgQSBzdHJlYW0gdG8gY29uY2F0ZW5hdGUgdG9nZXRoZXIgd2l0aCBvdGhlciBzdHJlYW1zLlxuICogQHBhcmFtIHtTdHJlYW19IHN0cmVhbTIgQSBzdHJlYW0gdG8gY29uY2F0ZW5hdGUgdG9nZXRoZXIgd2l0aCBvdGhlciBzdHJlYW1zLiBUd29cbiAqIG9yIG1vcmUgc3RyZWFtcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnRzLlxuICogQHJldHVybiB7U3RyZWFtfVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25jYXQ8VD4oLi4uc3RyZWFtczogQXJyYXk8U3RyZWFtPFQ+Pik6IFN0cmVhbTxUPiB7XG4gIHJldHVybiBuZXcgU3RyZWFtPFQ+KG5ldyBDb25jYXRQcm9kdWNlcihzdHJlYW1zKSk7XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"../index\");\nvar NO = {};\nvar SampleCombineListener = /** @class */ (function () {\n    function SampleCombineListener(i, p) {\n        this.i = i;\n        this.p = p;\n        p.ils[i] = this;\n    }\n    SampleCombineListener.prototype._n = function (t) {\n        var p = this.p;\n        if (p.out === NO)\n            return;\n        p.up(t, this.i);\n    };\n    SampleCombineListener.prototype._e = function (err) {\n        this.p._e(err);\n    };\n    SampleCombineListener.prototype._c = function () {\n        this.p.down(this.i, this);\n    };\n    return SampleCombineListener;\n}());\nexports.SampleCombineListener = SampleCombineListener;\nvar SampleCombineOperator = /** @class */ (function () {\n    function SampleCombineOperator(ins, streams) {\n        this.type = 'sampleCombine';\n        this.ins = ins;\n        this.others = streams;\n        this.out = NO;\n        this.ils = [];\n        this.Nn = 0;\n        this.vals = [];\n    }\n    SampleCombineOperator.prototype._start = function (out) {\n        this.out = out;\n        var s = this.others;\n        var n = this.Nn = s.length;\n        var vals = this.vals = new Array(n);\n        for (var i = 0; i < n; i++) {\n            vals[i] = NO;\n            s[i]._add(new SampleCombineListener(i, this));\n        }\n        this.ins._add(this);\n    };\n    SampleCombineOperator.prototype._stop = function () {\n        var s = this.others;\n        var n = s.length;\n        var ils = this.ils;\n        this.ins._remove(this);\n        for (var i = 0; i < n; i++) {\n            s[i]._remove(ils[i]);\n        }\n        this.out = NO;\n        this.vals = [];\n        this.ils = [];\n    };\n    SampleCombineOperator.prototype._n = function (t) {\n        var out = this.out;\n        if (out === NO)\n            return;\n        if (this.Nn > 0)\n            return;\n        out._n([t].concat(this.vals));\n    };\n    SampleCombineOperator.prototype._e = function (err) {\n        var out = this.out;\n        if (out === NO)\n            return;\n        out._e(err);\n    };\n    SampleCombineOperator.prototype._c = function () {\n        var out = this.out;\n        if (out === NO)\n            return;\n        out._c();\n    };\n    SampleCombineOperator.prototype.up = function (t, i) {\n        var v = this.vals[i];\n        if (this.Nn > 0 && v === NO) {\n            this.Nn--;\n        }\n        this.vals[i] = t;\n    };\n    SampleCombineOperator.prototype.down = function (i, l) {\n        this.others[i]._remove(l);\n    };\n    return SampleCombineOperator;\n}());\nexports.SampleCombineOperator = SampleCombineOperator;\nvar sampleCombine;\n/**\n *\n * Combines a source stream with multiple other streams. The result stream\n * will emit the latest events from all input streams, but only when the\n * source stream emits.\n *\n * If the source, or any input stream, throws an error, the result stream\n * will propagate the error. If any input streams end, their final emitted\n * value will remain in the array of any subsequent events from the result\n * stream.\n *\n * The result stream will only complete upon completion of the source stream.\n *\n * Marble diagram:\n *\n * ```text\n * --1----2-----3--------4--- (source)\n * ----a-----b-----c--d------ (other)\n *      sampleCombine\n * -------2a----3b-------4d--\n * ```\n *\n * Examples:\n *\n * ```js\n * import sampleCombine from 'xstream/extra/sampleCombine'\n * import xs from 'xstream'\n *\n * const sampler = xs.periodic(1000).take(3)\n * const other = xs.periodic(100)\n *\n * const stream = sampler.compose(sampleCombine(other))\n *\n * stream.addListener({\n *   next: i => console.log(i),\n *   error: err => console.error(err),\n *   complete: () => console.log('completed')\n * })\n * ```\n *\n * ```text\n * > [0, 8]\n * > [1, 18]\n * > [2, 28]\n * ```\n *\n * ```js\n * import sampleCombine from 'xstream/extra/sampleCombine'\n * import xs from 'xstream'\n *\n * const sampler = xs.periodic(1000).take(3)\n * const other = xs.periodic(100).take(2)\n *\n * const stream = sampler.compose(sampleCombine(other))\n *\n * stream.addListener({\n *   next: i => console.log(i),\n *   error: err => console.error(err),\n *   complete: () => console.log('completed')\n * })\n * ```\n *\n * ```text\n * > [0, 1]\n * > [1, 1]\n * > [2, 1]\n * ```\n *\n * @param {...Stream} streams One or more streams to combine with the sampler\n * stream.\n * @return {Stream}\n */\nsampleCombine = function sampleCombine() {\n    var streams = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        streams[_i] = arguments[_i];\n    }\n    return function sampleCombineOperator(sampler) {\n        return new index_1.Stream(new SampleCombineOperator(sampler, streams));\n    };\n};\nexports.default = sampleCombine;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2FtcGxlQ29tYmluZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9leHRyYS9zYW1wbGVDb21iaW5lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsa0NBQTREO0FBa0Q1RCxJQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFFZDtJQUNFLCtCQUFvQixDQUFTLEVBQVUsQ0FBNkI7UUFBaEQsTUFBQyxHQUFELENBQUMsQ0FBUTtRQUFVLE1BQUMsR0FBRCxDQUFDLENBQTRCO1FBQ2xFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxrQ0FBRSxHQUFGLFVBQUcsQ0FBSTtRQUNMLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUU7WUFBRSxPQUFPO1FBQ3pCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixDQUFDO0lBRUQsa0NBQUUsR0FBRixVQUFHLEdBQVE7UUFDVCxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQixDQUFDO0lBRUQsa0NBQUUsR0FBRjtRQUNFLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNILDRCQUFDO0FBQUQsQ0FBQyxBQWxCRCxJQWtCQztBQWxCWSxzREFBcUI7QUFvQmxDO0lBU0UsK0JBQVksR0FBYyxFQUFFLE9BQTJCO1FBUmhELFNBQUksR0FBRyxlQUFlLENBQUM7UUFTNUIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztRQUN0QixJQUFJLENBQUMsR0FBRyxHQUFHLEVBQXdCLENBQUM7UUFD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R0FBRyxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUVELG9DQUFJLEdBQUosVUFBSyxDQUFTLEVBQUUsQ0FBNkI7UUFDM0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUNILDRCQUFDO0FBQUQsQ0FBQyxBQXpFRCxJQXlFQztBQXpFWSxzREFBcUI7QUEyRWxDLElBQUksYUFBcUMsQ0FBQztBQUUxQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1RUc7QUFDSCxhQUFhLEdBQUc7SUFBdUIsaUJBQThCO1NBQTlCLFVBQThCLEVBQTlCLHFCQUE4QixFQUE5QixJQUE4QjtRQUE5Qiw0QkFBOEI7O0lBQ25FLE9BQU8sK0JBQStCLE9BQW9CO1FBQ3hELE9BQU8sSUFBSSxjQUFNLENBQWEsSUFBSSxxQkFBcUIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM3RSxDQUFDLENBQUM7QUFDSixDQUEyQixDQUFDO0FBRTVCLGtCQUFlLGFBQWEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW50ZXJuYWxMaXN0ZW5lciwgT3BlcmF0b3IsIFN0cmVhbX0gZnJvbSAnLi4vaW5kZXgnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNhbXBsZUNvbWJpbmVTaWduYXR1cmUge1xuICAoKTogPFQ+KHM6IFN0cmVhbTxUPikgPT4gU3RyZWFtPFtUXT47XG4gIDxUMT4oczE6IFN0cmVhbTxUMT4pOiA8VD4oczogU3RyZWFtPFQ+KSA9PiBTdHJlYW08W1QsIFQxXT47XG4gIDxUMSwgVDI+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+KTogPFQ+KHM6IFN0cmVhbTxUPikgPT4gU3RyZWFtPFtULCBUMSwgVDJdPjtcbiAgPFQxLCBUMiwgVDM+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+LFxuICAgIHMzOiBTdHJlYW08VDM+KTogPFQ+KHM6IFN0cmVhbTxUPikgPT4gU3RyZWFtPFtULCBUMSwgVDIsIFQzXT47XG4gIDxUMSwgVDIsIFQzLCBUND4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4pOiA8VD4oczogU3RyZWFtPFQ+KSA9PiBTdHJlYW08W1QsIFQxLCBUMiwgVDMsIFQ0XT47XG4gIDxUMSwgVDIsIFQzLCBUNCwgVDU+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+LFxuICAgIHMzOiBTdHJlYW08VDM+LFxuICAgIHM0OiBTdHJlYW08VDQ+LFxuICAgIHM1OiBTdHJlYW08VDU+KTogPFQ+KHM6IFN0cmVhbTxUPikgPT4gU3RyZWFtPFtULCBUMSwgVDIsIFQzLCBUNCwgVDVdPjtcbiAgPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDY+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+LFxuICAgIHMzOiBTdHJlYW08VDM+LFxuICAgIHM0OiBTdHJlYW08VDQ+LFxuICAgIHM1OiBTdHJlYW08VDU+LFxuICAgIHM2OiBTdHJlYW08VDY+KTogPFQ+KHM6IFN0cmVhbTxUPikgPT4gU3RyZWFtPFtULCBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2XT47XG4gIDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNz4oXG4gICAgczE6IFN0cmVhbTxUMT4sXG4gICAgczI6IFN0cmVhbTxUMj4sXG4gICAgczM6IFN0cmVhbTxUMz4sXG4gICAgczQ6IFN0cmVhbTxUND4sXG4gICAgczU6IFN0cmVhbTxUNT4sXG4gICAgczY6IFN0cmVhbTxUNj4sXG4gICAgczc6IFN0cmVhbTxUNz4pOiA8VD4oczogU3RyZWFtPFQ+KSA9PiBTdHJlYW08W1QsIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3XT47XG4gIDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDg+KFxuICAgIHMxOiBTdHJlYW08VDE+LFxuICAgIHMyOiBTdHJlYW08VDI+LFxuICAgIHMzOiBTdHJlYW08VDM+LFxuICAgIHM0OiBTdHJlYW08VDQ+LFxuICAgIHM1OiBTdHJlYW08VDU+LFxuICAgIHM2OiBTdHJlYW08VDY+LFxuICAgIHM3OiBTdHJlYW08VDc+LFxuICAgIHM4OiBTdHJlYW08VDg+KTogPFQ+KHM6IFN0cmVhbTxUPikgPT4gU3RyZWFtPFtULCBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDhdPjtcbiAgKC4uLnN0cmVhbXM6IEFycmF5PFN0cmVhbTxhbnk+Pik6IChzOiBTdHJlYW08YW55PikgPT4gU3RyZWFtPEFycmF5PGFueT4+O1xufVxuXG5jb25zdCBOTyA9IHt9O1xuXG5leHBvcnQgY2xhc3MgU2FtcGxlQ29tYmluZUxpc3RlbmVyPFQ+IGltcGxlbWVudHMgSW50ZXJuYWxMaXN0ZW5lcjxUPiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaTogbnVtYmVyLCBwcml2YXRlIHA6IFNhbXBsZUNvbWJpbmVPcGVyYXRvcjxhbnk+KSB7XG4gICAgcC5pbHNbaV0gPSB0aGlzO1xuICB9XG5cbiAgX24odDogVCk6IHZvaWQge1xuICAgIGNvbnN0IHAgPSB0aGlzLnA7XG4gICAgaWYgKHAub3V0ID09PSBOTykgcmV0dXJuO1xuICAgIHAudXAodCwgdGhpcy5pKTtcbiAgfVxuXG4gIF9lKGVycjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5wLl9lKGVycik7XG4gIH1cblxuICBfYygpOiB2b2lkIHtcbiAgICB0aGlzLnAuZG93bih0aGlzLmksIHRoaXMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTYW1wbGVDb21iaW5lT3BlcmF0b3I8VD4gaW1wbGVtZW50cyBPcGVyYXRvcjxULCBBcnJheTxhbnk+PiB7XG4gIHB1YmxpYyB0eXBlID0gJ3NhbXBsZUNvbWJpbmUnO1xuICBwdWJsaWMgaW5zOiBTdHJlYW08VD47XG4gIHB1YmxpYyBvdGhlcnM6IEFycmF5PFN0cmVhbTxhbnk+PjtcbiAgcHVibGljIG91dDogU3RyZWFtPEFycmF5PGFueT4+O1xuICBwdWJsaWMgaWxzOiBBcnJheTxTYW1wbGVDb21iaW5lTGlzdGVuZXI8YW55Pj47XG4gIHB1YmxpYyBObjogbnVtYmVyOyAvLyAqTip1bWJlciBvZiBzdHJlYW1zIHN0aWxsIHRvIHNlbmQgKm4qZXh0XG4gIHB1YmxpYyB2YWxzOiBBcnJheTxhbnk+O1xuXG4gIGNvbnN0cnVjdG9yKGluczogU3RyZWFtPFQ+LCBzdHJlYW1zOiBBcnJheTxTdHJlYW08YW55Pj4pIHtcbiAgICB0aGlzLmlucyA9IGlucztcbiAgICB0aGlzLm90aGVycyA9IHN0cmVhbXM7XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08QXJyYXk8YW55Pj47XG4gICAgdGhpcy5pbHMgPSBbXTtcbiAgICB0aGlzLk5uID0gMDtcbiAgICB0aGlzLnZhbHMgPSBbXTtcbiAgfVxuXG4gIF9zdGFydChvdXQ6IFN0cmVhbTxBcnJheTxhbnk+Pik6IHZvaWQge1xuICAgIHRoaXMub3V0ID0gb3V0O1xuICAgIGNvbnN0IHMgPSB0aGlzLm90aGVycztcbiAgICBjb25zdCBuID0gdGhpcy5ObiA9IHMubGVuZ3RoO1xuICAgIGNvbnN0IHZhbHMgPSB0aGlzLnZhbHMgPSBuZXcgQXJyYXkobik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIHZhbHNbaV0gPSBOTztcbiAgICAgIHNbaV0uX2FkZChuZXcgU2FtcGxlQ29tYmluZUxpc3RlbmVyPGFueT4oaSwgdGhpcykpO1xuICAgIH1cbiAgICB0aGlzLmlucy5fYWRkKHRoaXMpO1xuICB9XG5cbiAgX3N0b3AoKTogdm9pZCB7XG4gICAgY29uc3QgcyA9IHRoaXMub3RoZXJzO1xuICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICBjb25zdCBpbHMgPSB0aGlzLmlscztcbiAgICB0aGlzLmlucy5fcmVtb3ZlKHRoaXMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBzW2ldLl9yZW1vdmUoaWxzW2ldKTtcbiAgICB9XG4gICAgdGhpcy5vdXQgPSBOTyBhcyBTdHJlYW08QXJyYXk8YW55Pj47XG4gICAgdGhpcy52YWxzID0gW107XG4gICAgdGhpcy5pbHMgPSBbXTtcbiAgfVxuXG4gIF9uKHQ6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBvdXQgPSB0aGlzLm91dDtcbiAgICBpZiAob3V0ID09PSBOTykgcmV0dXJuO1xuICAgIGlmICh0aGlzLk5uID4gMCkgcmV0dXJuO1xuICAgIG91dC5fbihbdCwgLi4udGhpcy52YWxzXSk7XG4gIH1cblxuICBfZShlcnI6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IG91dCA9IHRoaXMub3V0O1xuICAgIGlmIChvdXQgPT09IE5PKSByZXR1cm47XG4gICAgb3V0Ll9lKGVycik7XG4gIH1cblxuICBfYygpOiB2b2lkIHtcbiAgICBjb25zdCBvdXQgPSB0aGlzLm91dDtcbiAgICBpZiAob3V0ID09PSBOTykgcmV0dXJuO1xuICAgIG91dC5fYygpO1xuICB9XG5cbiAgdXAodDogYW55LCBpOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB2ID0gdGhpcy52YWxzW2ldO1xuICAgIGlmICh0aGlzLk5uID4gMCAmJiB2ID09PSBOTykge1xuICAgICAgdGhpcy5Obi0tO1xuICAgIH1cbiAgICB0aGlzLnZhbHNbaV0gPSB0O1xuICB9XG5cbiAgZG93bihpOiBudW1iZXIsIGw6IFNhbXBsZUNvbWJpbmVMaXN0ZW5lcjxhbnk+KTogdm9pZCB7XG4gICAgdGhpcy5vdGhlcnNbaV0uX3JlbW92ZShsKTtcbiAgfVxufVxuXG5sZXQgc2FtcGxlQ29tYmluZTogU2FtcGxlQ29tYmluZVNpZ25hdHVyZTtcblxuLyoqXG4gKlxuICogQ29tYmluZXMgYSBzb3VyY2Ugc3RyZWFtIHdpdGggbXVsdGlwbGUgb3RoZXIgc3RyZWFtcy4gVGhlIHJlc3VsdCBzdHJlYW1cbiAqIHdpbGwgZW1pdCB0aGUgbGF0ZXN0IGV2ZW50cyBmcm9tIGFsbCBpbnB1dCBzdHJlYW1zLCBidXQgb25seSB3aGVuIHRoZVxuICogc291cmNlIHN0cmVhbSBlbWl0cy5cbiAqXG4gKiBJZiB0aGUgc291cmNlLCBvciBhbnkgaW5wdXQgc3RyZWFtLCB0aHJvd3MgYW4gZXJyb3IsIHRoZSByZXN1bHQgc3RyZWFtXG4gKiB3aWxsIHByb3BhZ2F0ZSB0aGUgZXJyb3IuIElmIGFueSBpbnB1dCBzdHJlYW1zIGVuZCwgdGhlaXIgZmluYWwgZW1pdHRlZFxuICogdmFsdWUgd2lsbCByZW1haW4gaW4gdGhlIGFycmF5IG9mIGFueSBzdWJzZXF1ZW50IGV2ZW50cyBmcm9tIHRoZSByZXN1bHRcbiAqIHN0cmVhbS5cbiAqXG4gKiBUaGUgcmVzdWx0IHN0cmVhbSB3aWxsIG9ubHkgY29tcGxldGUgdXBvbiBjb21wbGV0aW9uIG9mIHRoZSBzb3VyY2Ugc3RyZWFtLlxuICpcbiAqIE1hcmJsZSBkaWFncmFtOlxuICpcbiAqIGBgYHRleHRcbiAqIC0tMS0tLS0yLS0tLS0zLS0tLS0tLS00LS0tIChzb3VyY2UpXG4gKiAtLS0tYS0tLS0tYi0tLS0tYy0tZC0tLS0tLSAob3RoZXIpXG4gKiAgICAgIHNhbXBsZUNvbWJpbmVcbiAqIC0tLS0tLS0yYS0tLS0zYi0tLS0tLS00ZC0tXG4gKiBgYGBcbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHNhbXBsZUNvbWJpbmUgZnJvbSAneHN0cmVhbS9leHRyYS9zYW1wbGVDb21iaW5lJ1xuICogaW1wb3J0IHhzIGZyb20gJ3hzdHJlYW0nXG4gKlxuICogY29uc3Qgc2FtcGxlciA9IHhzLnBlcmlvZGljKDEwMDApLnRha2UoMylcbiAqIGNvbnN0IG90aGVyID0geHMucGVyaW9kaWMoMTAwKVxuICpcbiAqIGNvbnN0IHN0cmVhbSA9IHNhbXBsZXIuY29tcG9zZShzYW1wbGVDb21iaW5lKG90aGVyKSlcbiAqXG4gKiBzdHJlYW0uYWRkTGlzdGVuZXIoe1xuICogICBuZXh0OiBpID0+IGNvbnNvbGUubG9nKGkpLFxuICogICBlcnJvcjogZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSxcbiAqICAgY29tcGxldGU6ICgpID0+IGNvbnNvbGUubG9nKCdjb21wbGV0ZWQnKVxuICogfSlcbiAqIGBgYFxuICpcbiAqIGBgYHRleHRcbiAqID4gWzAsIDhdXG4gKiA+IFsxLCAxOF1cbiAqID4gWzIsIDI4XVxuICogYGBgXG4gKlxuICogYGBganNcbiAqIGltcG9ydCBzYW1wbGVDb21iaW5lIGZyb20gJ3hzdHJlYW0vZXh0cmEvc2FtcGxlQ29tYmluZSdcbiAqIGltcG9ydCB4cyBmcm9tICd4c3RyZWFtJ1xuICpcbiAqIGNvbnN0IHNhbXBsZXIgPSB4cy5wZXJpb2RpYygxMDAwKS50YWtlKDMpXG4gKiBjb25zdCBvdGhlciA9IHhzLnBlcmlvZGljKDEwMCkudGFrZSgyKVxuICpcbiAqIGNvbnN0IHN0cmVhbSA9IHNhbXBsZXIuY29tcG9zZShzYW1wbGVDb21iaW5lKG90aGVyKSlcbiAqXG4gKiBzdHJlYW0uYWRkTGlzdGVuZXIoe1xuICogICBuZXh0OiBpID0+IGNvbnNvbGUubG9nKGkpLFxuICogICBlcnJvcjogZXJyID0+IGNvbnNvbGUuZXJyb3IoZXJyKSxcbiAqICAgY29tcGxldGU6ICgpID0+IGNvbnNvbGUubG9nKCdjb21wbGV0ZWQnKVxuICogfSlcbiAqIGBgYFxuICpcbiAqIGBgYHRleHRcbiAqID4gWzAsIDFdXG4gKiA+IFsxLCAxXVxuICogPiBbMiwgMV1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7Li4uU3RyZWFtfSBzdHJlYW1zIE9uZSBvciBtb3JlIHN0cmVhbXMgdG8gY29tYmluZSB3aXRoIHRoZSBzYW1wbGVyXG4gKiBzdHJlYW0uXG4gKiBAcmV0dXJuIHtTdHJlYW19XG4gKi9cbnNhbXBsZUNvbWJpbmUgPSBmdW5jdGlvbiBzYW1wbGVDb21iaW5lKC4uLnN0cmVhbXM6IEFycmF5PFN0cmVhbTxhbnk+Pikge1xuICByZXR1cm4gZnVuY3Rpb24gc2FtcGxlQ29tYmluZU9wZXJhdG9yKHNhbXBsZXI6IFN0cmVhbTxhbnk+KTogU3RyZWFtPEFycmF5PGFueT4+IHtcbiAgICByZXR1cm4gbmV3IFN0cmVhbTxBcnJheTxhbnk+PihuZXcgU2FtcGxlQ29tYmluZU9wZXJhdG9yKHNhbXBsZXIsIHN0cmVhbXMpKTtcbiAgfTtcbn0gYXMgU2FtcGxlQ29tYmluZVNpZ25hdHVyZTtcblxuZXhwb3J0IGRlZmF1bHQgc2FtcGxlQ29tYmluZTsiXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction createElement(tagName) {\n    return document.createElement(tagName);\n}\nfunction createElementNS(namespaceURI, qualifiedName) {\n    return document.createElementNS(namespaceURI, qualifiedName);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexports.htmlDomApi = {\n    createElement: createElement,\n    createElementNS: createElementNS,\n    createTextNode: createTextNode,\n    createComment: createComment,\n    insertBefore: insertBefore,\n    removeChild: removeChild,\n    appendChild: appendChild,\n    parentNode: parentNode,\n    nextSibling: nextSibling,\n    tagName: tagName,\n    setTextContent: setTextContent,\n    getTextContent: getTextContent,\n    isElement: isElement,\n    isText: isText,\n    isComment: isComment,\n};\nexports.default = exports.htmlDomApi;\n//# sourceMappingURL=htmldomapi.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_1 = require(\"./vnode\");\nvar htmldomapi_1 = require(\"./htmldomapi\");\nfunction toVNode(node, domApi) {\n    var api = domApi !== undefined ? domApi : htmldomapi_1.default;\n    var text;\n    if (api.isElement(node)) {\n        var id = node.id ? '#' + node.id : '';\n        var cn = node.getAttribute('class');\n        var c = cn ? '.' + cn.split(' ').join('.') : '';\n        var sel = api.tagName(node).toLowerCase() + id + c;\n        var attrs = {};\n        var children = [];\n        var name_1;\n        var i = void 0, n = void 0;\n        var elmAttrs = node.attributes;\n        var elmChildren = node.childNodes;\n        for (i = 0, n = elmAttrs.length; i < n; i++) {\n            name_1 = elmAttrs[i].nodeName;\n            if (name_1 !== 'id' && name_1 !== 'class') {\n                attrs[name_1] = elmAttrs[i].nodeValue;\n            }\n        }\n        for (i = 0, n = elmChildren.length; i < n; i++) {\n            children.push(toVNode(elmChildren[i], domApi));\n        }\n        return vnode_1.default(sel, { attrs: attrs }, children, undefined, node);\n    }\n    else if (api.isText(node)) {\n        text = api.getTextContent(node);\n        return vnode_1.default(undefined, undefined, undefined, text, node);\n    }\n    else if (api.isComment(node)) {\n        text = api.getTextContent(node);\n        return vnode_1.default('!', {}, [], text, node);\n    }\n    else {\n        return vnode_1.default('', {}, [], undefined, node);\n    }\n}\nexports.toVNode = toVNode;\nexports.default = toVNode;\n//# sourceMappingURL=tovnode.js.map","export function curry2(select) {\n    return function selector(sel, vNode) {\n        switch (arguments.length) {\n            case 0: return select;\n            case 1: return function (_vNode) { return select(sel, _vNode); };\n            default: return select(sel, vNode);\n        }\n    };\n}\n;\n//# sourceMappingURL=curry2.js.map","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar IDENT = '[\\\\w-]+';\nvar SPACE = '[ \\t]*';\nvar VALUE = \"[^\\\\]]+\";\nvar CLASS = \"(?:\\\\.\" + IDENT + \")\";\nvar ID = \"(?:#\" + IDENT + \")\";\nvar OP = \"(?:=|\\\\$=|\\\\^=|\\\\*=|~=|\\\\|=)\";\nvar ATTR = \"(?:\\\\[\" + SPACE + IDENT + SPACE + \"(?:\" + OP + SPACE + VALUE + SPACE + \")?\\\\])\";\nvar SUBTREE = \"(?:[ \\t]+)\";\nvar CHILD = \"(?:\" + SPACE + \"(>)\" + SPACE + \")\";\nvar NEXT_SIBLING = \"(?:\" + SPACE + \"(\\\\+)\" + SPACE + \")\";\nvar SIBLING = \"(?:\" + SPACE + \"(~)\" + SPACE + \")\";\nvar COMBINATOR = \"(?:\" + SUBTREE + \"|\" + CHILD + \"|\" + NEXT_SIBLING + \"|\" + SIBLING + \")\";\nvar CONTAINS = \"contains\\\\(\\\"[^\\\"]*\\\"\\\\)\";\nvar FORMULA = \"(?:even|odd|\\\\d*(?:-?n(?:\\\\+\\\\d+)?)?)\";\nvar NTH_CHILD = \"nth-child\\\\(\" + FORMULA + \"\\\\)\";\nvar PSEUDO = \":(?:first-child|last-child|\" + NTH_CHILD + \"|empty|root|\" + CONTAINS + \")\";\nvar TAG = \"(:?\" + IDENT + \")?\";\nvar TOKENS = CLASS + \"|\" + ID + \"|\" + ATTR + \"|\" + PSEUDO + \"|\" + COMBINATOR;\nvar combinatorRegex = new RegExp(\"^\" + COMBINATOR + \"$\");\n/**\n * Parses a css selector into a normalized object.\n * Expects a selector for a single element only, no `>` or the like!\n */\nexport function parseSelector(selector) {\n    var sel = selector.trim();\n    var tagRegex = new RegExp(TAG, 'y');\n    var tag = tagRegex.exec(sel)[0];\n    var regex = new RegExp(TOKENS, 'y');\n    regex.lastIndex = tagRegex.lastIndex;\n    var matches = [];\n    var nextSelector = undefined;\n    var lastCombinator = undefined;\n    var index = -1;\n    while (regex.lastIndex < sel.length) {\n        var match = regex.exec(sel);\n        if (!match && lastCombinator === undefined) {\n            throw new Error('Parse error, invalid selector');\n        }\n        else if (match && combinatorRegex.test(match[0])) {\n            var comb = combinatorRegex.exec(match[0])[0];\n            lastCombinator = comb;\n            index = regex.lastIndex;\n        }\n        else {\n            if (lastCombinator !== undefined) {\n                nextSelector = [\n                    getCombinator(lastCombinator),\n                    parseSelector(sel.substring(index))\n                ];\n                break;\n            }\n            matches.push(match[0]);\n        }\n    }\n    var classList = matches\n        .filter(function (s) { return s.startsWith('.'); })\n        .map(function (s) { return s.substring(1); });\n    var ids = matches.filter(function (s) { return s.startsWith('#'); }).map(function (s) { return s.substring(1); });\n    if (ids.length > 1) {\n        throw new Error('Invalid selector, only one id is allowed');\n    }\n    var postprocessRegex = new RegExp(\"(\" + IDENT + \")\" + SPACE + \"(\" + OP + \")?\" + SPACE + \"(\" + VALUE + \")?\");\n    var attrs = matches\n        .filter(function (s) { return s.startsWith('['); })\n        .map(function (s) { return postprocessRegex.exec(s).slice(1, 4); })\n        .map(function (_a) {\n        var attr = _a[0], op = _a[1], val = _a[2];\n        return (_b = {},\n            _b[attr] = [getOp(op), val ? parseAttrValue(val) : val],\n            _b);\n        var _b;\n    })\n        .reduce(function (acc, curr) { return (__assign({}, acc, curr)); }, {});\n    var pseudos = matches\n        .filter(function (s) { return s.startsWith(':'); })\n        .map(function (s) { return postProcessPseudos(s.substring(1)); });\n    return {\n        id: ids[0] || '',\n        tag: tag,\n        classList: classList,\n        attributes: attrs,\n        nextSelector: nextSelector,\n        pseudos: pseudos\n    };\n}\nfunction parseAttrValue(v) {\n    if (v.startsWith('\"')) {\n        return v.slice(1, -1);\n    }\n    if (v === \"true\") {\n        return true;\n    }\n    if (v === \"false\") {\n        return false;\n    }\n    var f = parseFloat(v);\n    if (isNaN(f)) {\n        return v;\n    }\n    return f;\n}\nfunction postProcessPseudos(sel) {\n    if (sel === 'first-child' ||\n        sel === 'last-child' ||\n        sel === 'root' ||\n        sel === 'empty') {\n        return [sel, undefined];\n    }\n    if (sel.startsWith('contains')) {\n        var text = sel.slice(10, -2);\n        return ['contains', text];\n    }\n    var content = sel.slice(10, -1);\n    if (content === 'even') {\n        content = '2n';\n    }\n    if (content === 'odd') {\n        content = '2n+1';\n    }\n    return ['nth-child', content];\n}\nfunction getOp(op) {\n    switch (op) {\n        case '=':\n            return 'exact';\n        case '^=':\n            return 'startsWith';\n        case '$=':\n            return 'endsWith';\n        case '*=':\n            return 'contains';\n        case '~=':\n            return 'whitespace';\n        case '|=':\n            return 'dash';\n        default:\n            return 'truthy';\n    }\n}\nfunction getCombinator(comb) {\n    switch (comb.trim()) {\n        case '>':\n            return 'child';\n        case '+':\n            return 'nextSibling';\n        case '~':\n            return 'sibling';\n        default:\n            return 'subtree';\n    }\n}\n//# sourceMappingURL=selectorParser.js.map","import { parseSelector } from './selectorParser';\nexport function createMatches(opts) {\n    return function matches(selector, node) {\n        var _a = typeof selector === 'object' ? selector : parseSelector(selector), tag = _a.tag, id = _a.id, classList = _a.classList, attributes = _a.attributes, nextSelector = _a.nextSelector, pseudos = _a.pseudos;\n        if (nextSelector !== undefined) {\n            throw new Error('matches can only process selectors that target a single element');\n        }\n        if (tag && tag.toLowerCase() !== opts.tag(node).toLowerCase()) {\n            return false;\n        }\n        if (id && id !== opts.id(node)) {\n            return false;\n        }\n        var classes = opts.className(node).split(' ');\n        for (var i = 0; i < classList.length; i++) {\n            if (classes.indexOf(classList[i]) === -1) {\n                return false;\n            }\n        }\n        for (var key in attributes) {\n            var attr = opts.attr(node, key);\n            var t = attributes[key][0];\n            var v = attributes[key][1];\n            if (!attr) {\n                return false;\n            }\n            if (t === 'exact' && attr !== v) {\n                return false;\n            }\n            else if (t !== 'exact') {\n                if (typeof v !== 'string') {\n                    throw new Error('All non-string values have to be an exact match');\n                }\n                if (t === 'startsWith' && !attr.startsWith(v)) {\n                    return false;\n                }\n                if (t === 'endsWith' && !attr.endsWith(v)) {\n                    return false;\n                }\n                if (t === 'contains' && attr.indexOf(v) === -1) {\n                    return false;\n                }\n                if (t === 'whitespace' && attr.split(' ').indexOf(v) === -1) {\n                    return false;\n                }\n                if (t === 'dash' && attr.split('-').indexOf(v) === -1) {\n                    return false;\n                }\n            }\n        }\n        for (var i = 0; i < pseudos.length; i++) {\n            var _b = pseudos[i], t = _b[0], data = _b[1];\n            if (t === 'contains' && data !== opts.contents(node)) {\n                return false;\n            }\n            if (t === 'empty' &&\n                (opts.contents(node) || opts.children(node).length !== 0)) {\n                return false;\n            }\n            if (t === 'root' && opts.parent(node) !== undefined) {\n                return false;\n            }\n            if (t.indexOf('child') !== -1) {\n                if (!opts.parent(node)) {\n                    return false;\n                }\n                var siblings = opts.children(opts.parent(node));\n                if (t === 'first-child' && siblings.indexOf(node) !== 0) {\n                    return false;\n                }\n                if (t === 'last-child' &&\n                    siblings.indexOf(node) !== siblings.length - 1) {\n                    return false;\n                }\n                if (t === 'nth-child') {\n                    var regex = /([\\+-]?)(\\d*)(n?)(\\+\\d+)?/;\n                    var parseResult = regex.exec(data).slice(1);\n                    var index = siblings.indexOf(node);\n                    if (!parseResult[0]) {\n                        parseResult[0] = '+';\n                    }\n                    var factor = parseResult[1]\n                        ? parseInt(parseResult[0] + parseResult[1])\n                        : undefined;\n                    var add = parseInt(parseResult[3] || '0');\n                    if (factor &&\n                        parseResult[2] === 'n' &&\n                        index % factor !== add) {\n                        return false;\n                    }\n                    else if (!factor &&\n                        parseResult[2] &&\n                        ((parseResult[0] === '+' && index - add < 0) ||\n                            (parseResult[0] === '-' && index - add >= 0))) {\n                        return false;\n                    }\n                    else if (!parseResult[2] && factor &&\n                        index !== factor - 1) {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    };\n}\n//# sourceMappingURL=matches.js.map","import { parseSelector } from './selectorParser';\nimport { createMatches } from './matches';\nexport function createQuerySelector(options, matches) {\n    var _matches = matches || createMatches(options);\n    function findSubtree(selector, depth, node) {\n        var n = _matches(selector, node);\n        var matched = n ? (typeof n === 'object' ? [n] : [node]) : [];\n        if (depth === 0) {\n            return matched;\n        }\n        var childMatched = options\n            .children(node)\n            .filter(function (c) { return typeof c !== 'string'; })\n            .map(function (c) { return findSubtree(selector, depth - 1, c); })\n            .reduce(function (acc, curr) { return acc.concat(curr); }, []);\n        return matched.concat(childMatched);\n    }\n    function findSibling(selector, next, node) {\n        if (options.parent(node) === undefined) {\n            return [];\n        }\n        var results = [];\n        var siblings = options.children(options.parent(node));\n        for (var i = siblings.indexOf(node) + 1; i < siblings.length; i++) {\n            if (typeof siblings[i] === 'string') {\n                continue;\n            }\n            var n = _matches(selector, siblings[i]);\n            if (n) {\n                if (typeof n === 'object') {\n                    results.push(n);\n                }\n                else {\n                    results.push(siblings[i]);\n                }\n            }\n            if (next) {\n                break;\n            }\n        }\n        return results;\n    }\n    return function querySelector(selector, node) {\n        var sel = typeof selector === 'object' ? selector : parseSelector(selector);\n        var results = [node];\n        var currentSelector = sel;\n        var currentCombinator = 'subtree';\n        var tail = undefined;\n        var _loop_1 = function () {\n            tail = currentSelector.nextSelector;\n            currentSelector.nextSelector = undefined;\n            if (currentCombinator === 'subtree' ||\n                currentCombinator === 'child') {\n                var depth_1 = currentCombinator === 'subtree' ? Infinity : 1;\n                results = results\n                    .map(function (n) { return findSubtree(currentSelector, depth_1, n); })\n                    .reduce(function (acc, curr) { return acc.concat(curr); }, []);\n            }\n            else {\n                var next_1 = currentCombinator === 'nextSibling';\n                results = results\n                    .map(function (n) { return findSibling(currentSelector, next_1, n); })\n                    .reduce(function (acc, curr) { return acc.concat(curr); }, []);\n            }\n            if (tail) {\n                currentSelector = tail[1];\n                currentCombinator = tail[0];\n            }\n        };\n        do {\n            _loop_1();\n        } while (tail !== undefined);\n        return results;\n    };\n}\n//# sourceMappingURL=querySelector.js.map","export * from './selectorParser';\nexport { createMatches } from './matches';\nexport { createQuerySelector } from './querySelector';\n//# sourceMappingURL=index.js.map","export function selectorParser(node) {\n    if (!node.sel) {\n        return {\n            tagName: '',\n            id: '',\n            className: '',\n        };\n    }\n    var sel = node.sel;\n    var hashIdx = sel.indexOf('#');\n    var dotIdx = sel.indexOf('.', hashIdx);\n    var hash = hashIdx > 0 ? hashIdx : sel.length;\n    var dot = dotIdx > 0 ? dotIdx : sel.length;\n    var tagName = hashIdx !== -1 || dotIdx !== -1 ?\n        sel.slice(0, Math.min(hash, dot)) :\n        sel;\n    var id = hash < dot ? sel.slice(hash + 1, dot) : void 0;\n    var className = dotIdx > 0 ? sel.slice(dot + 1).replace(/\\./g, ' ') : void 0;\n    return {\n        tagName: tagName,\n        id: id,\n        className: className,\n    };\n}\n//# sourceMappingURL=selectorParser.js.map","import { selectorParser } from './selectorParser';\nexport function classNameFromVNode(vNode) {\n    var _a = selectorParser(vNode).className, cn = _a === void 0 ? '' : _a;\n    if (!vNode.data) {\n        return cn;\n    }\n    var _b = vNode.data, dataClass = _b.class, props = _b.props;\n    if (dataClass) {\n        var c = Object.keys(dataClass)\n            .filter(function (cl) { return dataClass[cl]; });\n        cn += \" \" + c.join(\" \");\n    }\n    if (props && props.className) {\n        cn += \" \" + props.className;\n    }\n    return cn && cn.trim();\n}\n//# sourceMappingURL=classNameFromVNode.js.map","var root;\nif (typeof self !== 'undefined') {\n    root = self;\n}\nelse if (typeof window !== 'undefined') {\n    root = window;\n}\nelse if (typeof global !== 'undefined') {\n    root = global;\n}\nelse {\n    root = Function('return this')();\n}\nvar Symbol = root.Symbol;\nvar parentSymbol;\nif (typeof Symbol === 'function') {\n    parentSymbol = Symbol('parent');\n}\nelse {\n    parentSymbol = '@@snabbdom-selector-parent';\n}\nexport default parentSymbol;\n//# sourceMappingURL=parent-symbol.js.map","import { createQuerySelector, createMatches } from 'tree-selector';\nimport { selectorParser } from './selectorParser';\nimport { classNameFromVNode } from './classNameFromVNode';\nimport parentSymbol from './parent-symbol';\nvar options = {\n    tag: function (vNode) { return selectorParser(vNode).tagName; },\n    className: function (vNode) { return classNameFromVNode(vNode); },\n    id: function (vNode) { return selectorParser(vNode).id || ''; },\n    children: function (vNode) { return vNode.children || []; },\n    parent: function (vNode) { return vNode.data[parentSymbol] || vNode; },\n    contents: function (vNode) { return vNode.text || ''; },\n    attr: function (vNode, attr) {\n        if (vNode.data) {\n            var _a = vNode.data, _b = _a.attrs, attrs = _b === void 0 ? {} : _b, _c = _a.props, props = _c === void 0 ? {} : _c, _d = _a.dataset, dataset = _d === void 0 ? {} : _d;\n            if (attrs[attr]) {\n                return attrs[attr];\n            }\n            if (props[attr]) {\n                return props[attr];\n            }\n            if (attr.indexOf('data-') === 0 && dataset[attr.slice(5)]) {\n                return dataset[attr.slice(5)];\n            }\n        }\n    },\n};\nvar matches = createMatches(options);\nfunction customMatches(sel, vnode) {\n    var data = vnode.data;\n    var selector = matches.bind(null, sel);\n    if (data && data.fn) {\n        var n = void 0;\n        if (Array.isArray(data.args)) {\n            n = data.fn.apply(null, data.args);\n        }\n        else if (data.args) {\n            n = data.fn.call(null, data.args);\n        }\n        else {\n            n = data.fn();\n        }\n        return selector(n) ? n : false;\n    }\n    return selector(vnode);\n}\nexport var querySelector = createQuerySelector(options, customMatches);\n//# sourceMappingURL=query.js.map","import { querySelector } from './query';\nimport parentSymbol from './parent-symbol';\nexport function findMatches(cssSelector, vNode) {\n    traverseVNode(vNode, addParent); // add mapping to the parent selectorParser\n    return querySelector(cssSelector, vNode);\n}\nfunction traverseVNode(vNode, f) {\n    function recurse(currentNode, isParent, parentVNode) {\n        var length = currentNode.children && currentNode.children.length || 0;\n        for (var i = 0; i < length; ++i) {\n            var children = currentNode.children;\n            if (children && children[i] && typeof children[i] !== 'string') {\n                var child = children[i];\n                recurse(child, false, currentNode);\n            }\n        }\n        f(currentNode, isParent, isParent ? void 0 : parentVNode);\n    }\n    recurse(vNode, true);\n}\nfunction addParent(vNode, isParent, parent) {\n    if (isParent) {\n        return void 0;\n    }\n    if (!vNode.data) {\n        vNode.data = {};\n    }\n    if (!vNode.data[parentSymbol]) {\n        Object.defineProperty(vNode.data, parentSymbol, {\n            value: parent,\n        });\n    }\n}\n//# sourceMappingURL=findMatches.js.map","import { curry2 } from './curry2';\nimport { findMatches } from './findMatches';\nexport var select = curry2(findMatches);\nexport { selectorParser } from './selectorParser';\nexport { classNameFromVNode } from './classNameFromVNode';\n//# sourceMappingURL=index.js.map","import { vnode as vnodeFn } from 'snabbdom/vnode';\nimport { h } from 'snabbdom/h';\nimport { classNameFromVNode, selectorParser } from 'snabbdom-selector';\nimport { isDocFrag } from './utils';\nvar VNodeWrapper = /** @class */ (function () {\n    function VNodeWrapper(rootElement) {\n        this.rootElement = rootElement;\n    }\n    VNodeWrapper.prototype.call = function (vnode) {\n        if (isDocFrag(this.rootElement)) {\n            return this.wrapDocFrag(vnode === null ? [] : [vnode]);\n        }\n        if (vnode === null) {\n            return this.wrap([]);\n        }\n        var _a = selectorParser(vnode), selTagName = _a.tagName, selId = _a.id;\n        var vNodeClassName = classNameFromVNode(vnode);\n        var vNodeData = vnode.data || {};\n        var vNodeDataProps = vNodeData.props || {};\n        var _b = vNodeDataProps.id, vNodeId = _b === void 0 ? selId : _b;\n        var isVNodeAndRootElementIdentical = typeof vNodeId === 'string' &&\n            vNodeId.toUpperCase() === this.rootElement.id.toUpperCase() &&\n            selTagName.toUpperCase() === this.rootElement.tagName.toUpperCase() &&\n            vNodeClassName.toUpperCase() === this.rootElement.className.toUpperCase();\n        if (isVNodeAndRootElementIdentical) {\n            return vnode;\n        }\n        return this.wrap([vnode]);\n    };\n    VNodeWrapper.prototype.wrapDocFrag = function (children) {\n        return vnodeFn('', { isolate: [] }, children, undefined, this\n            .rootElement);\n    };\n    VNodeWrapper.prototype.wrap = function (children) {\n        var _a = this.rootElement, tagName = _a.tagName, id = _a.id, className = _a.className;\n        var selId = id ? \"#\" + id : '';\n        var selClass = className ? \".\" + className.split(\" \").join(\".\") : '';\n        var vnode = h(\"\" + tagName.toLowerCase() + selId + selClass, {}, children);\n        vnode.data = vnode.data || {};\n        vnode.data.isolate = vnode.data.isolate || [];\n        return vnode;\n    };\n    return VNodeWrapper;\n}());\nexport { VNodeWrapper };\n//# sourceMappingURL=VNodeWrapper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateClass(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldClass = oldVnode.data.class, klass = vnode.data.class;\n    if (!oldClass && !klass)\n        return;\n    if (oldClass === klass)\n        return;\n    oldClass = oldClass || {};\n    klass = klass || {};\n    for (name in oldClass) {\n        if (!klass[name]) {\n            elm.classList.remove(name);\n        }\n    }\n    for (name in klass) {\n        cur = klass[name];\n        if (cur !== oldClass[name]) {\n            elm.classList[cur ? 'add' : 'remove'](name);\n        }\n    }\n}\nexports.classModule = { create: updateClass, update: updateClass };\nexports.default = exports.classModule;\n//# sourceMappingURL=class.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction updateProps(oldVnode, vnode) {\n    var key, cur, old, elm = vnode.elm, oldProps = oldVnode.data.props, props = vnode.data.props;\n    if (!oldProps && !props)\n        return;\n    if (oldProps === props)\n        return;\n    oldProps = oldProps || {};\n    props = props || {};\n    for (key in oldProps) {\n        if (!props[key]) {\n            delete elm[key];\n        }\n    }\n    for (key in props) {\n        cur = props[key];\n        old = oldProps[key];\n        if (old !== cur && (key !== 'value' || elm[key] !== cur)) {\n            elm[key] = cur;\n        }\n    }\n}\nexports.propsModule = { create: updateProps, update: updateProps };\nexports.default = exports.propsModule;\n//# sourceMappingURL=props.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\nvar xmlNS = 'http://www.w3.org/XML/1998/namespace';\nvar colonChar = 58;\nvar xChar = 120;\nfunction updateAttrs(oldVnode, vnode) {\n    var key, elm = vnode.elm, oldAttrs = oldVnode.data.attrs, attrs = vnode.data.attrs;\n    if (!oldAttrs && !attrs)\n        return;\n    if (oldAttrs === attrs)\n        return;\n    oldAttrs = oldAttrs || {};\n    attrs = attrs || {};\n    // update modified attributes, add new attributes\n    for (key in attrs) {\n        var cur = attrs[key];\n        var old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, \"\");\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    // Assume xml namespace\n                    elm.setAttributeNS(xmlNS, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    // Assume xlink namespace\n                    elm.setAttributeNS(xlinkNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    // remove removed attributes\n    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n    // the other option is to remove all attributes with value == undefined\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nexports.attributesModule = { create: updateAttrs, update: updateAttrs };\nexports.default = exports.attributesModule;\n//# sourceMappingURL=attributes.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar raf = (typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout;\nvar nextFrame = function (fn) { raf(function () { raf(fn); }); };\nvar reflowForced = false;\nfunction setNextFrame(obj, prop, val) {\n    nextFrame(function () { obj[prop] = val; });\n}\nfunction updateStyle(oldVnode, vnode) {\n    var cur, name, elm = vnode.elm, oldStyle = oldVnode.data.style, style = vnode.data.style;\n    if (!oldStyle && !style)\n        return;\n    if (oldStyle === style)\n        return;\n    oldStyle = oldStyle || {};\n    style = style || {};\n    var oldHasDel = 'delayed' in oldStyle;\n    for (name in oldStyle) {\n        if (!style[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.removeProperty(name);\n            }\n            else {\n                elm.style[name] = '';\n            }\n        }\n    }\n    for (name in style) {\n        cur = style[name];\n        if (name === 'delayed' && style.delayed) {\n            for (var name2 in style.delayed) {\n                cur = style.delayed[name2];\n                if (!oldHasDel || cur !== oldStyle.delayed[name2]) {\n                    setNextFrame(elm.style, name2, cur);\n                }\n            }\n        }\n        else if (name !== 'remove' && cur !== oldStyle[name]) {\n            if (name[0] === '-' && name[1] === '-') {\n                elm.style.setProperty(name, cur);\n            }\n            else {\n                elm.style[name] = cur;\n            }\n        }\n    }\n}\nfunction applyDestroyStyle(vnode) {\n    var style, name, elm = vnode.elm, s = vnode.data.style;\n    if (!s || !(style = s.destroy))\n        return;\n    for (name in style) {\n        elm.style[name] = style[name];\n    }\n}\nfunction applyRemoveStyle(vnode, rm) {\n    var s = vnode.data.style;\n    if (!s || !s.remove) {\n        rm();\n        return;\n    }\n    if (!reflowForced) {\n        getComputedStyle(document.body).transform;\n        reflowForced = true;\n    }\n    var name, elm = vnode.elm, i = 0, compStyle, style = s.remove, amount = 0, applied = [];\n    for (name in style) {\n        applied.push(name);\n        elm.style[name] = style[name];\n    }\n    compStyle = getComputedStyle(elm);\n    var props = compStyle['transition-property'].split(', ');\n    for (; i < props.length; ++i) {\n        if (applied.indexOf(props[i]) !== -1)\n            amount++;\n    }\n    elm.addEventListener('transitionend', function (ev) {\n        if (ev.target === elm)\n            --amount;\n        if (amount === 0)\n            rm();\n    });\n}\nfunction forceReflow() {\n    reflowForced = false;\n}\nexports.styleModule = {\n    pre: forceReflow,\n    create: updateStyle,\n    update: updateStyle,\n    destroy: applyDestroyStyle,\n    remove: applyRemoveStyle\n};\nexports.default = exports.styleModule;\n//# sourceMappingURL=style.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CAPS_REGEX = /[A-Z]/g;\nfunction updateDataset(oldVnode, vnode) {\n    var elm = vnode.elm, oldDataset = oldVnode.data.dataset, dataset = vnode.data.dataset, key;\n    if (!oldDataset && !dataset)\n        return;\n    if (oldDataset === dataset)\n        return;\n    oldDataset = oldDataset || {};\n    dataset = dataset || {};\n    var d = elm.dataset;\n    for (key in oldDataset) {\n        if (!dataset[key]) {\n            if (d) {\n                if (key in d) {\n                    delete d[key];\n                }\n            }\n            else {\n                elm.removeAttribute('data-' + key.replace(CAPS_REGEX, '-$&').toLowerCase());\n            }\n        }\n    }\n    for (key in dataset) {\n        if (oldDataset[key] !== dataset[key]) {\n            if (d) {\n                d[key] = dataset[key];\n            }\n            else {\n                elm.setAttribute('data-' + key.replace(CAPS_REGEX, '-$&').toLowerCase(), dataset[key]);\n            }\n        }\n    }\n}\nexports.datasetModule = { create: updateDataset, update: updateDataset };\nexports.default = exports.datasetModule;\n//# sourceMappingURL=dataset.js.map","import ClassModule from 'snabbdom/modules/class';\nimport PropsModule from 'snabbdom/modules/props';\nimport AttrsModule from 'snabbdom/modules/attributes';\nimport StyleModule from 'snabbdom/modules/style';\nimport DatasetModule from 'snabbdom/modules/dataset';\nvar modules = [\n    StyleModule,\n    ClassModule,\n    PropsModule,\n    AttrsModule,\n    DatasetModule,\n];\nexport { StyleModule, ClassModule, PropsModule, AttrsModule, DatasetModule };\nexport default modules;\n//# sourceMappingURL=modules.js.map","var SymbolTree = /** @class */ (function () {\n    function SymbolTree(mapper) {\n        this.mapper = mapper;\n        this.tree = [undefined, {}];\n    }\n    SymbolTree.prototype.set = function (path, element, max) {\n        var curr = this.tree;\n        var _max = max !== undefined ? max : path.length;\n        for (var i = 0; i < _max; i++) {\n            var n = this.mapper(path[i]);\n            var child = curr[1][n];\n            if (!child) {\n                child = [undefined, {}];\n                curr[1][n] = child;\n            }\n            curr = child;\n        }\n        curr[0] = element;\n    };\n    SymbolTree.prototype.getDefault = function (path, mkDefaultElement, max) {\n        return this.get(path, mkDefaultElement, max);\n    };\n    /**\n     * Returns the payload of the path\n     * If a default element creator is given, it will insert it at the path\n     */\n    SymbolTree.prototype.get = function (path, mkDefaultElement, max) {\n        var curr = this.tree;\n        var _max = max !== undefined ? max : path.length;\n        for (var i = 0; i < _max; i++) {\n            var n = this.mapper(path[i]);\n            var child = curr[1][n];\n            if (!child) {\n                if (mkDefaultElement) {\n                    child = [undefined, {}];\n                    curr[1][n] = child;\n                }\n                else {\n                    return undefined;\n                }\n            }\n            curr = child;\n        }\n        if (mkDefaultElement && !curr[0]) {\n            curr[0] = mkDefaultElement();\n        }\n        return curr[0];\n    };\n    SymbolTree.prototype.delete = function (path) {\n        var curr = this.tree;\n        for (var i = 0; i < path.length - 1; i++) {\n            var child = curr[1][this.mapper(path[i])];\n            if (!child) {\n                return;\n            }\n            curr = child;\n        }\n        delete curr[1][this.mapper(path[path.length - 1])];\n    };\n    return SymbolTree;\n}());\nexport default SymbolTree;\n//# sourceMappingURL=SymbolTree.js.map","import { isEqualNamespace } from './utils';\nimport SymbolTree from './SymbolTree';\nvar IsolateModule = /** @class */ (function () {\n    function IsolateModule() {\n        this.namespaceTree = new SymbolTree(function (x) { return x.scope; });\n        this.namespaceByElement = new Map();\n        this.vnodesBeingRemoved = [];\n    }\n    IsolateModule.prototype.setEventDelegator = function (del) {\n        this.eventDelegator = del;\n    };\n    IsolateModule.prototype.insertElement = function (namespace, el) {\n        this.namespaceByElement.set(el, namespace);\n        this.namespaceTree.set(namespace, el);\n    };\n    IsolateModule.prototype.removeElement = function (elm) {\n        this.namespaceByElement.delete(elm);\n        var namespace = this.getNamespace(elm);\n        if (namespace) {\n            this.namespaceTree.delete(namespace);\n        }\n    };\n    IsolateModule.prototype.getElement = function (namespace, max) {\n        return this.namespaceTree.get(namespace, undefined, max);\n    };\n    IsolateModule.prototype.getRootElement = function (elm) {\n        if (this.namespaceByElement.has(elm)) {\n            return elm;\n        }\n        //TODO: Add quick-lru or similar as additional O(1) cache\n        var curr = elm;\n        while (!this.namespaceByElement.has(curr)) {\n            curr = curr.parentNode;\n            if (!curr) {\n                return undefined;\n            }\n            else if (curr.tagName === 'HTML') {\n                throw new Error('No root element found, this should not happen at all');\n            }\n        }\n        return curr;\n    };\n    IsolateModule.prototype.getNamespace = function (elm) {\n        var rootElement = this.getRootElement(elm);\n        if (!rootElement) {\n            return undefined;\n        }\n        return this.namespaceByElement.get(rootElement);\n    };\n    IsolateModule.prototype.createModule = function () {\n        var self = this;\n        return {\n            create: function (emptyVNode, vNode) {\n                var elm = vNode.elm, _a = vNode.data, data = _a === void 0 ? {} : _a;\n                var namespace = data.isolate;\n                if (Array.isArray(namespace)) {\n                    self.insertElement(namespace, elm);\n                }\n            },\n            update: function (oldVNode, vNode) {\n                var oldElm = oldVNode.elm, _a = oldVNode.data, oldData = _a === void 0 ? {} : _a;\n                var elm = vNode.elm, _b = vNode.data, data = _b === void 0 ? {} : _b;\n                var oldNamespace = oldData.isolate;\n                var namespace = data.isolate;\n                if (!isEqualNamespace(oldNamespace, namespace)) {\n                    if (Array.isArray(oldNamespace)) {\n                        self.removeElement(oldElm);\n                    }\n                }\n                if (Array.isArray(namespace)) {\n                    self.insertElement(namespace, elm);\n                }\n            },\n            destroy: function (vNode) {\n                self.vnodesBeingRemoved.push(vNode);\n            },\n            remove: function (vNode, cb) {\n                self.vnodesBeingRemoved.push(vNode);\n                cb();\n            },\n            post: function () {\n                var vnodesBeingRemoved = self.vnodesBeingRemoved;\n                for (var i = vnodesBeingRemoved.length - 1; i >= 0; i--) {\n                    var vnode = vnodesBeingRemoved[i];\n                    var namespace = vnode.data !== undefined\n                        ? vnode.data.isolation\n                        : undefined;\n                    if (namespace !== undefined) {\n                        self.removeElement(namespace);\n                    }\n                    self.eventDelegator.removeElement(vnode.elm, namespace);\n                }\n                self.vnodesBeingRemoved = [];\n            },\n        };\n    };\n    return IsolateModule;\n}());\nexport { IsolateModule };\n//# sourceMappingURL=IsolateModule.js.map","var RemovalSet = /** @class */ (function () {\n    function RemovalSet() {\n        this.toDelete = [];\n        this.toDeleteSize = 0;\n        this._set = new Set();\n    }\n    RemovalSet.prototype.add = function (t) {\n        this._set.add(t);\n    };\n    RemovalSet.prototype.forEach = function (f) {\n        this._set.forEach(f);\n        this.flush();\n    };\n    RemovalSet.prototype.delete = function (t) {\n        if (this.toDelete.length === this.toDeleteSize) {\n            this.toDelete.push(t);\n        }\n        else {\n            this.toDelete[this.toDeleteSize] = t;\n        }\n        this.toDeleteSize++;\n    };\n    RemovalSet.prototype.flush = function () {\n        for (var i = 0; i < this.toDelete.length; i++) {\n            if (i < this.toDeleteSize) {\n                this._set.delete(this.toDelete[i]);\n            }\n            this.toDelete[i] = undefined;\n        }\n        this.toDeleteSize = 0;\n    };\n    return RemovalSet;\n}());\nexport default RemovalSet;\n//# sourceMappingURL=RemovalSet.js.map","var PriorityQueue = /** @class */ (function () {\n    function PriorityQueue() {\n        this.arr = [];\n        this.prios = [];\n    }\n    PriorityQueue.prototype.add = function (t, prio) {\n        for (var i = 0; i < this.arr.length; i++) {\n            if (this.prios[i] < prio) {\n                this.arr.splice(i, 0, t);\n                this.prios.splice(i, 0, prio);\n                return;\n            }\n        }\n        this.arr.push(t);\n        this.prios.push(prio);\n    };\n    PriorityQueue.prototype.forEach = function (f) {\n        for (var i = 0; i < this.arr.length; i++) {\n            f(this.arr[i], i, this.arr);\n        }\n    };\n    PriorityQueue.prototype.delete = function (t) {\n        for (var i = 0; i < this.arr.length; i++) {\n            if (this.arr[i] === t) {\n                this.arr.splice(i, 1);\n                this.prios.splice(i, 1);\n                return;\n            }\n        }\n    };\n    return PriorityQueue;\n}());\nexport default PriorityQueue;\n//# sourceMappingURL=PriorityQueue.js.map","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport xs from 'xstream';\nimport { ScopeChecker } from './ScopeChecker';\nimport { getSelectors, makeInsert } from './utils';\nimport { ElementFinder } from './ElementFinder';\nimport SymbolTree from './SymbolTree';\nimport RemovalSet from './RemovalSet';\nimport PriorityQueue from './PriorityQueue';\nimport { fromEvent, preventDefaultConditional, } from './fromEvent';\nexport var eventTypesThatDontBubble = [\n    \"blur\",\n    \"canplay\",\n    \"canplaythrough\",\n    \"durationchange\",\n    \"emptied\",\n    \"ended\",\n    \"focus\",\n    \"load\",\n    \"loadeddata\",\n    \"loadedmetadata\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"pause\",\n    \"play\",\n    \"playing\",\n    \"ratechange\",\n    \"reset\",\n    \"scroll\",\n    \"seeked\",\n    \"seeking\",\n    \"stalled\",\n    \"submit\",\n    \"suspend\",\n    \"timeupdate\",\n    \"unload\",\n    \"volumechange\",\n    \"waiting\",\n];\n/**\n * Manages \"Event delegation\", by connecting an origin with multiple\n * destinations.\n *\n * Attaches a DOM event listener to the DOM element called the \"origin\",\n * and delegates events to \"destinations\", which are subjects as outputs\n * for the DOMSource. Simulates bubbling or capturing, with regards to\n * isolation boundaries too.\n */\nvar EventDelegator = /** @class */ (function () {\n    function EventDelegator(rootElement$, isolateModule) {\n        var _this = this;\n        this.rootElement$ = rootElement$;\n        this.isolateModule = isolateModule;\n        this.virtualListeners = new SymbolTree(function (x) { return x.scope; });\n        this.nonBubblingListenersToAdd = new RemovalSet();\n        this.virtualNonBubblingListener = [];\n        this.isolateModule.setEventDelegator(this);\n        this.domListeners = new Map();\n        this.domListenersToAdd = new Map();\n        this.nonBubblingListeners = new Map();\n        rootElement$.addListener({\n            next: function (el) {\n                if (_this.origin !== el) {\n                    _this.origin = el;\n                    _this.resetEventListeners();\n                    _this.domListenersToAdd.forEach(function (passive, type) {\n                        return _this.setupDOMListener(type, passive);\n                    });\n                    _this.domListenersToAdd.clear();\n                }\n                _this.resetNonBubblingListeners();\n                _this.nonBubblingListenersToAdd.forEach(function (arr) {\n                    _this.setupNonBubblingListener(arr);\n                });\n            },\n        });\n    }\n    EventDelegator.prototype.addEventListener = function (eventType, namespace, options, bubbles) {\n        var subject = xs.never();\n        var scopeChecker = new ScopeChecker(namespace, this.isolateModule);\n        var dest = this.insertListener(subject, scopeChecker, eventType, options);\n        var shouldBubble = bubbles === undefined\n            ? eventTypesThatDontBubble.indexOf(eventType) === -1\n            : bubbles;\n        if (shouldBubble) {\n            if (!this.domListeners.has(eventType)) {\n                this.setupDOMListener(eventType, !!options.passive);\n            }\n        }\n        else {\n            var finder = new ElementFinder(namespace, this.isolateModule);\n            this.setupNonBubblingListener([eventType, finder, dest]);\n        }\n        return subject;\n    };\n    EventDelegator.prototype.removeElement = function (element, namespace) {\n        if (namespace !== undefined) {\n            this.virtualListeners.delete(namespace);\n        }\n        var toRemove = [];\n        this.nonBubblingListeners.forEach(function (map, type) {\n            if (map.has(element)) {\n                toRemove.push([type, element]);\n            }\n        });\n        for (var i = 0; i < toRemove.length; i++) {\n            var map = this.nonBubblingListeners.get(toRemove[i][0]);\n            if (!map) {\n                continue;\n            }\n            map.delete(toRemove[i][1]);\n            if (map.size === 0) {\n                this.nonBubblingListeners.delete(toRemove[i][0]);\n            }\n            else {\n                this.nonBubblingListeners.set(toRemove[i][0], map);\n            }\n        }\n    };\n    EventDelegator.prototype.insertListener = function (subject, scopeChecker, eventType, options) {\n        var relevantSets = [];\n        var n = scopeChecker._namespace;\n        var max = n.length;\n        do {\n            relevantSets.push(this.getVirtualListeners(eventType, n, true, max));\n            max--;\n        } while (max >= 0 && n[max].type !== 'total');\n        var destination = __assign({}, options, { scopeChecker: scopeChecker,\n            subject: subject, bubbles: !!options.bubbles, useCapture: !!options.useCapture, passive: !!options.passive });\n        for (var i = 0; i < relevantSets.length; i++) {\n            relevantSets[i].add(destination, n.length);\n        }\n        return destination;\n    };\n    /**\n     * Returns a set of all virtual listeners in the scope of the namespace\n     * Set `exact` to true to treat sibiling isolated scopes as total scopes\n     */\n    EventDelegator.prototype.getVirtualListeners = function (eventType, namespace, exact, max) {\n        if (exact === void 0) { exact = false; }\n        var _max = max !== undefined ? max : namespace.length;\n        if (!exact) {\n            for (var i = _max - 1; i >= 0; i--) {\n                if (namespace[i].type === 'total') {\n                    _max = i + 1;\n                    break;\n                }\n                _max = i;\n            }\n        }\n        var map = this.virtualListeners.getDefault(namespace, function () { return new Map(); }, _max);\n        if (!map.has(eventType)) {\n            map.set(eventType, new PriorityQueue());\n        }\n        return map.get(eventType);\n    };\n    EventDelegator.prototype.setupDOMListener = function (eventType, passive) {\n        var _this = this;\n        if (this.origin) {\n            var sub = fromEvent(this.origin, eventType, false, false, passive).subscribe({\n                next: function (event) { return _this.onEvent(eventType, event, passive); },\n                error: function () { },\n                complete: function () { },\n            });\n            this.domListeners.set(eventType, { sub: sub, passive: passive });\n        }\n        else {\n            this.domListenersToAdd.set(eventType, passive);\n        }\n    };\n    EventDelegator.prototype.setupNonBubblingListener = function (input) {\n        var _this = this;\n        var eventType = input[0], elementFinder = input[1], destination = input[2];\n        if (!this.origin) {\n            this.nonBubblingListenersToAdd.add(input);\n            return;\n        }\n        var element = elementFinder.call()[0];\n        if (element) {\n            this.nonBubblingListenersToAdd.delete(input);\n            var sub = fromEvent(element, eventType, false, false, destination.passive).subscribe({\n                next: function (ev) { return _this.onEvent(eventType, ev, !!destination.passive, false); },\n                error: function () { },\n                complete: function () { },\n            });\n            if (!this.nonBubblingListeners.has(eventType)) {\n                this.nonBubblingListeners.set(eventType, new Map());\n            }\n            var map = this.nonBubblingListeners.get(eventType);\n            if (!map) {\n                return;\n            }\n            map.set(element, { sub: sub, destination: destination });\n        }\n        else {\n            this.nonBubblingListenersToAdd.add(input);\n        }\n    };\n    EventDelegator.prototype.resetEventListeners = function () {\n        var iter = this.domListeners.entries();\n        var curr = iter.next();\n        while (!curr.done) {\n            var _a = curr.value, type = _a[0], _b = _a[1], sub = _b.sub, passive = _b.passive;\n            sub.unsubscribe();\n            this.setupDOMListener(type, passive);\n            curr = iter.next();\n        }\n    };\n    EventDelegator.prototype.resetNonBubblingListeners = function () {\n        var _this = this;\n        var newMap = new Map();\n        var insert = makeInsert(newMap);\n        this.nonBubblingListeners.forEach(function (map, type) {\n            map.forEach(function (value, elm) {\n                if (!document.body.contains(elm)) {\n                    var sub = value.sub, destination_1 = value.destination;\n                    if (sub) {\n                        sub.unsubscribe();\n                    }\n                    var elementFinder = new ElementFinder(destination_1.scopeChecker.namespace, _this.isolateModule);\n                    var newElm = elementFinder.call()[0];\n                    var newSub = fromEvent(newElm, type, false, false, destination_1.passive).subscribe({\n                        next: function (event) {\n                            return _this.onEvent(type, event, !!destination_1.passive, false);\n                        },\n                        error: function () { },\n                        complete: function () { },\n                    });\n                    insert(type, newElm, { sub: newSub, destination: destination_1 });\n                }\n                else {\n                    insert(type, elm, value);\n                }\n            });\n            _this.nonBubblingListeners = newMap;\n        });\n    };\n    EventDelegator.prototype.putNonBubblingListener = function (eventType, elm, useCapture, passive) {\n        var map = this.nonBubblingListeners.get(eventType);\n        if (!map) {\n            return;\n        }\n        var listener = map.get(elm);\n        if (listener &&\n            listener.destination.passive === passive &&\n            listener.destination.useCapture === useCapture) {\n            this.virtualNonBubblingListener[0] = listener.destination;\n        }\n    };\n    EventDelegator.prototype.onEvent = function (eventType, event, passive, bubbles) {\n        if (bubbles === void 0) { bubbles = true; }\n        var cycleEvent = this.patchEvent(event);\n        var rootElement = this.isolateModule.getRootElement(event.target);\n        if (bubbles) {\n            var namespace = this.isolateModule.getNamespace(event.target);\n            if (!namespace) {\n                return;\n            }\n            var listeners = this.getVirtualListeners(eventType, namespace);\n            this.bubble(eventType, event.target, rootElement, cycleEvent, listeners, namespace, namespace.length - 1, true, passive);\n            this.bubble(eventType, event.target, rootElement, cycleEvent, listeners, namespace, namespace.length - 1, false, passive);\n        }\n        else {\n            this.putNonBubblingListener(eventType, event.target, true, passive);\n            this.doBubbleStep(eventType, event.target, rootElement, cycleEvent, this.virtualNonBubblingListener, true, passive);\n            this.putNonBubblingListener(eventType, event.target, false, passive);\n            this.doBubbleStep(eventType, event.target, rootElement, cycleEvent, this.virtualNonBubblingListener, false, passive);\n            event.stopPropagation(); //fix reset event (spec'ed as non-bubbling, but bubbles in reality\n        }\n    };\n    EventDelegator.prototype.bubble = function (eventType, elm, rootElement, event, listeners, namespace, index, useCapture, passive) {\n        if (!useCapture && !event.propagationHasBeenStopped) {\n            this.doBubbleStep(eventType, elm, rootElement, event, listeners, useCapture, passive);\n        }\n        var newRoot = rootElement;\n        var newIndex = index;\n        if (elm === rootElement) {\n            if (index >= 0 && namespace[index].type === 'sibling') {\n                newRoot = this.isolateModule.getElement(namespace, index);\n                newIndex--;\n            }\n            else {\n                return;\n            }\n        }\n        if (elm.parentNode && newRoot) {\n            this.bubble(eventType, elm.parentNode, newRoot, event, listeners, namespace, newIndex, useCapture, passive);\n        }\n        if (useCapture && !event.propagationHasBeenStopped) {\n            this.doBubbleStep(eventType, elm, rootElement, event, listeners, useCapture, passive);\n        }\n    };\n    EventDelegator.prototype.doBubbleStep = function (eventType, elm, rootElement, event, listeners, useCapture, passive) {\n        if (!rootElement) {\n            return;\n        }\n        this.mutateEventCurrentTarget(event, elm);\n        listeners.forEach(function (dest) {\n            if (dest.passive === passive && dest.useCapture === useCapture) {\n                var sel = getSelectors(dest.scopeChecker.namespace);\n                if (!event.propagationHasBeenStopped &&\n                    dest.scopeChecker.isDirectlyInScope(elm) &&\n                    ((sel !== '' && elm.matches(sel)) ||\n                        (sel === '' && elm === rootElement))) {\n                    preventDefaultConditional(event, dest.preventDefault);\n                    dest.subject.shamefullySendNext(event);\n                }\n            }\n        });\n    };\n    EventDelegator.prototype.patchEvent = function (event) {\n        var pEvent = event;\n        pEvent.propagationHasBeenStopped = false;\n        var oldStopPropagation = pEvent.stopPropagation;\n        pEvent.stopPropagation = function stopPropagation() {\n            oldStopPropagation.call(this);\n            this.propagationHasBeenStopped = true;\n        };\n        return pEvent;\n    };\n    EventDelegator.prototype.mutateEventCurrentTarget = function (event, currentTargetElement) {\n        try {\n            Object.defineProperty(event, \"currentTarget\", {\n                value: currentTargetElement,\n                configurable: true,\n            });\n        }\n        catch (err) {\n            console.log(\"please use event.ownerTarget\");\n        }\n        event.ownerTarget = currentTargetElement;\n    };\n    return EventDelegator;\n}());\nexport { EventDelegator };\n//# sourceMappingURL=EventDelegator.js.map","import { init } from 'snabbdom';\nimport xs from 'xstream';\nimport concat from 'xstream/extra/concat';\nimport sampleCombine from 'xstream/extra/sampleCombine';\nimport { MainDOMSource } from './MainDOMSource';\nimport { toVNode } from 'snabbdom/tovnode';\nimport { VNodeWrapper } from './VNodeWrapper';\nimport { getValidNode, checkValidContainer } from './utils';\nimport defaultModules from './modules';\nimport { IsolateModule } from './IsolateModule';\nimport { EventDelegator } from './EventDelegator';\nfunction makeDOMDriverInputGuard(modules) {\n    if (!Array.isArray(modules)) {\n        throw new Error(\"Optional modules option must be an array for snabbdom modules\");\n    }\n}\nfunction domDriverInputGuard(view$) {\n    if (!view$ ||\n        typeof view$.addListener !== \"function\" ||\n        typeof view$.fold !== \"function\") {\n        throw new Error(\"The DOM driver function expects as input a Stream of \" +\n            \"virtual DOM elements\");\n    }\n}\nfunction dropCompletion(input) {\n    return xs.merge(input, xs.never());\n}\nfunction unwrapElementFromVNode(vnode) {\n    return vnode.elm;\n}\nfunction reportSnabbdomError(err) {\n    (console.error || console.log)(err);\n}\nfunction makeDOMReady$() {\n    return xs.create({\n        start: function (lis) {\n            if (document.readyState === 'loading') {\n                document.addEventListener('readystatechange', function () {\n                    var state = document.readyState;\n                    if (state === 'interactive' || state === 'complete') {\n                        lis.next(null);\n                        lis.complete();\n                    }\n                });\n            }\n            else {\n                lis.next(null);\n                lis.complete();\n            }\n        },\n        stop: function () { },\n    });\n}\nfunction addRootScope(vnode) {\n    vnode.data = vnode.data || {};\n    vnode.data.isolate = [];\n    return vnode;\n}\nfunction makeDOMDriver(container, options) {\n    if (!options) {\n        options = {};\n    }\n    checkValidContainer(container);\n    var modules = options.modules || defaultModules;\n    makeDOMDriverInputGuard(modules);\n    var isolateModule = new IsolateModule();\n    var patch = init([isolateModule.createModule()].concat(modules));\n    var domReady$ = makeDOMReady$();\n    var vnodeWrapper;\n    var mutationObserver;\n    var mutationConfirmed$ = xs.create({\n        start: function (listener) {\n            mutationObserver = new MutationObserver(function () { return listener.next(null); });\n        },\n        stop: function () {\n            mutationObserver.disconnect();\n        },\n    });\n    function DOMDriver(vnode$, name) {\n        if (name === void 0) { name = 'DOM'; }\n        domDriverInputGuard(vnode$);\n        var sanitation$ = xs.create();\n        var firstRoot$ = domReady$.map(function () {\n            var firstRoot = getValidNode(container) || document.body;\n            vnodeWrapper = new VNodeWrapper(firstRoot);\n            return firstRoot;\n        });\n        // We need to subscribe to the sink (i.e. vnode$) synchronously inside this\n        // driver, and not later in the map().flatten() because this sink is in\n        // reality a SinkProxy from @cycle/run, and we don't want to miss the first\n        // emission when the main() is connected to the drivers.\n        // Read more in issue #739.\n        var rememberedVNode$ = vnode$.remember();\n        rememberedVNode$.addListener({});\n        // The mutation observer internal to mutationConfirmed$ should\n        // exist before elementAfterPatch$ calls mutationObserver.observe()\n        mutationConfirmed$.addListener({});\n        var elementAfterPatch$ = firstRoot$\n            .map(function (firstRoot) {\n            return xs\n                .merge(rememberedVNode$.endWhen(sanitation$), sanitation$)\n                .map(function (vnode) { return vnodeWrapper.call(vnode); })\n                .startWith(addRootScope(toVNode(firstRoot)))\n                .fold(patch, toVNode(firstRoot))\n                .drop(1)\n                .map(unwrapElementFromVNode)\n                .startWith(firstRoot)\n                .map(function (el) {\n                mutationObserver.observe(el, {\n                    childList: true,\n                    attributes: true,\n                    characterData: true,\n                    subtree: true,\n                    attributeOldValue: true,\n                    characterDataOldValue: true,\n                });\n                return el;\n            })\n                .compose(dropCompletion);\n        } // don't complete this stream\n        )\n            .flatten();\n        var rootElement$ = concat(domReady$, mutationConfirmed$)\n            .endWhen(sanitation$)\n            .compose(sampleCombine(elementAfterPatch$))\n            .map(function (arr) { return arr[1]; })\n            .remember();\n        // Start the snabbdom patching, over time\n        rootElement$.addListener({ error: reportSnabbdomError });\n        var delegator = new EventDelegator(rootElement$, isolateModule);\n        return new MainDOMSource(rootElement$, sanitation$, [], isolateModule, delegator, name);\n    }\n    return DOMDriver;\n}\nexport { makeDOMDriver };\n//# sourceMappingURL=makeDOMDriver.js.map","import xs from 'xstream';\nimport { adapt } from '@cycle/run/lib/adapt';\nvar SCOPE_PREFIX = '___';\nvar MockedDOMSource = /** @class */ (function () {\n    function MockedDOMSource(_mockConfig) {\n        this._mockConfig = _mockConfig;\n        if (_mockConfig.elements) {\n            this._elements = _mockConfig.elements;\n        }\n        else {\n            this._elements = adapt(xs.empty());\n        }\n    }\n    MockedDOMSource.prototype.elements = function () {\n        var out = this\n            ._elements;\n        out._isCycleSource = 'MockedDOM';\n        return out;\n    };\n    MockedDOMSource.prototype.element = function () {\n        var output$ = this.elements()\n            .filter(function (arr) { return arr.length > 0; })\n            .map(function (arr) { return arr[0]; })\n            .remember();\n        var out = adapt(output$);\n        out._isCycleSource = 'MockedDOM';\n        return out;\n    };\n    MockedDOMSource.prototype.events = function (eventType, options) {\n        var streamForEventType = this._mockConfig[eventType];\n        var out = adapt(streamForEventType || xs.empty());\n        out._isCycleSource = 'MockedDOM';\n        return out;\n    };\n    MockedDOMSource.prototype.select = function (selector) {\n        var mockConfigForSelector = this._mockConfig[selector] || {};\n        return new MockedDOMSource(mockConfigForSelector);\n    };\n    MockedDOMSource.prototype.isolateSource = function (source, scope) {\n        return source.select('.' + SCOPE_PREFIX + scope);\n    };\n    MockedDOMSource.prototype.isolateSink = function (sink, scope) {\n        return adapt(xs.fromObservable(sink).map(function (vnode) {\n            if (vnode.sel && vnode.sel.indexOf(SCOPE_PREFIX + scope) !== -1) {\n                return vnode;\n            }\n            else {\n                vnode.sel += \".\" + SCOPE_PREFIX + scope;\n                return vnode;\n            }\n        }));\n    };\n    return MockedDOMSource;\n}());\nexport { MockedDOMSource };\nexport function mockDOMSource(mockConfig) {\n    return new MockedDOMSource(mockConfig);\n}\n//# sourceMappingURL=mockDOMSource.js.map","// tslint:disable:max-file-line-count\nimport { h } from 'snabbdom/h';\nfunction isValidString(param) {\n    return typeof param === 'string' && param.length > 0;\n}\nfunction isSelector(param) {\n    return isValidString(param) && (param[0] === '.' || param[0] === '#');\n}\nfunction createTagFunction(tagName) {\n    return function hyperscript(a, b, c) {\n        var hasA = typeof a !== 'undefined';\n        var hasB = typeof b !== 'undefined';\n        var hasC = typeof c !== 'undefined';\n        if (isSelector(a)) {\n            if (hasB && hasC) {\n                return h(tagName + a, b, c);\n            }\n            else if (hasB) {\n                return h(tagName + a, b);\n            }\n            else {\n                return h(tagName + a, {});\n            }\n        }\n        else if (hasC) {\n            return h(tagName + a, b, c);\n        }\n        else if (hasB) {\n            return h(tagName, a, b);\n        }\n        else if (hasA) {\n            return h(tagName, a);\n        }\n        else {\n            return h(tagName, {});\n        }\n    };\n}\nvar SVG_TAG_NAMES = [\n    'a',\n    'altGlyph',\n    'altGlyphDef',\n    'altGlyphItem',\n    'animate',\n    'animateColor',\n    'animateMotion',\n    'animateTransform',\n    'circle',\n    'clipPath',\n    'colorProfile',\n    'cursor',\n    'defs',\n    'desc',\n    'ellipse',\n    'feBlend',\n    'feColorMatrix',\n    'feComponentTransfer',\n    'feComposite',\n    'feConvolveMatrix',\n    'feDiffuseLighting',\n    'feDisplacementMap',\n    'feDistantLight',\n    'feFlood',\n    'feFuncA',\n    'feFuncB',\n    'feFuncG',\n    'feFuncR',\n    'feGaussianBlur',\n    'feImage',\n    'feMerge',\n    'feMergeNode',\n    'feMorphology',\n    'feOffset',\n    'fePointLight',\n    'feSpecularLighting',\n    'feSpotlight',\n    'feTile',\n    'feTurbulence',\n    'filter',\n    'font',\n    'fontFace',\n    'fontFaceFormat',\n    'fontFaceName',\n    'fontFaceSrc',\n    'fontFaceUri',\n    'foreignObject',\n    'g',\n    'glyph',\n    'glyphRef',\n    'hkern',\n    'image',\n    'line',\n    'linearGradient',\n    'marker',\n    'mask',\n    'metadata',\n    'missingGlyph',\n    'mpath',\n    'path',\n    'pattern',\n    'polygon',\n    'polyline',\n    'radialGradient',\n    'rect',\n    'script',\n    'set',\n    'stop',\n    'style',\n    'switch',\n    'symbol',\n    'text',\n    'textPath',\n    'title',\n    'tref',\n    'tspan',\n    'use',\n    'view',\n    'vkern',\n];\nvar svg = createTagFunction('svg');\nSVG_TAG_NAMES.forEach(function (tag) {\n    svg[tag] = createTagFunction(tag);\n});\nvar TAG_NAMES = [\n    'a',\n    'abbr',\n    'address',\n    'area',\n    'article',\n    'aside',\n    'audio',\n    'b',\n    'base',\n    'bdi',\n    'bdo',\n    'blockquote',\n    'body',\n    'br',\n    'button',\n    'canvas',\n    'caption',\n    'cite',\n    'code',\n    'col',\n    'colgroup',\n    'dd',\n    'del',\n    'details',\n    'dfn',\n    'dir',\n    'div',\n    'dl',\n    'dt',\n    'em',\n    'embed',\n    'fieldset',\n    'figcaption',\n    'figure',\n    'footer',\n    'form',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'head',\n    'header',\n    'hgroup',\n    'hr',\n    'html',\n    'i',\n    'iframe',\n    'img',\n    'input',\n    'ins',\n    'kbd',\n    'keygen',\n    'label',\n    'legend',\n    'li',\n    'link',\n    'main',\n    'map',\n    'mark',\n    'menu',\n    'meta',\n    'nav',\n    'noscript',\n    'object',\n    'ol',\n    'optgroup',\n    'option',\n    'p',\n    'param',\n    'pre',\n    'progress',\n    'q',\n    'rp',\n    'rt',\n    'ruby',\n    's',\n    'samp',\n    'script',\n    'section',\n    'select',\n    'small',\n    'source',\n    'span',\n    'strong',\n    'style',\n    'sub',\n    'summary',\n    'sup',\n    'table',\n    'tbody',\n    'td',\n    'textarea',\n    'tfoot',\n    'th',\n    'thead',\n    'time',\n    'title',\n    'tr',\n    'u',\n    'ul',\n    'video',\n];\nvar exported = {\n    SVG_TAG_NAMES: SVG_TAG_NAMES,\n    TAG_NAMES: TAG_NAMES,\n    svg: svg,\n    isSelector: isSelector,\n    createTagFunction: createTagFunction,\n};\nTAG_NAMES.forEach(function (n) {\n    exported[n] = createTagFunction(n);\n});\nexport default exported;\n//# sourceMappingURL=hyperscript-helpers.js.map","export { thunk } from './thunk';\nexport { MainDOMSource } from './MainDOMSource';\n/**\n * A factory for the DOM driver function.\n *\n * Takes a `container` to define the target on the existing DOM which this\n * driver will operate on, and an `options` object as the second argument. The\n * input to this driver is a stream of virtual DOM objects, or in other words,\n * Snabbdom \"VNode\" objects. The output of this driver is a \"DOMSource\": a\n * collection of Observables queried with the methods `select()` and `events()`.\n *\n * **`DOMSource.select(selector)`** returns a new DOMSource with scope\n * restricted to the element(s) that matches the CSS `selector` given. To select\n * the page's `document`, use `.select('document')`. To select the container\n * element for this app, use `.select(':root')`.\n *\n * **`DOMSource.events(eventType, options)`** returns a stream of events of\n * `eventType` happening on the elements that match the current DOMSource. The\n * event object contains the `ownerTarget` property that behaves exactly like\n * `currentTarget`. The reason for this is that some browsers doesn't allow\n * `currentTarget` property to be mutated, hence a new property is created. The\n * returned stream is an *xstream* Stream if you use `@cycle/xstream-run` to run\n * your app with this driver, or it is an RxJS Observable if you use\n * `@cycle/rxjs-run`, and so forth.\n *\n * **options for DOMSource.events**\n *\n * The `options` parameter on `DOMSource.events(eventType, options)` is an\n * (optional) object with two optional fields: `useCapture` and\n * `preventDefault`.\n *\n * `useCapture` is by default `false`, except it is `true` for event types that\n * do not bubble. Read more here\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n * about the `useCapture` and its purpose.\n *\n * `preventDefault` is by default `false`, and indicates to the driver whether\n * `event.preventDefault()` should be invoked. This option can be configured in\n * three ways:\n *\n * - `{preventDefault: boolean}` to invoke preventDefault if `true`, and not\n * invoke otherwise.\n * - `{preventDefault: (ev: Event) => boolean}` for conditional invocation.\n * - `{preventDefault: NestedObject}` uses an object to be recursively compared\n * to the `Event` object. `preventDefault` is invoked when all properties on the\n * nested object match with the properties on the event object.\n *\n * Here are some examples:\n * ```typescript\n * // always prevent default\n * DOMSource.select('input').events('keydown', {\n *   preventDefault: true\n * })\n *\n * // prevent default only when `ENTER` is pressed\n * DOMSource.select('input').events('keydown', {\n *   preventDefault: e => e.keyCode === 13\n * })\n *\n * // prevent defualt when `ENTER` is pressed AND target.value is 'HELLO'\n * DOMSource.select('input').events('keydown', {\n *   preventDefault: { keyCode: 13, ownerTarget: { value: 'HELLO' } }\n * });\n * ```\n *\n * **`DOMSource.elements()`** returns a stream of arrays containing the DOM\n * elements that match the selectors in the DOMSource (e.g. from previous\n * `select(x)` calls).\n *\n * **`DOMSource.element()`** returns a stream of DOM elements. Notice that this\n * is the singular version of `.elements()`, so the stream will emit an element,\n * not an array. If there is no element that matches the selected DOMSource,\n * then the returned stream will not emit anything.\n *\n * @param {(String|HTMLElement)} container the DOM selector for the element\n * (or the element itself) to contain the rendering of the VTrees.\n * @param {DOMDriverOptions} options an object with two optional properties:\n *\n *   - `modules: array` overrides `@cycle/dom`'s default Snabbdom modules as\n *     as defined in [`src/modules.ts`](./src/modules.ts).\n * @return {Function} the DOM driver function. The function expects a stream of\n * VNode as input, and outputs the DOMSource object.\n * @function makeDOMDriver\n */\nexport { makeDOMDriver } from './makeDOMDriver';\n/**\n * A factory function to create mocked DOMSource objects, for testing purposes.\n *\n * Takes a `mockConfig` object as argument, and returns\n * a DOMSource that can be given to any Cycle.js app that expects a DOMSource in\n * the sources, for testing.\n *\n * The `mockConfig` parameter is an object specifying selectors, eventTypes and\n * their streams. Example:\n *\n * ```js\n * const domSource = mockDOMSource({\n *   '.foo': {\n *     'click': xs.of({target: {}}),\n *     'mouseover': xs.of({target: {}}),\n *   },\n *   '.bar': {\n *     'scroll': xs.of({target: {}}),\n *     elements: xs.of({tagName: 'div'}),\n *   }\n * });\n *\n * // Usage\n * const click$ = domSource.select('.foo').events('click');\n * const element$ = domSource.select('.bar').elements();\n * ```\n *\n * The mocked DOM Source supports isolation. It has the functions `isolateSink`\n * and `isolateSource` attached to it, and performs simple isolation using\n * classNames. *isolateSink* with scope `foo` will append the class `___foo` to\n * the stream of virtual DOM nodes, and *isolateSource* with scope `foo` will\n * perform a conventional `mockedDOMSource.select('.__foo')` call.\n *\n * @param {Object} mockConfig an object where keys are selector strings\n * and values are objects. Those nested objects have `eventType` strings as keys\n * and values are streams you created.\n * @return {Object} fake DOM source object, with an API containing `select()`\n * and `events()` and `elements()` which can be used just like the DOM Driver's\n * DOMSource.\n *\n * @function mockDOMSource\n */\nexport { mockDOMSource, MockedDOMSource } from './mockDOMSource';\n/**\n * The hyperscript function `h()` is a function to create virtual DOM objects,\n * also known as VNodes. Call\n *\n * ```js\n * h('div.myClass', {style: {color: 'red'}}, [])\n * ```\n *\n * to create a VNode that represents a `DIV` element with className `myClass`,\n * styled with red color, and no children because the `[]` array was passed. The\n * API is `h(tagOrSelector, optionalData, optionalChildrenOrText)`.\n *\n * However, usually you should use \"hyperscript helpers\", which are shortcut\n * functions based on hyperscript. There is one hyperscript helper function for\n * each DOM tagName, such as `h1()`, `h2()`, `div()`, `span()`, `label()`,\n * `input()`. For instance, the previous example could have been written\n * as:\n *\n * ```js\n * div('.myClass', {style: {color: 'red'}}, [])\n * ```\n *\n * There are also SVG helper functions, which apply the appropriate SVG\n * namespace to the resulting elements. `svg()` function creates the top-most\n * SVG element, and `svg.g`, `svg.polygon`, `svg.circle`, `svg.path` are for\n * SVG-specific child elements. Example:\n *\n * ```js\n * svg({attrs: {width: 150, height: 150}}, [\n *   svg.polygon({\n *     attrs: {\n *       class: 'triangle',\n *       points: '20 0 20 150 150 20'\n *     }\n *   })\n * ])\n * ```\n *\n * @function h\n */\nexport { h } from 'snabbdom/h';\nimport hh from './hyperscript-helpers';\nexport var svg = hh.svg;\nexport var a = hh.a;\nexport var abbr = hh.abbr;\nexport var address = hh.address;\nexport var area = hh.area;\nexport var article = hh.article;\nexport var aside = hh.aside;\nexport var audio = hh.audio;\nexport var b = hh.b;\nexport var base = hh.base;\nexport var bdi = hh.bdi;\nexport var bdo = hh.bdo;\nexport var blockquote = hh.blockquote;\nexport var body = hh.body;\nexport var br = hh.br;\nexport var button = hh.button;\nexport var canvas = hh.canvas;\nexport var caption = hh.caption;\nexport var cite = hh.cite;\nexport var code = hh.code;\nexport var col = hh.col;\nexport var colgroup = hh.colgroup;\nexport var dd = hh.dd;\nexport var del = hh.del;\nexport var dfn = hh.dfn;\nexport var dir = hh.dir;\nexport var div = hh.div;\nexport var dl = hh.dl;\nexport var dt = hh.dt;\nexport var em = hh.em;\nexport var embed = hh.embed;\nexport var fieldset = hh.fieldset;\nexport var figcaption = hh.figcaption;\nexport var figure = hh.figure;\nexport var footer = hh.footer;\nexport var form = hh.form;\nexport var h1 = hh.h1;\nexport var h2 = hh.h2;\nexport var h3 = hh.h3;\nexport var h4 = hh.h4;\nexport var h5 = hh.h5;\nexport var h6 = hh.h6;\nexport var head = hh.head;\nexport var header = hh.header;\nexport var hgroup = hh.hgroup;\nexport var hr = hh.hr;\nexport var html = hh.html;\nexport var i = hh.i;\nexport var iframe = hh.iframe;\nexport var img = hh.img;\nexport var input = hh.input;\nexport var ins = hh.ins;\nexport var kbd = hh.kbd;\nexport var keygen = hh.keygen;\nexport var label = hh.label;\nexport var legend = hh.legend;\nexport var li = hh.li;\nexport var link = hh.link;\nexport var main = hh.main;\nexport var map = hh.map;\nexport var mark = hh.mark;\nexport var menu = hh.menu;\nexport var meta = hh.meta;\nexport var nav = hh.nav;\nexport var noscript = hh.noscript;\nexport var object = hh.object;\nexport var ol = hh.ol;\nexport var optgroup = hh.optgroup;\nexport var option = hh.option;\nexport var p = hh.p;\nexport var param = hh.param;\nexport var pre = hh.pre;\nexport var progress = hh.progress;\nexport var q = hh.q;\nexport var rp = hh.rp;\nexport var rt = hh.rt;\nexport var ruby = hh.ruby;\nexport var s = hh.s;\nexport var samp = hh.samp;\nexport var script = hh.script;\nexport var section = hh.section;\nexport var select = hh.select;\nexport var small = hh.small;\nexport var source = hh.source;\nexport var span = hh.span;\nexport var strong = hh.strong;\nexport var style = hh.style;\nexport var sub = hh.sub;\nexport var sup = hh.sup;\nexport var table = hh.table;\nexport var tbody = hh.tbody;\nexport var td = hh.td;\nexport var textarea = hh.textarea;\nexport var tfoot = hh.tfoot;\nexport var th = hh.th;\nexport var thead = hh.thead;\nexport var title = hh.title;\nexport var tr = hh.tr;\nexport var u = hh.u;\nexport var ul = hh.ul;\nexport var video = hh.video;\n//# sourceMappingURL=index.js.map","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","import _extend from 'extend';\n\nvar undefinedv = function (v) { return v === undefined; };\n\nvar number = function (v) { return typeof v === 'number'; };\n\nvar string = function (v) { return typeof v === 'string'; };\n\nvar text = function (v) { return string(v) || number(v); };\n\nvar array = function (v) { return Array.isArray(v); };\n\nvar object = function (v) { return typeof v === 'object' && v !== null; };\n\nvar fun = function (v) { return typeof v === 'function'; };\n\nvar vnode = function (v) { return object(v) && 'sel' in v && 'data' in v && 'children' in v && 'text' in v; };\n\nvar svgPropsMap = { svg: 1, circle: 1, ellipse: 1, line: 1, polygon: 1,\n  polyline: 1, rect: 1, g: 1, path: 1, text: 1 };\n\nvar svg = function (v) { return v.sel in svgPropsMap; };\n\n// TODO: stop using extend here\nvar extend = function () {\n  var objs = [], len = arguments.length;\n  while ( len-- ) objs[ len ] = arguments[ len ];\n\n  return _extend.apply(void 0, [ true ].concat( objs ));\n};\n\nvar assign = function () {\n  var objs = [], len = arguments.length;\n  while ( len-- ) objs[ len ] = arguments[ len ];\n\n  return _extend.apply(void 0, [ false ].concat( objs ));\n};\n\nvar reduceDeep = function (arr, fn, initial) {\n  var result = initial;\n  for (var i = 0; i < arr.length; i++) {\n    var value = arr[i];\n    if (array(value)) {\n      result = reduceDeep(value, fn, result);\n    } else {\n      result = fn(result, value);\n    }\n  }\n  return result\n};\n\nvar mapObject = function (obj, fn) { return Object.keys(obj).map(\n  function (key) { return fn(key, obj[key]); }\n).reduce(\n  function (acc, curr) { return extend(acc, curr); },\n  {}\n); };\n\nvar deepifyKeys = function (obj) { return mapObject(obj,\n  function (key, val) {\n    var dashIndex = key.indexOf('-');\n    if (dashIndex > -1) {\n      var moduleData = {};\n      moduleData[key.slice(dashIndex + 1)] = val;\n      return ( obj = {}, obj[key.slice(0, dashIndex)] = moduleData, obj )\n      var obj;\n    }\n    return ( obj$1 = {}, obj$1[key] = val, obj$1 )\n    var obj$1;\n  }\n); };\n\nvar flatifyKeys = function (obj) { return mapObject(obj,\n  function (mod, data) { return !object(data) ? (( obj = {}, obj[mod] = data, obj )) : mapObject(\n    flatifyKeys(data),\n    function (key, val) { return (( obj = {}, obj[(mod + \"-\" + key)] = val, obj ))\n      var obj; }\n  )\n    var obj; }\n); };\n\nvar omit = function (key, obj) { return mapObject(obj,\n  function (mod, data) { return mod !== key ? (( obj = {}, obj[mod] = data, obj )) : {}\n    var obj; }\n); };\n\n// Const fnName = (...params) => guard ? default : ...\n\nvar createTextElement = function (text$$1) { return !text(text$$1) ? undefined : {\n  text: text$$1,\n  sel: undefined,\n  data: undefined,\n  children: undefined,\n  elm: undefined,\n  key: undefined\n}; };\n\nvar considerSvg = function (vnode$$1) { return !svg(vnode$$1) ? vnode$$1 :\n  assign(vnode$$1,\n    { data: omit('props', extend(vnode$$1.data,\n      { ns: 'http://www.w3.org/2000/svg', attrs: omit('className', extend(vnode$$1.data.props,\n        { class: vnode$$1.data.props ? vnode$$1.data.props.className : undefined }\n      )) }\n    )) },\n    { children: undefinedv(vnode$$1.children) ? undefined :\n      vnode$$1.children.map(function (child) { return considerSvg(child); })\n    }\n  ); };\n\nvar considerData = function (data) {\n  return !data.data ? data : mapObject(data, function (mod, data) {\n    var key = mod === 'data' ? 'dataset' : mod;\n    return (( obj = {}, obj[key] = data, obj ))\n    var obj;\n  })\n};\n\nvar considerAria = function (data) { return data.attrs || data.aria ? omit('aria',\n  assign(data, {\n    attrs: extend(data.attrs, data.aria ? flatifyKeys({ aria: data.aria }) : {})\n  })\n) : data; };\n\nvar considerProps = function (data) { return mapObject(data,\n  function (key, val) { return object(val) ? ( obj = {}, obj[key] = val, obj ) :\n    { props: ( obj$1 = {}, obj$1[key] = val, obj$1 ) }\n    var obj;\n    var obj$1; }\n); };\n\nvar rewritesMap = { for: 1, role: 1, tabindex: 1 };\n\nvar considerAttrs = function (data) { return mapObject(data,\n    function (key, data) { return !(key in rewritesMap) ? ( obj = {}, obj[key] = data, obj ) : {\n      attrs: extend(data.attrs, ( obj$1 = {}, obj$1[key] = data, obj$1 ))\n    }\n      var obj;\n      var obj$1; }\n); };\n\nvar considerKey = function (data) {\n  return 'key' in data ? omit('key', data) : data\n};\n\nvar sanitizeData = function (data) { return considerProps(considerAria(considerData(considerAttrs(considerKey(deepifyKeys(data)))))); };\n\nvar sanitizeText = function (children) { return children.length > 1 || !text(children[0]) ? undefined : children[0]; };\n\nvar sanitizeChildren = function (children) { return reduceDeep(children, function (acc, child) {\n  var vnode$$1 = vnode(child) ? child : createTextElement(child);\n  acc.push(vnode$$1);\n  return acc\n}\n, []); };\n\nvar createElement = function (sel, data) {\n  var children = [], len = arguments.length - 2;\n  while ( len-- > 0 ) children[ len ] = arguments[ len + 2 ];\n\n  if (fun(sel)) {\n    return sel(data || {}, children)\n  }\n  var text$$1 = sanitizeText(children);\n  return considerSvg({\n    sel: sel,\n    data: data ? sanitizeData(data) : {},\n    children: text$$1 ? undefined : sanitizeChildren(children),\n    text: text$$1,\n    elm: undefined,\n    key: data ? data.key : undefined\n  })\n};\n\nvar index = {\n  createElement: createElement\n};\n\nexport { createElement };export default index;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @function writeToStore\n * @description\n * A universal write function for localStorage and sessionStorage.\n * @param {object} request - the storage request object\n * @param {string} request.target - a string determines which storage to use\n * @param {string} request.action - a string determines the write action\n * @param {string} request.key - the key of a storage item\n * @param {string} request.value - the value of a storage item\n */\nfunction writeToStore(request) {\n    var _a = request.target, target = _a === void 0 ? 'local' : _a, _b = request.action, action = _b === void 0 ? 'setItem' : _b;\n    var key = request.key;\n    var value = request.value;\n    // Determine the storage target.\n    var storage = target === \"local\" ? localStorage : sessionStorage;\n    // Execute the storage action and pass arguments if they were defined.\n    storage[action](key, value);\n}\nexports.default = writeToStore;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"../index\");\nvar empty = {};\nvar DropRepeatsOperator = /** @class */ (function () {\n    function DropRepeatsOperator(ins, fn) {\n        this.ins = ins;\n        this.type = 'dropRepeats';\n        this.out = null;\n        this.v = empty;\n        this.isEq = fn ? fn : function (x, y) { return x === y; };\n    }\n    DropRepeatsOperator.prototype._start = function (out) {\n        this.out = out;\n        this.ins._add(this);\n    };\n    DropRepeatsOperator.prototype._stop = function () {\n        this.ins._remove(this);\n        this.out = null;\n        this.v = empty;\n    };\n    DropRepeatsOperator.prototype._n = function (t) {\n        var u = this.out;\n        if (!u)\n            return;\n        var v = this.v;\n        if (v !== empty && this.isEq(t, v))\n            return;\n        this.v = t;\n        u._n(t);\n    };\n    DropRepeatsOperator.prototype._e = function (err) {\n        var u = this.out;\n        if (!u)\n            return;\n        u._e(err);\n    };\n    DropRepeatsOperator.prototype._c = function () {\n        var u = this.out;\n        if (!u)\n            return;\n        u._c();\n    };\n    return DropRepeatsOperator;\n}());\nexports.DropRepeatsOperator = DropRepeatsOperator;\n/**\n * Drops consecutive duplicate values in a stream.\n *\n * Marble diagram:\n *\n * ```text\n * --1--2--1--1--1--2--3--4--3--3|\n *     dropRepeats\n * --1--2--1--------2--3--4--3---|\n * ```\n *\n * Example:\n *\n * ```js\n * import dropRepeats from 'xstream/extra/dropRepeats'\n *\n * const stream = xs.of(1, 2, 1, 1, 1, 2, 3, 4, 3, 3)\n *   .compose(dropRepeats())\n *\n * stream.addListener({\n *   next: i => console.log(i),\n *   error: err => console.error(err),\n *   complete: () => console.log('completed')\n * })\n * ```\n *\n * ```text\n * > 1\n * > 2\n * > 1\n * > 2\n * > 3\n * > 4\n * > 3\n * > completed\n * ```\n *\n * Example with a custom isEqual function:\n *\n * ```js\n * import dropRepeats from 'xstream/extra/dropRepeats'\n *\n * const stream = xs.of('a', 'b', 'a', 'A', 'B', 'b')\n *   .compose(dropRepeats((x, y) => x.toLowerCase() === y.toLowerCase()))\n *\n * stream.addListener({\n *   next: i => console.log(i),\n *   error: err => console.error(err),\n *   complete: () => console.log('completed')\n * })\n * ```\n *\n * ```text\n * > a\n * > b\n * > a\n * > B\n * > completed\n * ```\n *\n * @param {Function} isEqual An optional function of type\n * `(x: T, y: T) => boolean` that takes an event from the input stream and\n * checks if it is equal to previous event, by returning a boolean.\n * @return {Stream}\n */\nfunction dropRepeats(isEqual) {\n    if (isEqual === void 0) { isEqual = void 0; }\n    return function dropRepeatsOperator(ins) {\n        return new index_1.Stream(new DropRepeatsOperator(ins, isEqual));\n    };\n}\nexports.default = dropRepeats;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcFJlcGVhdHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZXh0cmEvZHJvcFJlcGVhdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxrQ0FBMEM7QUFDMUMsSUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBRWpCO0lBTUUsNkJBQW1CLEdBQWMsRUFDckIsRUFBeUM7UUFEbEMsUUFBRyxHQUFILEdBQUcsQ0FBVztRQUwxQixTQUFJLEdBQUcsYUFBYSxDQUFDO1FBQ3JCLFFBQUcsR0FBYyxJQUFXLENBQUM7UUFFNUIsTUFBQyxHQUFZLEtBQUssQ0FBQztRQUl6QixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFDLENBQUMsRUFBRSxDQUFDLElBQUssT0FBQSxDQUFDLEtBQUssQ0FBQyxFQUFQLENBQU8sQ0FBQztJQUMxQyxDQUFDO0lBRUQsb0NBQU0sR0FBTixVQUFPLEdBQWM7UUFDbkIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRUQsbUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBVyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBWSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxnQ0FBRSxHQUFGLFVBQUcsQ0FBSTtRQUNMLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbkIsSUFBSSxDQUFDLENBQUM7WUFBRSxPQUFPO1FBQ2YsSUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQUUsT0FBTztRQUMzQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDVixDQUFDO0lBRUQsZ0NBQUUsR0FBRixVQUFHLEdBQVE7UUFDVCxJQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQ25CLElBQUksQ0FBQyxDQUFDO1lBQUUsT0FBTztRQUNmLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDWixDQUFDO0lBRUQsZ0NBQUUsR0FBRjtRQUNFLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbkIsSUFBSSxDQUFDLENBQUM7WUFBRSxPQUFPO1FBQ2YsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0lBQ1QsQ0FBQztJQUNILDBCQUFDO0FBQUQsQ0FBQyxBQTFDRCxJQTBDQztBQTFDWSxrREFBbUI7QUE0Q2hDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBZ0VHO0FBQ0gscUJBQXVDLE9BQXVEO0lBQXZELHdCQUFBLEVBQUEsZUFBc0QsQ0FBQztJQUM1RixPQUFPLDZCQUE2QixHQUFjO1FBQ2hELE9BQU8sSUFBSSxjQUFNLENBQUksSUFBSSxtQkFBbUIsQ0FBSSxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUNqRSxDQUFDLENBQUM7QUFDSixDQUFDO0FBSkQsOEJBSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge09wZXJhdG9yLCBTdHJlYW19IGZyb20gJy4uL2luZGV4JztcbmNvbnN0IGVtcHR5ID0ge307XG5cbmV4cG9ydCBjbGFzcyBEcm9wUmVwZWF0c09wZXJhdG9yPFQ+IGltcGxlbWVudHMgT3BlcmF0b3I8VCwgVD4ge1xuICBwdWJsaWMgdHlwZSA9ICdkcm9wUmVwZWF0cyc7XG4gIHB1YmxpYyBvdXQ6IFN0cmVhbTxUPiA9IG51bGwgYXMgYW55O1xuICBwdWJsaWMgaXNFcTogKHg6IFQsIHk6IFQpID0+IGJvb2xlYW47XG4gIHByaXZhdGUgdjogVCA9IDxhbnk+IGVtcHR5O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBpbnM6IFN0cmVhbTxUPixcbiAgICAgICAgICAgICAgZm46ICgoeDogVCwgeTogVCkgPT4gYm9vbGVhbikgfCB1bmRlZmluZWQpIHtcbiAgICB0aGlzLmlzRXEgPSBmbiA/IGZuIDogKHgsIHkpID0+IHggPT09IHk7XG4gIH1cblxuICBfc3RhcnQob3V0OiBTdHJlYW08VD4pOiB2b2lkIHtcbiAgICB0aGlzLm91dCA9IG91dDtcbiAgICB0aGlzLmlucy5fYWRkKHRoaXMpO1xuICB9XG5cbiAgX3N0b3AoKTogdm9pZCB7XG4gICAgdGhpcy5pbnMuX3JlbW92ZSh0aGlzKTtcbiAgICB0aGlzLm91dCA9IG51bGwgYXMgYW55O1xuICAgIHRoaXMudiA9IGVtcHR5IGFzIGFueTtcbiAgfVxuXG4gIF9uKHQ6IFQpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKCF1KSByZXR1cm47XG4gICAgY29uc3QgdiA9IHRoaXMudjtcbiAgICBpZiAodiAhPT0gZW1wdHkgJiYgdGhpcy5pc0VxKHQsIHYpKSByZXR1cm47XG4gICAgdGhpcy52ID0gdDtcbiAgICB1Ll9uKHQpO1xuICB9XG5cbiAgX2UoZXJyOiBhbnkpIHtcbiAgICBjb25zdCB1ID0gdGhpcy5vdXQ7XG4gICAgaWYgKCF1KSByZXR1cm47XG4gICAgdS5fZShlcnIpO1xuICB9XG5cbiAgX2MoKSB7XG4gICAgY29uc3QgdSA9IHRoaXMub3V0O1xuICAgIGlmICghdSkgcmV0dXJuO1xuICAgIHUuX2MoKTtcbiAgfVxufVxuXG4vKipcbiAqIERyb3BzIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZSB2YWx1ZXMgaW4gYSBzdHJlYW0uXG4gKlxuICogTWFyYmxlIGRpYWdyYW06XG4gKlxuICogYGBgdGV4dFxuICogLS0xLS0yLS0xLS0xLS0xLS0yLS0zLS00LS0zLS0zfFxuICogICAgIGRyb3BSZXBlYXRzXG4gKiAtLTEtLTItLTEtLS0tLS0tLTItLTMtLTQtLTMtLS18XG4gKiBgYGBcbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgZHJvcFJlcGVhdHMgZnJvbSAneHN0cmVhbS9leHRyYS9kcm9wUmVwZWF0cydcbiAqXG4gKiBjb25zdCBzdHJlYW0gPSB4cy5vZigxLCAyLCAxLCAxLCAxLCAyLCAzLCA0LCAzLCAzKVxuICogICAuY29tcG9zZShkcm9wUmVwZWF0cygpKVxuICpcbiAqIHN0cmVhbS5hZGRMaXN0ZW5lcih7XG4gKiAgIG5leHQ6IGkgPT4gY29uc29sZS5sb2coaSksXG4gKiAgIGVycm9yOiBlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpLFxuICogICBjb21wbGV0ZTogKCkgPT4gY29uc29sZS5sb2coJ2NvbXBsZXRlZCcpXG4gKiB9KVxuICogYGBgXG4gKlxuICogYGBgdGV4dFxuICogPiAxXG4gKiA+IDJcbiAqID4gMVxuICogPiAyXG4gKiA+IDNcbiAqID4gNFxuICogPiAzXG4gKiA+IGNvbXBsZXRlZFxuICogYGBgXG4gKlxuICogRXhhbXBsZSB3aXRoIGEgY3VzdG9tIGlzRXF1YWwgZnVuY3Rpb246XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBkcm9wUmVwZWF0cyBmcm9tICd4c3RyZWFtL2V4dHJhL2Ryb3BSZXBlYXRzJ1xuICpcbiAqIGNvbnN0IHN0cmVhbSA9IHhzLm9mKCdhJywgJ2InLCAnYScsICdBJywgJ0InLCAnYicpXG4gKiAgIC5jb21wb3NlKGRyb3BSZXBlYXRzKCh4LCB5KSA9PiB4LnRvTG93ZXJDYXNlKCkgPT09IHkudG9Mb3dlckNhc2UoKSkpXG4gKlxuICogc3RyZWFtLmFkZExpc3RlbmVyKHtcbiAqICAgbmV4dDogaSA9PiBjb25zb2xlLmxvZyhpKSxcbiAqICAgZXJyb3I6IGVyciA9PiBjb25zb2xlLmVycm9yKGVyciksXG4gKiAgIGNvbXBsZXRlOiAoKSA9PiBjb25zb2xlLmxvZygnY29tcGxldGVkJylcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBgYGB0ZXh0XG4gKiA+IGFcbiAqID4gYlxuICogPiBhXG4gKiA+IEJcbiAqID4gY29tcGxldGVkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpc0VxdWFsIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIG9mIHR5cGVcbiAqIGAoeDogVCwgeTogVCkgPT4gYm9vbGVhbmAgdGhhdCB0YWtlcyBhbiBldmVudCBmcm9tIHRoZSBpbnB1dCBzdHJlYW0gYW5kXG4gKiBjaGVja3MgaWYgaXQgaXMgZXF1YWwgdG8gcHJldmlvdXMgZXZlbnQsIGJ5IHJldHVybmluZyBhIGJvb2xlYW4uXG4gKiBAcmV0dXJuIHtTdHJlYW19XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRyb3BSZXBlYXRzPFQ+KGlzRXF1YWw6ICgoeDogVCwgeTogVCkgPT4gYm9vbGVhbikgfCB1bmRlZmluZWQgPSB2b2lkIDApOiAoaW5zOiBTdHJlYW08VD4pID0+IFN0cmVhbTxUPiB7XG4gIHJldHVybiBmdW5jdGlvbiBkcm9wUmVwZWF0c09wZXJhdG9yKGluczogU3RyZWFtPFQ+KTogU3RyZWFtPFQ+IHtcbiAgICByZXR1cm4gbmV3IFN0cmVhbTxUPihuZXcgRHJvcFJlcGVhdHNPcGVyYXRvcjxUPihpbnMsIGlzRXF1YWwpKTtcbiAgfTtcbn1cbiJdfQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dropRepeats_1 = require(\"xstream/extra/dropRepeats\");\nvar adapt_1 = require(\"@cycle/run/lib/adapt\");\nfunction getStorage$(request$, type) {\n    if (type === 'local') {\n        return request$.filter(function (req) { return !req.target || req.target === 'local'; });\n    }\n    else {\n        return request$.filter(function (req) { return req.target === 'session'; });\n    }\n}\nfunction storageKey(n, request$, type) {\n    if (type === void 0) { type = 'local'; }\n    var storage$ = getStorage$(request$, type);\n    var key = type === \"local\" ? localStorage.key(n) : sessionStorage.key(n);\n    return storage$\n        .filter(function (req) { return req.key === key; })\n        .map(function (req) { return req.key; })\n        .startWith(key)\n        .compose(dropRepeats_1.default());\n}\nfunction storageGetItem(key, request$, type) {\n    if (type === void 0) { type = 'local'; }\n    var storage$ = getStorage$(request$, type);\n    var storageObj = type === \"local\" ? localStorage : sessionStorage;\n    return storage$\n        .filter(function (req) { return req.key === key; })\n        .map(function (req) { return req.value; })\n        .startWith(storageObj.getItem(key));\n}\nfunction getResponseObj(request$, type) {\n    if (type === void 0) { type = 'local'; }\n    return {\n        // Function returning stream of the nth key.\n        key: function (n) {\n            return adapt_1.adapt(storageKey(n, request$, type));\n        },\n        // Function returning stream of item values.\n        getItem: function (key) {\n            return adapt_1.adapt(storageGetItem(key, request$, type));\n        },\n    };\n}\nexports.default = getResponseObj;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar util_1 = require(\"./util\");\nfunction default_1(request$) {\n    return {\n        // For localStorage.\n        get local() {\n            return util_1.default(request$);\n        },\n        // For sessionStorage.\n        get session() {\n            return util_1.default(request$, 'session');\n        },\n    };\n}\nexports.default = default_1;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar writeToStore_1 = require(\"./writeToStore\");\nvar responseCollection_1 = require(\"./responseCollection\");\n/**\n * Storage Driver.\n *\n * This is a localStorage and sessionStorage Driver for Cycle.js apps. The\n * driver is also a function, and it takes a stream of requests as input, and\n * returns a **`responseCollection`** with functions that allow reading from the\n * storage objects. The functions on the **`responseCollection`** return streams\n * of the storage data that was requested.\n *\n * **Requests**. The stream of requests should emit objects. These should be\n * instructions to write to the desired Storage object. Here are the `request`\n * object properties:\n *\n * - `target` *(String)*: type of storage, can be `local` or `session`, defaults\n * to `local`.\n * - `action` *(String)*: type of action, can be `setItem`, `removeItem` or\n * `clear`, defaults to `setItem`.\n * - `key` *(String)*: storage key.\n * - `value` *(String)*: storage value.\n *\n * **responseCollection**. The **`responseCollection`** is an Object that\n * exposes functions to read from local- and sessionStorage.\n *\n * ```js\n * // Returns key of nth localStorage value.\n * responseCollection.local.getKey(n)\n * // Returns localStorage value of `key`.\n * responseCollection.local.getItem(key)\n * ```\n *\n * @param request$ - a stream of write request objects.\n * @return {Object} the response collection containing functions\n * for reading from storage.\n * @function storageDriver\n */\nfunction storageDriver(request$) {\n    // Execute writing actions.\n    request$.addListener({\n        next: function (request) { return writeToStore_1.default(request); },\n    });\n    // Return reading functions.\n    return responseCollection_1.default(request$);\n}\nexports.default = storageDriver;\n","import xs from 'xstream';\nimport { adapt } from '@cycle/run/lib/adapt';\nfunction checkIsolateArgs(dataflowComponent, scope) {\n    if (typeof dataflowComponent !== \"function\") {\n        throw new Error(\"First argument given to isolate() must be a \" +\n            \"'dataflowComponent' function\");\n    }\n    if (scope === null) {\n        throw new Error(\"Second argument given to isolate() must not be null\");\n    }\n}\nfunction normalizeScopes(sources, scopes, randomScope) {\n    var perChannel = {};\n    Object.keys(sources).forEach(function (channel) {\n        if (typeof scopes === 'string') {\n            perChannel[channel] = scopes;\n            return;\n        }\n        var candidate = scopes[channel];\n        if (typeof candidate !== 'undefined') {\n            perChannel[channel] = candidate;\n            return;\n        }\n        var wildcard = scopes['*'];\n        if (typeof wildcard !== 'undefined') {\n            perChannel[channel] = wildcard;\n            return;\n        }\n        perChannel[channel] = randomScope;\n    });\n    return perChannel;\n}\nfunction isolateAllSources(outerSources, scopes) {\n    var innerSources = {};\n    for (var channel in outerSources) {\n        var outerSource = outerSources[channel];\n        if (outerSources.hasOwnProperty(channel) &&\n            outerSource &&\n            scopes[channel] !== null &&\n            typeof outerSource.isolateSource === 'function') {\n            innerSources[channel] = outerSource.isolateSource(outerSource, scopes[channel]);\n        }\n        else if (outerSources.hasOwnProperty(channel)) {\n            innerSources[channel] = outerSources[channel];\n        }\n    }\n    return innerSources;\n}\nfunction isolateAllSinks(sources, innerSinks, scopes) {\n    var outerSinks = {};\n    for (var channel in innerSinks) {\n        var source = sources[channel];\n        var innerSink = innerSinks[channel];\n        if (innerSinks.hasOwnProperty(channel) &&\n            source &&\n            scopes[channel] !== null &&\n            typeof source.isolateSink === 'function') {\n            outerSinks[channel] = adapt(source.isolateSink(xs.fromObservable(innerSink), scopes[channel]));\n        }\n        else if (innerSinks.hasOwnProperty(channel)) {\n            outerSinks[channel] = innerSinks[channel];\n        }\n    }\n    return outerSinks;\n}\nvar counter = 0;\nfunction newScope() {\n    return \"cycle\" + ++counter;\n}\n/**\n * Takes a `component` function and a `scope`, and returns an isolated version\n * of the `component` function.\n *\n * When the isolated component is invoked, each source provided to it is\n * isolated to the given `scope` using `source.isolateSource(source, scope)`,\n * if possible. Likewise, the sinks returned from the isolated component are\n * isolated to the given `scope` using `source.isolateSink(sink, scope)`.\n *\n * The `scope` can be a string or an object. If it is anything else than those\n * two types, it will be converted to a string. If `scope` is an object, it\n * represents \"scopes per channel\", allowing you to specify a different scope\n * for each key of sources/sinks. For instance\n *\n * ```js\n * const childSinks = isolate(Child, {DOM: 'foo', HTTP: 'bar'})(sources);\n * ```\n *\n * You can also use a wildcard `'*'` to use as a default for source/sinks\n * channels that did not receive a specific scope:\n *\n * ```js\n * // Uses 'bar' as the isolation scope for HTTP and other channels\n * const childSinks = isolate(Child, {DOM: 'foo', '*': 'bar'})(sources);\n * ```\n *\n * If a channel's value is null, then that channel's sources and sinks won't be\n * isolated. If the wildcard is null and some channels are unspecified, those\n * channels won't be isolated. If you don't have a wildcard and some channels\n * are unspecified, then `isolate` will generate a random scope.\n *\n * ```js\n * // Does not isolate HTTP requests\n * const childSinks = isolate(Child, {DOM: 'foo', HTTP: null})(sources);\n * ```\n *\n * If the `scope` argument is not provided at all, a new scope will be\n * automatically created. This means that while **`isolate(component, scope)` is\n * pure** (referentially transparent), **`isolate(component)` is impure** (not\n * referentially transparent). Two calls to `isolate(Foo, bar)` will generate\n * the same component. But, two calls to `isolate(Foo)` will generate two\n * distinct components.\n *\n * ```js\n * // Uses some arbitrary string as the isolation scope for HTTP and other channels\n * const childSinks = isolate(Child, {DOM: 'foo'})(sources);\n * ```\n *\n * Note that both `isolateSource()` and `isolateSink()` are static members of\n * `source`. The reason for this is that drivers produce `source` while the\n * application produces `sink`, and it's the driver's responsibility to\n * implement `isolateSource()` and `isolateSink()`.\n *\n * _Note for Typescript users:_ `isolate` is not currently type-transparent and\n * will explicitly convert generic type arguments to `any`. To preserve types in\n * your components, you can use a type assertion:\n *\n * ```ts\n * // if Child is typed `Component<Sources, Sinks>`\n * const isolatedChild = isolate( Child ) as Component<Sources, Sinks>;\n * ```\n *\n * @param {Function} component a function that takes `sources` as input\n * and outputs a collection of `sinks`.\n * @param {String} scope an optional string that is used to isolate each\n * `sources` and `sinks` when the returned scoped component is invoked.\n * @return {Function} the scoped component function that, as the original\n * `component` function, takes `sources` and returns `sinks`.\n * @function isolate\n */\nfunction isolate(component, scope) {\n    if (scope === void 0) { scope = newScope(); }\n    checkIsolateArgs(component, scope);\n    var randomScope = typeof scope === 'object' ? newScope() : '';\n    var scopes = typeof scope === 'string' || typeof scope === 'object'\n        ? scope\n        : scope.toString();\n    return function wrappedComponent(outerSources) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var scopesPerChannel = normalizeScopes(outerSources, scopes, randomScope);\n        var innerSources = isolateAllSources(outerSources, scopesPerChannel);\n        var innerSinks = component.apply(void 0, [innerSources].concat(rest));\n        var outerSinks = isolateAllSinks(outerSources, innerSinks, scopesPerChannel);\n        return outerSinks;\n    };\n}\nisolate.reset = function () { return (counter = 0); };\nexport default isolate;\nexport function toIsolated(scope) {\n    if (scope === void 0) { scope = newScope(); }\n    return function (component) { return isolate(component, scope); };\n}\n//# sourceMappingURL=index.js.map","import { Driver } from \"@cycle/run\";\nimport xs, { Stream } from \"xstream\";\n\nexport const makeWorkerDriver = <I, O>(\n  worker: Worker\n): Driver<Stream<I>, Stream<O>> => input$ => {\n  input$.addListener({\n    next: e => worker.postMessage(e)\n  });\n\n  return xs.create({\n    start: listener => {\n      worker.onmessage = e => {\n        listener.next(e.data);\n      };\n    },\n    stop: () => {\n      worker.onmessage = null;\n    }\n  });\n};\n","import { Driver } from \"@cycle/run\";\nimport xs, { Stream } from \"xstream\";\n\nexport type AudioSink = Stream<\n  | {\n      key: \"start_recording\";\n    }\n  | {\n      key: \"stop_recording\";\n    }\n  | {\n      key: \"set_volume\";\n      data: number;\n    }\n  | {\n      key: \"start_playing\";\n      data: Float32Array;\n    }\n  | {\n      key: \"stop_playing\";\n    }\n>;\n\nexport interface AudioSource {\n  sampleRate: number;\n  samples: Stream<Float32Array>;\n  sourceAnalyser: AnalyserNode;\n  outputAnalyser: AnalyserNode;\n}\n\ninterface UserMediaSource {\n  start(): void;\n  stop(): void;\n  samples: Stream<Float32Array>;\n  analyser: AnalyserNode;\n}\n\ninterface PlaybackSource {\n  start(samples: Float32Array): void;\n  stop(): void;\n  setVolume(value: number): void;\n  analyser: AnalyserNode;\n}\n\nconst createCancellableMediaStream = (\n  cb: (stream: MediaStream) => void\n): Function => {\n  const mediaStreamPromise = navigator.mediaDevices.getUserMedia({\n    audio: true\n  });\n  let cancelled = false;\n\n  mediaStreamPromise.then(stream => {\n    if (!cancelled) {\n      cb(stream);\n    }\n  });\n\n  return () => {\n    cancelled = true;\n\n    mediaStreamPromise.then(stream =>\n      stream.getTracks().forEach(track => track.stop())\n    );\n  };\n};\n\nfunction createUserMediaSource(audioCtx: AudioContext): UserMediaSource {\n  const analyserNode = audioCtx.createAnalyser();\n  const scriptProcessorNode = audioCtx.createScriptProcessor(4096, 1, 1);\n  const muteNode = audioCtx.createGain();\n  let cancel: Function | null = null;\n\n  analyserNode.connect(scriptProcessorNode);\n  scriptProcessorNode.connect(muteNode);\n  muteNode.connect(audioCtx.destination);\n  muteNode.gain.value = 0;\n\n  return {\n    start: () => {\n      cancel = createCancellableMediaStream(stream => {\n        const source = audioCtx.createMediaStreamSource(stream);\n\n        source.connect(analyserNode);\n      });\n    },\n    stop: () => {\n      if (cancel !== null) {\n        cancel();\n      }\n\n      cancel = null;\n    },\n    samples: xs.create({\n      start: listener => {\n        scriptProcessorNode.onaudioprocess = (e: AudioProcessingEvent) => {\n          const { inputBuffer } = e;\n          const data = inputBuffer.getChannelData(0);\n\n          listener.next(data);\n        };\n      },\n      stop: () => {\n        scriptProcessorNode.onaudioprocess = null;\n      }\n    }),\n    analyser: analyserNode\n  };\n}\n\nfunction createPlaybackSource(audioCtx: AudioContext): PlaybackSource {\n  const analyserNode = audioCtx.createAnalyser();\n  const volumeControlNode = audioCtx.createGain();\n  let bufferSource: AudioBufferSourceNode | null = null;\n\n  analyserNode.connect(volumeControlNode);\n  volumeControlNode.connect(audioCtx.destination);\n\n  return {\n    start: (buffer: Float32Array) => {\n      const audioBuffer = audioCtx.createBuffer(\n        1,\n        buffer.length,\n        audioCtx.sampleRate\n      );\n      audioBuffer.copyToChannel(buffer, 0, 0);\n\n      bufferSource = audioCtx.createBufferSource();\n      bufferSource.buffer = audioBuffer;\n      bufferSource.connect(analyserNode);\n      bufferSource.start();\n    },\n    stop: () => {\n      if (bufferSource != null) {\n        bufferSource.stop();\n      }\n    },\n    setVolume: (value: number) => {\n      volumeControlNode.gain.value = value;\n    },\n    analyser: analyserNode\n  };\n}\n\nexport const makeAudioDriver = (\n  audioCtx: AudioContext\n): Driver<AudioSink, AudioSource> => action$ => {\n  const mediaSource = createUserMediaSource(audioCtx);\n  const playbackSource = createPlaybackSource(audioCtx);\n\n  action$.subscribe({\n    next: action => {\n      switch (action.key) {\n        case \"start_recording\":\n          mediaSource.start();\n          break;\n\n        case \"stop_recording\":\n          mediaSource.stop();\n          playbackSource.stop();\n          break;\n\n        case \"set_volume\":\n          playbackSource.setVolume(action.data);\n          break;\n\n        case \"start_playing\":\n          playbackSource.start(action.data);\n          break;\n\n        case \"stop_playing\":\n          playbackSource.stop();\n          break;\n      }\n    },\n    error: console.error,\n    complete: () => {\n      mediaSource.stop();\n      playbackSource.stop();\n    }\n  });\n\n  return {\n    sampleRate: audioCtx.sampleRate,\n    samples: mediaSource.samples,\n    sourceAnalyser: mediaSource.analyser,\n    outputAnalyser: playbackSource.analyser\n  };\n};\n","/**\n * Utility function to filter actions by key with type narrowing\n */\nexport const ofType = <T extends { key: string }, K extends string>(key: K) => (\n  action: T\n): action is Extract<T, { key: K }> => {\n  return action.key == key;\n};\n\n/**\n * Another simple utility function which filters by the value\n */\nexport const is = <T>(x: T) => (y: T) => x === y;\n","import xs, { Stream } from \"xstream\";\nimport { div, span, input, DOMSource, VNode } from \"@cycle/dom\";\n\nexport type Value = number;\n\nexport interface Props {\n  initial: Value;\n  label: string;\n  min: number;\n  max: number;\n}\n\nexport interface Sources {\n  DOM: DOMSource;\n  props$: Stream<Props>;\n}\n\nexport interface Sinks {\n  DOM: Stream<VNode>;\n  value: Stream<Value>;\n  changes: Stream<Value>;\n}\n\nfunction intent(domSource: DOMSource): Stream<Value> {\n  return domSource\n    .select(\".slider\")\n    .events(\"input\")\n    .map((ev: any) => ev.target.value);\n}\n\nfunction model(newValue$: Stream<Value>, props$: Stream<Props>): Stream<Value> {\n  const initialValue$ = props$.map(props => props.initial).take(1);\n  return xs.merge(initialValue$, newValue$).remember();\n}\n\nfunction view(props$: Stream<Props>, value$: Stream<Value>) {\n  return xs.combine(props$, value$).map(([props, value]) =>\n    div(\".labeled-slider\", [\n      span(\".label\", props.label),\n      input(\".slider\", {\n        attrs: { type: \"range\", min: props.min, max: props.max, value }\n      })\n    ])\n  );\n}\n\nexport const LabeledSlider = (sources: Sources): Sinks => {\n  const change$ = intent(sources.DOM);\n  const value$ = model(change$, sources.props$);\n  const vdom$ = view(sources.props$, value$);\n  return {\n    DOM: vdom$,\n    value: value$,\n    changes: change$\n  };\n};\n","import xs, { Stream } from \"xstream\";\nimport { div, label, span, input, DOMSource, VNode } from \"@cycle/dom\";\n\nexport type Value = boolean;\n\nexport interface Props {\n  initial: Value;\n  label: any;\n}\n\nexport interface Sources {\n  DOM: DOMSource;\n  props$: Stream<Props>;\n}\n\nexport interface Sinks {\n  DOM: Stream<VNode>;\n  checked: Stream<Value>;\n  changes: Stream<Value>;\n}\n\nfunction intent(domSource: DOMSource): Stream<Value> {\n  return domSource\n    .select(\".checkbox\")\n    .events(\"input\")\n    .map((ev: any) => ev.target.checked);\n}\n\nfunction model(newValue$: Stream<Value>, props$: Stream<Props>): Stream<Value> {\n  const initialValue$ = props$.map(props => props.initial).take(1);\n  return xs.merge(initialValue$, newValue$).remember();\n}\n\nfunction view(props$: Stream<Props>, value$: Stream<Value>) {\n  return xs.combine(props$, value$).map(([props, value]) =>\n    label(\".toggle-button\", [\n      input(\".checkbox\", {\n        attrs: {\n          type: \"checkbox\",\n          checked: value\n        }\n      }),\n      div(\n        {\n          attrs: {\n            class: [\"caption\"]\n          }\n        },\n        props.label\n      )\n    ])\n  );\n}\n\nexport const ToggleButton = (sources: Sources): Sinks => {\n  const change$ = intent(sources.DOM);\n  const value$ = model(change$, sources.props$);\n  const vdom$ = view(sources.props$, value$);\n  return {\n    DOM: vdom$,\n    checked: value$,\n    changes: change$\n  };\n};\n","import { run } from \"@cycle/run\";\nimport {\n  div,\n  svg,\n  input,\n  label,\n  makeDOMDriver,\n  VNode,\n  DOMSource\n} from \"@cycle/dom\";\nimport * as Snabbdom from \"snabbdom-pragma\";\nimport storageDriver, {\n  StorageRequest,\n  ResponseCollection\n} from \"@cycle/storage\";\nimport isolate, { Component } from \"@cycle/isolate\";\nimport xs, { Stream } from \"xstream\";\nimport { makeWorkerDriver } from \"./drivers/worker\";\nimport { makeAudioDriver, AudioSource, AudioSink } from \"./drivers/audio\";\nimport { InputWorkerEvent, OutputWorkerEvent } from \"./worker\";\nimport { is, ofType } from \"./utils\";\nimport { LabeledSlider } from \"./components/LabeledSlider\";\nimport { ToggleButton } from \"./components/ToggleButton\";\n\nexport type Sources = {\n  DOM: DOMSource;\n  storage: ResponseCollection;\n  audio: AudioSource;\n  worker: Stream<OutputWorkerEvent>;\n};\n\nexport type Sinks = {\n  DOM: Stream<VNode>;\n  storage: Stream<StorageRequest>;\n  audio: AudioSink;\n  worker: Stream<InputWorkerEvent>;\n};\n\n/**\n * Adjust threshold value to fit real scale.\n *\n * Exponentiation makes the slider feel more natural.\n */\nconst exponentiateThreshold = (v: number) => v ** 2 * 0.2;\n\nconst main = (sources: Sources): Sinks => {\n  const VolumeSlider = isolate(LabeledSlider) as typeof LabeledSlider;\n  const ThresholdSlider = isolate(LabeledSlider) as typeof LabeledSlider;\n  const helpVisible$ = sources.DOM.select(\".help-button\")\n    .events(\"click\")\n    .debug(console.log)\n    .fold(isShown => !isShown, false);\n\n  const volumeSliderProps$ = sources.storage.local\n    .getItem<string>(\"volume\")\n    .take(1)\n    .map(value => (value ? parseInt(value, 10) : 50))\n    .map(value => ({\n      label: \"Feedback Volume\",\n      min: 0,\n      max: 100,\n      initial: value\n    }));\n\n  const thresholdSliderProps$ = sources.storage.local\n    .getItem<string>(\"threshold\")\n    .take(1)\n    .map(value => (value ? parseInt(value, 10) : 15))\n    .map(value => ({\n      label: \"Amplitude Threshold\",\n      min: 0,\n      max: 100,\n      initial: value\n    }));\n\n  const toggleButtonProps$ = sources.storage.local\n    .getItem<string>(\"started\")\n    .take(1)\n    .map(value => value === \"true\")\n    .map(value => ({\n      label: (\n        <svg viewBox=\"0 0 24 24\">\n          <path d=\"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\" />\n          <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n        </svg>\n      ),\n      initial: value\n    }));\n\n  const volumeSlider = VolumeSlider({\n    DOM: sources.DOM,\n    props$: volumeSliderProps$\n  });\n  const thresholdSlider = ThresholdSlider({\n    DOM: sources.DOM,\n    props$: thresholdSliderProps$\n  });\n  const toggleButton = ToggleButton({\n    DOM: sources.DOM,\n    props$: toggleButtonProps$\n  });\n\n  const volume$ = volumeSlider.value;\n  const threshold$ = thresholdSlider.value;\n  const started$ = toggleButton.checked;\n\n  // We also need explicit changes (i.e. exlude default values) to\n  // invoke driver actions explicitly.\n  const thresholdChange$ = thresholdSlider.changes;\n  const startedChange$ = toggleButton.changes;\n\n  const vdom$ = xs\n    .combine(\n      helpVisible$\n        .filter(is(true))\n        .take(1)\n        .startWith(false),\n      helpVisible$,\n      volumeSlider.DOM,\n      thresholdSlider.DOM,\n      toggleButton.DOM\n    )\n    .map(\n      ([\n        helpShown,\n        helpVisible,\n        volumeSliderDOM,\n        thresholdSliderDOM,\n        toggleButtonDOM\n      ]) => (\n        <main>\n          <header>\n            <h1 className=\"title\">Repeater</h1>\n            <a className=\"help-button\" aria-label=\"About\">\n              <svg viewBox=\"0 0 24 24\">\n                <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n                <path d=\"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z\" />\n              </svg>\n            </a>\n          </header>\n          {helpShown && (\n            <section className={`help ${helpVisible ? \"\" : \"help-hidden\"}`}>\n              <p>\n                Repeater listens to your speech and plays it back automatically.\n                It helps practice shadowing technique for language learning and\n                improving pronunciation.\n              </p>\n              <p>\n                Open a video, like TED talk, and repeat after the speaker as\n                closely in time, rhythm, and intonation as possible. Pause the\n                video, and compare it to your own speech.\n              </p>\n              <div className=\"embedded-video\">\n                <iframe\n                  src=\"https://www.youtube-nocookie.com/embed/u5JseMqoQCg?rel=0\"\n                  frameborder=\"0\"\n                  allow=\"autoplay; encrypted-media\"\n                  allowfullscreen\n                />\n              </div>\n              <p>\n                Using headphones is recommended to avoid interference from the\n                speakers. Recorded audio never leaves your browser. For more\n                information about the shadowing technique, see the above video.\n              </p>\n            </section>\n          )}\n          <section className=\"volume-slider\">{volumeSliderDOM}</section>\n          <section className=\"threshold-slider\">{thresholdSliderDOM}</section>\n          <section className=\"toggle-button\">{toggleButtonDOM}</section>\n          <footer>\n            <a\n              className=\"social-link\"\n              href=\"https://github.com/mpontus/repeater\"\n            >\n              <svg\n                viewBox=\"0 0 16 16\"\n                width=\"16\"\n                height=\"16\"\n                aria-hidden=\"true\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z\"\n                />\n              </svg>\n              <span>Fork me on GitHub</span>\n            </a>\n          </footer>\n        </main>\n      )\n    );\n\n  const audioSink = xs.merge(\n    started$.filter(is(true)).mapTo({ key: \"start_recording\" }),\n    startedChange$.filter(is(false)).mapTo({ key: \"stop_recording\" }),\n    volume$.map(value => ({ key: \"set_volume\", data: value / 100 })),\n    sources.worker.filter(ofType(\"voice_start\")).mapTo({ key: \"stop_playing\" }),\n    sources.worker.filter(ofType(\"voice_end\")).map(e => ({\n      key: \"start_playing\",\n      data: e.data\n    }))\n  ) as AudioSink;\n\n  const workerSink: Stream<InputWorkerEvent> = xs.merge(\n    started$\n      .filter(is(true))\n      // Nested stream is necessary in order to pass threshold with\n      // \"start\", and not emit \"start\" on every threshold change\n      .map(() =>\n        threshold$.take(1).map<InputWorkerEvent>(threshold => ({\n          key: \"start\",\n          data: {\n            sampleRate: sources.audio.sampleRate,\n            amplitudeThreshold: exponentiateThreshold(threshold / 100),\n            silenceDuration: 0.5,\n            contextDuration: 0.5\n          }\n        }))\n      )\n      .flatten(),\n\n    startedChange$.filter(is(false)).mapTo<InputWorkerEvent>({ key: \"stop\" }),\n    thresholdChange$.map<InputWorkerEvent>(threshold => ({\n      key: \"update_settings\",\n      data: {\n        amplitudeThreshold: exponentiateThreshold(threshold / 100)\n      }\n    })),\n    sources.audio.samples.map<InputWorkerEvent>(data => ({\n      key: \"process\",\n      data\n    }))\n  );\n\n  const storageSink = xs.merge(\n    volume$.map(value => ({\n      key: \"volume\",\n      value\n    })),\n    threshold$.map(value => ({\n      key: \"threshold\",\n      value\n    })),\n    started$.map(value => ({\n      key: \"started\",\n      value\n    }))\n  );\n\n  return {\n    DOM: vdom$,\n    audio: audioSink,\n    worker: workerSink,\n    storage: storageSink\n  };\n};\n\nrun(main, {\n  DOM: makeDOMDriver(\"#main\"),\n  storage: storageDriver,\n  audio: makeAudioDriver(new AudioContext()),\n  worker: makeWorkerDriver<InputWorkerEvent, OutputWorkerEvent>(\n    new Worker(\"./worker.ts\")\n  )\n});\n"]}